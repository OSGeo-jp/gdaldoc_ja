<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Compiling the C# bindings - Legacy Scripts &mdash; GDAL  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/gdal.css?v=e152ac3b" />

  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="canonical" href="https://gdal.org/api/csharp/csharp_compile_legacy.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=c033477b"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/translations.js?v=4dbe4bdc"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="このドキュメントについて" href="../../about.html" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="Compiling the C# bindings - CMake Scripts" href="csharp_compile_cmake.html" />
    <link rel="prev" title="C# bindings" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/gdalicon.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../download.html">ダウンロード</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programs/index.html">Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers/raster/index.html">Raster drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers/vector/index.html">Vector drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">ユーザー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sponsors/index.html">Sponsors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">How to contribute?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">ライセンス</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html"> GDAL  ドキュメント </a> &raquo;</li>
      
          <li><a href="../index.html">API</a> &raquo;</li>
      
          <li><a href="index.html">C# bindings</a> &raquo;</li>
      
      <li>Compiling the C# bindings - Legacy Scripts</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit/master/doc/source/api/csharp/csharp_compile_legacy.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="csharp_compile_cmake.html" class="btn btn-neutral float-right" title="Compiling the C# bindings - CMake Scripts" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="C# bindings" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="compiling-the-c-bindings-legacy-scripts">
<span id="csharp-compile-legacy"></span><h1>Compiling the C# bindings - Legacy Scripts<a class="headerlink" href="#compiling-the-c-bindings-legacy-scripts" title="Link to this heading"></a></h1>
<p>This page describes the primary steps when creating the GDAL/OGR C# binaries from the source.</p>
<p>In most cases this is not necessary and it is better to use one of the pre-compiled sources, such as <a class="reference external" href="https://gisinternals.com/">GisInternals</a> or Conda.</p>
<section id="building-on-windows">
<h2>Building on Windows<a class="headerlink" href="#building-on-windows" title="Link to this heading"></a></h2>
<p>To building the C# interface, you need a compiled version of the GDAL core. This can be the result of a manual compilation or can be linking to one of the prebuilt binaries.
In the former case the following should be run in the clone of the GitHub repository used to build GDAL and the steps to create the environment should not be necessary.</p>
<section id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Link to this heading"></a></h3>
<p>The build environment has the following dependencies:</p>
<ul class="simple">
<li><p>nmake / Visual Studio</p></li>
<li><p>SWIG 3/4</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>The <a class="reference external" href="https://github.com/OSGeo/gdal/blob/master/.github/workflows/windows_build.yml">GDAL test scripts</a> use VS 2019 (MSVC Ver 1920) so it would make sense to use the same versions.</p>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><a class="reference external" href="http://www.swig.org/">SWIG</a> is used to build the API bindings. The GDAL test scripts use version 3 and the conda build use version 4. Both Work.</p>
</div>
</section>
<section id="build-environment">
<h3>Build Environment<a class="headerlink" href="#build-environment" title="Link to this heading"></a></h3>
<p>You need to set up the build environment. If you are using VS 2019, this might be the command:</p>
<p><strong class="program">VsDevCmd.bat -arch=x64</strong></p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>The <strong class="program">VsDevCmd.bat</strong> command can usually be found in <code class="file docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files</span> <span class="pre">(x86)\Microsoft</span> <span class="pre">Visual</span> <span class="pre">Studio\2019\Enterprise\Common7\Tools</span></code> or the equivalent for the Community Edition.</p>
</div>
<p>If you don't want to bother with executing the proper vcvars*.bat you might use the development environment specific command prompt to accomplish this task. When using a Win64 compilation be careful to activate the x64 version of the command prompt installed on your system.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>If you are not running in an environment that has been used to compile GDAL locally, then there are a number of variables that need to be configured. The Conda <code class="docutils literal notranslate"><span class="pre">gdal-feedstock</span></code> configuration app can be used as a guideline about how to do that - <a class="reference external" href="https://github.com/conda-forge/gdal-feedstock/blob/master/recipe/set_bld_opts.bat">build.bat</a>.</p>
</div>
</section>
<section id="creating-the-swig-interface-code">
<h3>Creating the SWIG interface code<a class="headerlink" href="#creating-the-swig-interface-code" title="Link to this heading"></a></h3>
<p>The first step is to generate the SWIG interface code. This will create a set of <code class="docutils literal notranslate"><span class="pre">.cs</span></code> definitions that will be compiled into the <code class="docutils literal notranslate"><span class="pre">.dll</span></code> files</p>
<p>To create the interface execute the following command (from the <code class="docutils literal notranslate"><span class="pre">swig\csharp</span></code> directory):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>nmake /f makefile.vc interface`
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>You should edit nmake.opt adding the actual location of the <code class="file docutils literal notranslate"><span class="pre">swig.exe</span></code> file.</p>
</div>
</section>
<section id="compiling-the-code">
<h3>Compiling the code<a class="headerlink" href="#compiling-the-code" title="Link to this heading"></a></h3>
<p>After creating the interface the code can be compiled using this command (from the <code class="docutils literal notranslate"><span class="pre">swig\csharp</span></code> directory):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nmake</span> <span class="o">/</span><span class="n">f</span> <span class="n">makefile</span><span class="o">.</span><span class="n">vc</span>
</pre></div>
</div>
<p>Upon a successful compilation the following files are created:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">gdal_csharp.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">ogr_csharp.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">osr_csharp.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">gdalconst_csharp.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">gdal_wrap.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">ogr_wrap.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">osr_wrap.dll</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">gdalconst_wrap.dll</span></code></p></li>
<li><p>various sample applications</p></li>
</ul>
<p>The <code class="file docutils literal notranslate"><span class="pre">*_csharp.dll</span></code> binaries are the managed part of the interface. You should add a reference to these assemblies for using the classes of the interface. These <code class="file docutils literal notranslate"><span class="pre">*_csharp.dll</span></code> files will load the corresponding <code class="file docutils literal notranslate"><span class="pre">*_wrap.dll</span></code> files, which are the unmanaged part of the interface hosting the code of the gdal core.</p>
</section>
<section id="testing-the-successful-compilation">
<h3>Testing the successful compilation<a class="headerlink" href="#testing-the-successful-compilation" title="Link to this heading"></a></h3>
<p>To test the compiled binaries, you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>nmake /f makefile.vc test`
</pre></div>
</div>
<p>This command will invoke some of the sample applications.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>For the tests to work the location of the proj and gdal DLLs should be available in the PATH.</p>
</div>
</section>
<section id="using-mono-on-windows">
<h3>Using MONO on Windows<a class="headerlink" href="#using-mono-on-windows" title="Link to this heading"></a></h3>
<p>If you have the Windows version of the MONO package installed you can compile the C# code using the MONO compiler. In this case uncomment the following entry in csharp.opt:</p>
<p><strong class="program">MONO = YES</strong></p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>mcs.exe must be in the PATH.</p>
</div>
</section>
</section>
<section id="building-on-linux-osx">
<h2>Building on Linux/OSX<a class="headerlink" href="#building-on-linux-osx" title="Link to this heading"></a></h2>
<section id="id1">
<h3>Requirements<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>The build environment has the following dependencies:</p>
<ul class="simple">
<li><p>make</p></li>
<li><p>SWIG 3/4</p></li>
<li><p>mono (probably any reasonable version)</p></li>
</ul>
</section>
<section id="id2">
<h3>Build Environment<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<p>The build environment needs to be correctly configured. If you are not running in an environment that has been used to locally build GDAL then you should run the <strong class="program">configure</strong> command from the GDAL root directory.</p>
<p>The conda gdal-feedstock recipe provides an example of how to do that - <a class="reference external" href="https://github.com/conda-forge/gdal-feedstock/blob/master/recipe/build.sh">build.sh</a></p>
</section>
<section id="id3">
<h3>Creating the SWIG interface code<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<p>The first step is to generate the SWIG interface code. This will create a set of <code class="file docutils literal notranslate"><span class="pre">.cs</span></code> definitions that will be compiled into the <code class="file docutils literal notranslate"><span class="pre">.dll</span></code> files</p>
<p>To create the interface execute the following command (from the <code class="file docutils literal notranslate"><span class="pre">swig/</span>&#160;&#160;&#160; <span class="pre">csharp</span></code> directory):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">generate</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>In versions of GDAL &lt; 3.3.0 - this command will create incorrect interfaces without the correct namespace. See <a class="reference external" href="https://github.com/OSGeo/gdal/pull/3670/commits/777c9d0e86602740199cf9a4ab44e040c52c2283">#3670</a>.</p>
</div>
</section>
<section id="id4">
<h3>Compiling the code<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<p>After creating the interface the code can be compiled using this command (from the <code class="file docutils literal notranslate"><span class="pre">swig/csharp</span></code> directory):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span>
</pre></div>
</div>
<p>Upon a successful compilation the following files are created:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">gdal_csharp.dll</span></code> and <code class="file docutils literal notranslate"><span class="pre">gdal_csharp.dll.config</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">ogr_csharp.dll</span></code> and <code class="file docutils literal notranslate"><span class="pre">ogr_csharp.dll.config</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">osr_csharp.dll</span></code> and <code class="file docutils literal notranslate"><span class="pre">osr_csharp.dll.config</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">gdalconst_csharp.dll</span></code> and <code class="file docutils literal notranslate"><span class="pre">gdalconst_csharp.dll.config</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">libgdalcsharp.so</span> <span class="pre">/</span> <span class="pre">.dylib</span></code> etc</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">libogrcsharp.so</span> <span class="pre">/</span> <span class="pre">.dylib</span></code> etc</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">libosrcsharp.so</span> <span class="pre">/</span> <span class="pre">.dylib</span></code> etc</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">libgdalconst_wrap.so</span> <span class="pre">/</span> <span class="pre">.dylib</span></code> etc</p></li>
<li><p>various sample applications (<code class="file docutils literal notranslate"><span class="pre">*.exe</span></code>)</p></li>
</ul>
<p>The <code class="file docutils literal notranslate"><span class="pre">*_csharp.dll</span></code> binaries are the managed part of the interface. You should add a reference to these assemblies for using the classes of the interface.</p>
<p>The <code class="file docutils literal notranslate"><span class="pre">*_csharp.dll</span></code> files will try to load the corresponding <code class="file docutils literal notranslate"><span class="pre">*_wrap.dll</span></code> and are redirected to the <code class="file docutils literal notranslate"><span class="pre">libxxxcsharp.*</span></code> libraries, which are the unmanaged part of the interface hosting the code of the gdal core,
by the <code class="file docutils literal notranslate"><span class="pre">*.dll.config</span></code> definitions.</p>
</section>
<section id="id5">
<h3>Testing the successful compilation<a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<p>To test the compiled binaries, you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nmake</span> <span class="n">test</span>
</pre></div>
</div>
<p>This command will invoke some of the sample applications.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>For the tests to work the location of the proj and gdal libraries should be available in the PATH.</p>
</div>
</section>
<section id="using-the-bindings-on-unix">
<h3>Using The Bindings on Unix<a class="headerlink" href="#using-the-bindings-on-unix" title="Link to this heading"></a></h3>
<p>Note that the bindings created by this process will only work with Mono at the moment.</p>
<p>To run one of the prebuilt executables - you can run them with Mono as follows :</p>
<p><strong class="program">mono GDALInfo.exe</strong></p>
<p>Both the managed libraries (i.e. the DLLs) and the unmanaged libraries must be available to Mono.
This is in more detail in <a class="reference external" href="https://www.mono-project.com/docs/advanced/pinvoke/">the Mono documentation</a></p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>This document was amended from the previous version at <a class="reference external" href="https://trac.osgeo.org/gdal/wiki/GdalOgrCsharpCompile">https://trac.osgeo.org/gdal/wiki/GdalOgrCsharpCompile</a></p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="csharp_compile_cmake.html" class="btn btn-neutral float-right" title="Compiling the C# bindings - CMake Scripts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="C# bindings" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2024 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
  </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>