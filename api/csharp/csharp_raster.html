<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>C# Raster Interface &mdash; GDAL  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/gdal.css?v=e152ac3b" />

  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="canonical" href="https://gdal.org/api/csharp/csharp_raster.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=c033477b"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/translations.js?v=4dbe4bdc"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="このドキュメントについて" href="../../about.html" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="C# Vector and Spatial Reference Interfaces" href="csharp_vector.html" />
    <link rel="prev" title="Compiling the C# bindings - CMake Scripts" href="csharp_compile_cmake.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/gdalicon.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../download.html">ダウンロード</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programs/index.html">プログラム</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers/raster/index.html">Raster drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers/vector/index.html">Vector drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">ユーザー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">チュートリアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sponsors/index.html">Sponsors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">How to contribute?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html"> GDAL  ドキュメント </a> &raquo;</li>
      
          <li><a href="../index.html">API</a> &raquo;</li>
      
          <li><a href="index.html">C# bindings</a> &raquo;</li>
      
      <li>C# Raster Interface</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit/master/doc/source/api/csharp/csharp_raster.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="csharp_vector.html" class="btn btn-neutral float-right" title="C# Vector and Spatial Reference Interfaces" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="csharp_compile_cmake.html" class="btn btn-neutral float-left" title="Compiling the C# bindings - CMake Scripts" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="c-raster-interface">
<span id="csharp-raster"></span><h1>C# Raster Interface<a class="headerlink" href="#c-raster-interface" title="Link to this heading"></a></h1>
<p>The GDAL C# interface supports transferring raster data between the C# application and GDAL.</p>
<p>The various <code class="file docutils literal notranslate"><span class="pre">Band.ReadRaster</span></code>, <code class="file docutils literal notranslate"><span class="pre">Band.WriteRaster</span></code>, <code class="file docutils literal notranslate"><span class="pre">Dataset.ReadRaster</span></code>, <code class="file docutils literal notranslate"><span class="pre">Dataset.WriteRaster</span></code> overloads
are involved in transferring raster data between the managed and the unmanaged parts of the application.</p>
<p>This page will summarize the main aspects of raster data handling related exclusively to the C# interface.</p>
<p>The <code class="file docutils literal notranslate"><span class="pre">Band</span></code> class contains the following <code class="file docutils literal notranslate"><span class="pre">ReadRaster</span></code>/<code class="file docutils literal notranslate"><span class="pre">WriteRaster</span></code> overloads:</p>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="n">CPLErr</span><span class="w"> </span><span class="nf">ReadRaster</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">byte</span><span class="p">[]</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">){}</span>

<span class="k">public</span><span class="w"> </span><span class="n">CPLErr</span><span class="w"> </span><span class="nf">WriteRaster</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">byte</span><span class="p">[]</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">){}</span>

<span class="k">public</span><span class="w"> </span><span class="n">CPLErr</span><span class="w"> </span><span class="nf">ReadRaster</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">short</span><span class="p">[]</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">){}</span>

<span class="k">public</span><span class="w"> </span><span class="n">CPLErr</span><span class="w"> </span><span class="nf">WriteRaster</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">short</span><span class="p">[]</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">){}</span>

<span class="k">public</span><span class="w"> </span><span class="n">CPLErr</span><span class="w"> </span><span class="nf">ReadRaster</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">){}</span>

<span class="k">public</span><span class="w"> </span><span class="n">CPLErr</span><span class="w"> </span><span class="nf">WriteRaster</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">){}</span>

<span class="k">public</span><span class="w"> </span><span class="n">CPLErr</span><span class="w"> </span><span class="nf">ReadRaster</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">[]</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">){}</span>

<span class="k">public</span><span class="w"> </span><span class="n">CPLErr</span><span class="w"> </span><span class="nf">WriteRaster</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="p">[]</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">){}</span>

<span class="k">public</span><span class="w"> </span><span class="n">CPLErr</span><span class="w"> </span><span class="nf">ReadRaster</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">[]</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">){}</span>

<span class="k">public</span><span class="w"> </span><span class="n">CPLErr</span><span class="w"> </span><span class="nf">WriteRaster</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">[]</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">){}</span>

<span class="k">public</span><span class="w"> </span><span class="n">CPLErr</span><span class="w"> </span><span class="nf">ReadRaster</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="n">IntPtr</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="n">i</span>
<span class="w">    </span><span class="n">nt</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="n">DataType</span><span class="w"> </span><span class="n">buf_type</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">){}</span>

<span class="k">public</span><span class="w"> </span><span class="n">CPLErr</span><span class="w"> </span><span class="nf">WriteRaster</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="n">IntPtr</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="n">DataType</span><span class="w"> </span><span class="n">buf_type</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">){}</span>
</pre></div>
</div>
<p>The only difference between these functions is the actual type of the buffer parameter.
The last 2 overloads are the generic overloads and the caller should write the proper marshaling
code for the buffer holding the raster data. The overloads that have a C# array as the buffer parameter
implement the proper marshaling code for the caller.</p>
<section id="reading-the-raster-image">
<h2>Reading the raster image<a class="headerlink" href="#reading-the-raster-image" title="Link to this heading"></a></h2>
<p>When reading raster data from GDAL, the user will probably create a .NET image to hold C# representation of the data.
The raster data can be read directly or in a buffered fashion.</p>
<section id="using-the-buffered-read-approach">
<h3>Using the buffered read approach<a class="headerlink" href="#using-the-buffered-read-approach" title="Link to this heading"></a></h3>
<p>When reading the image this way the C# API will copy the image data between the C and the C# arrays:</p>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="c1">// Creating a Bitmap to store the GDAL image in</span>
<span class="n">Bitmap</span><span class="w"> </span><span class="n">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Bitmap</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">PixelFormat</span><span class="p">.</span><span class="n">Format32bppRgb</span><span class="p">);</span>
<span class="c1">// Creating a C# array to hold the image data</span>
<span class="kt">byte</span><span class="p">[]</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">byte</span><span class="p">[</span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p">];</span>
<span class="n">band</span><span class="p">.</span><span class="n">ReadRaster</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">);</span>
<span class="c1">// Copying the pixels into the C# bitmap</span>
<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">;</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="w"> </span><span class="n">width</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">&lt;</span><span class="n">height</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Color</span><span class="w"> </span><span class="n">newColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">FromArgb</span><span class="p">(</span><span class="n">Convert</span><span class="p">.</span><span class="n">ToInt32</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="n">width</span><span class="p">]),</span><span class="n">Convert</span><span class="p">.</span><span class="n">ToInt32</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="n">width</span><span class="p">]),</span><span class="w"> </span><span class="n">Convert</span><span class="p">.</span><span class="n">ToInt32</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="n">width</span><span class="p">]));</span>
<span class="w">                </span><span class="n">bitmap</span><span class="p">.</span><span class="n">SetPixel</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="n">newColor</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case the interface implementation uses an internally created unmanaged array to transfer the data between the C and C++ part of the code, like:</p>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="n">CPLErr</span><span class="w"> </span><span class="nf">ReadRaster</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">byte</span><span class="p">[]</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">CPLErr</span><span class="w"> </span><span class="n">retval</span><span class="p">;</span>
<span class="w">    </span><span class="n">IntPtr</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Marshal</span><span class="p">.</span><span class="n">AllocHGlobal</span><span class="p">(</span><span class="n">buf_xSize</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">buf_ySize</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Marshal</span><span class="p">.</span><span class="n">SizeOf</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="m">0</span><span class="p">]));</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ReadRaster</span><span class="p">(</span><span class="n">xOff</span><span class="p">,</span><span class="w"> </span><span class="n">yOff</span><span class="p">,</span><span class="w"> </span><span class="n">xSize</span><span class="p">,</span><span class="w"> </span><span class="n">ySize</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">buf_xSize</span><span class="p">,</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">,</span><span class="w"> </span><span class="n">DataType</span><span class="p">.</span><span class="n">GDT_Byte</span><span class="p">,</span><span class="w"> </span><span class="n">pixelSpace</span><span class="p">,</span><span class="w"> </span><span class="n">lineSpace</span><span class="p">);</span>
<span class="w">        </span><span class="n">Marshal</span><span class="p">.</span><span class="n">Copy</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">buf_xSize</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">buf_ySize</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Marshal</span><span class="p">.</span><span class="n">FreeHGlobal</span><span class="p">(</span><span class="n">ptr</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">GC</span><span class="p">.</span><span class="n">KeepAlive</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">retval</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="using-the-direct-read-approach">
<h3>Using the direct read approach<a class="headerlink" href="#using-the-direct-read-approach" title="Link to this heading"></a></h3>
<p>Raster data can be read into the C# bitmap directly using the following approach:</p>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="c1">// Creating a Bitmap to store the GDAL image in</span>
<span class="n">Bitmap</span><span class="w"> </span><span class="n">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Bitmap</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">PixelFormat</span><span class="p">.</span><span class="n">Format8bppIndexed</span><span class="p">);</span>
<span class="c1">// Obtaining the bitmap buffer</span>
<span class="n">BitmapData</span><span class="w"> </span><span class="n">bitmapData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitmap</span><span class="p">.</span><span class="n">LockBits</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">),</span><span class="w"> </span><span class="n">ImageLockMode</span><span class="p">.</span><span class="n">ReadWrite</span><span class="p">,</span><span class="w"> </span><span class="n">PixelFormat</span><span class="p">.</span><span class="n">Format8bppIndexed</span><span class="p">);</span>
<span class="k">try</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">stride</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitmapData</span><span class="p">.</span><span class="n">Stride</span><span class="p">;</span>
<span class="w">    </span><span class="n">IntPtr</span><span class="w"> </span><span class="n">buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitmapData</span><span class="p">.</span><span class="n">Scan0</span><span class="p">;</span>
<span class="w">    </span><span class="n">band</span><span class="p">.</span><span class="n">ReadRaster</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">DataType</span><span class="p">.</span><span class="n">GDT_Byte</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">stride</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">finally</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">bitmap</span><span class="p">.</span><span class="n">UnlockBits</span><span class="p">(</span><span class="n">bitmapData</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This approach is more performant than the previous since there's no need to allocate an intermediary array for transferring the data.</p>
</section>
<section id="using-unsafe-code-and-the-fixed-statement">
<h3>Using /unsafe code and the fixed statement<a class="headerlink" href="#using-unsafe-code-and-the-fixed-statement" title="Link to this heading"></a></h3>
<p>In the previous examples the programmer could ignore bothering with implementing the marshaling code for the raster arrays.
Both of the examples prevent the garbage collector from relocating the array during the execution of the P/Invoke call.
Without using an intermediary array the programmer can also use the following method to read the raster data:</p>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="kt">byte</span><span class="p">[]</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">byte</span><span class="p">[</span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p">];</span>
<span class="k">fixed</span><span class="w"> </span><span class="p">(</span><span class="n">IntPtr</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buffer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="n">band</span><span class="p">.</span><span class="n">ReadRaster</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When using this approach the application must be compiled using the <strong class="program">/unsafe</strong> command line option.</p>
</section>
<section id="using-indexed-grayscale-images">
<h3>Using indexed / grayscale images<a class="headerlink" href="#using-indexed-grayscale-images" title="Link to this heading"></a></h3>
<p>The <code class="file docutils literal notranslate"><span class="pre">PaletteInterp</span></code> enumeration can be used to distinguish between the various type of the image color interpretations.</p>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="n">Band</span><span class="w"> </span><span class="n">band</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataset</span><span class="p">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
<span class="n">ColorTable</span><span class="w"> </span><span class="n">ct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">band</span><span class="p">.</span><span class="n">GetRasterColorTable</span><span class="p">();</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ct</span><span class="p">.</span><span class="n">GetPaletteInterpretation</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">PaletteInterp</span><span class="p">.</span><span class="n">GPI_RGB</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;   This raster band has RGB palette interpretation!&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When reading images with indexed color representations, the programmer might have to do some extra work copying the palette over:</p>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="c1">// Get the GDAL Band objects from the Dataset</span>
<span class="n">Band</span><span class="w"> </span><span class="n">band</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataset</span><span class="p">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
<span class="n">ColorTable</span><span class="w"> </span><span class="n">ct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">band</span><span class="p">.</span><span class="n">GetRasterColorTable</span><span class="p">();</span>
<span class="c1">// Create a Bitmap to store the GDAL image in</span>
<span class="n">Bitmap</span><span class="w"> </span><span class="n">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Bitmap</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">PixelFormat</span><span class="p">.</span><span class="n">Format8bppIndexed</span><span class="p">);</span>
<span class="c1">// Obtaining the bitmap buffer</span>
<span class="n">BitmapData</span><span class="w"> </span><span class="n">bitmapData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitmap</span><span class="p">.</span><span class="n">LockBits</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">),</span><span class="w"> </span><span class="n">ImageLockMode</span><span class="p">.</span><span class="n">ReadWrite</span><span class="p">,</span><span class="w"> </span><span class="n">PixelFormat</span><span class="p">.</span><span class="n">Format8bppIndexed</span><span class="p">);</span>
<span class="k">try</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">iCol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ct</span><span class="p">.</span><span class="n">GetCount</span><span class="p">();</span>
<span class="w">        </span><span class="n">ColorPalette</span><span class="w"> </span><span class="n">pal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitmap</span><span class="p">.</span><span class="n">Palette</span><span class="p">;</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">iCol</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">ColorEntry</span><span class="w"> </span><span class="n">ce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ct</span><span class="p">.</span><span class="n">GetColorEntry</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="w">            </span><span class="n">pal</span><span class="p">.</span><span class="n">Entries</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">FromArgb</span><span class="p">(</span><span class="n">ce</span><span class="p">.</span><span class="n">c4</span><span class="p">,</span><span class="w"> </span><span class="n">ce</span><span class="p">.</span><span class="n">c1</span><span class="p">,</span><span class="w"> </span><span class="n">ce</span><span class="p">.</span><span class="n">c2</span><span class="p">,</span><span class="w"> </span><span class="n">ce</span><span class="p">.</span><span class="n">c3</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">bitmap</span><span class="p">.</span><span class="n">Palette</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pal</span><span class="p">;</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">stride</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitmapData</span><span class="p">.</span><span class="n">Stride</span><span class="p">;</span>
<span class="w">        </span><span class="n">IntPtr</span><span class="w"> </span><span class="n">buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitmapData</span><span class="p">.</span><span class="n">Scan0</span><span class="p">;</span>

<span class="w">        </span><span class="n">band</span><span class="p">.</span><span class="n">ReadRaster</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">DataType</span><span class="p">.</span><span class="n">GDT_Byte</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">stride</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">finally</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">bitmap</span><span class="p">.</span><span class="n">UnlockBits</span><span class="p">(</span><span class="n">bitmapData</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
<p>When reading grayscale images, the programmer should create a sufficient palette for the .NET image.</p>
<div class="highlight-C# notranslate"><div class="highlight"><pre><span></span><span class="c1">// Get the GDAL Band objects from the Dataset</span>
<span class="n">Band</span><span class="w"> </span><span class="n">band</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ds</span><span class="p">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
<span class="c1">// Create a Bitmap to store the GDAL image in</span>
<span class="n">Bitmap</span><span class="w"> </span><span class="n">bitmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Bitmap</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">PixelFormat</span><span class="p">.</span><span class="n">Format8bppIndexed</span><span class="p">);</span>
<span class="c1">// Obtaining the bitmap buffer</span>
<span class="n">BitmapData</span><span class="w"> </span><span class="n">bitmapData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitmap</span><span class="p">.</span><span class="n">LockBits</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">),</span><span class="w"> </span><span class="n">ImageLockMode</span><span class="p">.</span><span class="n">ReadWrite</span><span class="p">,</span><span class="w"> </span><span class="n">PixelFormat</span><span class="p">.</span><span class="n">Format8bppIndexed</span><span class="p">);</span>
<span class="k">try</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">ColorPalette</span><span class="w"> </span><span class="n">pal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitmap</span><span class="p">.</span><span class="n">Palette</span><span class="p">;</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">256</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">            </span><span class="n">pal</span><span class="p">.</span><span class="n">Entries</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">FromArgb</span><span class="p">(</span><span class="w"> </span><span class="m">255</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">bitmap</span><span class="p">.</span><span class="n">Palette</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pal</span><span class="p">;</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">stride</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitmapData</span><span class="p">.</span><span class="n">Stride</span><span class="p">;</span>
<span class="w">        </span><span class="n">IntPtr</span><span class="w"> </span><span class="n">buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitmapData</span><span class="p">.</span><span class="n">Scan0</span><span class="p">;</span>

<span class="w">        </span><span class="n">band</span><span class="p">.</span><span class="n">ReadRaster</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">DataType</span><span class="p">.</span><span class="n">GDT_Byte</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">stride</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">finally</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">bitmap</span><span class="p">.</span><span class="n">UnlockBits</span><span class="p">(</span><span class="n">bitmapData</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="related-c-examples">
<h3>Related C# examples<a class="headerlink" href="#related-c-examples" title="Link to this heading"></a></h3>
<p>The following examples demonstrate the usage of the GDAL raster operations mentioned previously:</p>
<ul class="simple">
<li><p><a href="#id1"><span class="problematic" id="id2">:source_file:`swig/csharp/apps/GDALRead.cs`</span></a></p></li>
<li><p><a href="#id3"><span class="problematic" id="id4">:source_file:`swig/csharp/apps/GDALReadDirect.cs`</span></a></p></li>
<li><p><a href="#id5"><span class="problematic" id="id6">:source_file:`swig/csharp/apps/GDALReadDirect.cs`</span></a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>This document was amended from the previous version at <a class="reference external" href="https://trac.osgeo.org/gdal/wiki/GdalOgrCsharpRaster">https://trac.osgeo.org/gdal/wiki/GdalOgrCsharpRaster</a></p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="csharp_vector.html" class="btn btn-neutral float-right" title="C# Vector and Spatial Reference Interfaces" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="csharp_compile_cmake.html" class="btn btn-neutral float-left" title="Compiling the C# bindings - CMake Scripts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2024 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
  </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>