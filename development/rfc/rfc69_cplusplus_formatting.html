<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RFC 69: C/C++ Code Formatting &mdash; GDAL  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/gdal.css?v=e152ac3b" />

  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="canonical" href="https://gdal.org/development/rfc/rfc69_cplusplus_formatting.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=c033477b"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/translations.js?v=91613774"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="このドキュメントについて" href="../../about.html" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="RFC 70: Guessing output format from output file name extension for utilities" href="rfc70_output_format_guess.html" />
    <link rel="prev" title="RFC 68: C++11 Compilation Mode" href="rfc68_cplusplus11.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/gdalicon.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../download.html">ダウンロード</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programs/index.html">プログラム</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers/raster/index.html">ラスタードライバー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers/vector/index.html">ベクタードライバー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">ユーザー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">チュートリアル</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">開発</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../building_from_source.html">Building GDAL from source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_environment.html">Setting up a development environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_practices.html">Development practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing.html">Automated testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_documentation.html">Building documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cmake.html">Using GDAL in CMake projects</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">RFC list</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="rfc1_pmc.html">RFC 1: Project Management Committee Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc2_svn.html">RFC 2: Migration to OSGeo Subversion Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc3_commiters.html">RFC 3: GDAL Committer Guildlines</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc4_geolocate.html">RFC 4: Geolocation Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc5_unicode.html">RFC 5: Unicode support in GDAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc6_sqlgeom.html">RFC 6: Geometry and Feature Style as OGR Special Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc7_vsilapi.html">RFC 7: Use VSILFILE for VSI*L Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc8_devguide.html">RFC 8: Developer Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc9_maintainer.html">RFC 9: GDAL Paid Maintainer Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc10_ogropen.html">RFC 10: OGR Open Parameters (not implemented)</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc11_fastidentify.html">RFC 11: Fast Format Identification</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc12_filemanagement.html">RFC 12: Improved File Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc13_createfeatures.html">RFC 13: Improved Feature Insertion/Update/Delete Performance in Batch Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc14_imagestructure.html">RFC 14: Image Structure Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc15_nodatabitmask.html">RFC 15: Band Masks</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc16_ogr_reentrancy.html">RFC 16: OGR Thread Safety</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc17_python_namespaces.html">RFC 17: Python Namespaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc18_ogr_styles_c_api.html">RFC 18: OGR Style Support in C API</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc19_safememalloc.html">RFC 19: Safer memory allocation in GDAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc20_srs_axes.html">RFC 20: OGRSpatialReference Axis Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc21_ogrsqlcast.html">RFC 21: OGR SQL type cast and field name alias</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc22_rpc.html">RFC 22: RPC Georeferencing</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc23_ogr_unicode.html">RFC 23.1: Unicode support in OGR</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc24_progressive_data_support.html">RFC 24: GDAL Progressive Data Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc25_fast_open.html">RFC 25: Fast Open (withdrawn)</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc26_blockcache.html">RFC 26: GDAL Block Cache Improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc27_supportdata.html">RFC 27: Improved Supporting Data File Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc28_sqlfunc.html">RFC 28: OGR SQL Generalized Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc29_desired_fields.html">RFC 29: OGR Set Ignored Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc30_utf8_filenames.html">RFC 30: Unicode Filenames</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc31_ogr_64.html">RFC 31: OGR 64bit Integer Fields and FIDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc32_gdallocationinfo.html">RFC 32: gdallocationinfo utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc33_gtiff_pixelispoint.html">RFC 33: GTiff - Fixing PixelIsPoint Interpretation</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc34_license_policy.html">RFC 34: License Policy Enforcement</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc35_deletereorderalterfielddefn.html">RFC 35: Delete, reorder and alter field definitions of OGR layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc36_open_by_drivername.html">RFC 36: Allow specification of intended driver on GDALOpen (withdrawn)</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc37_cplerror_userdata.html">RFC 37: User data callbacks in CPLError</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc38_ogr_faster_open.html">RFC 38: OGR Faster Open (withdrawn)</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc39_ogr_layer_algebra.html">RFC 39: OGR Layer Algebra</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc40_enhanced_rat_support.html">RFC 40: Improving performance of Raster Attribute Table implementation for large tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc41_multiple_geometry_fields.html">RFC 41 : Support for multiple geometry fields in OGR</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc42_find_laundered_fields.html">RFC 42: OGR Layer laundered field lookup</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc43_getmetadatadomainlist.html">RFC 43: GDALMajorObject::GetMetadataDomainList</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc44_gdalinfoxml.html">RFC 44: Add Parseable Output Formats for ogrinfo and gdalinfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc45_virtualmem.html">RFC 45: GDAL datasets and raster bands as virtual memory mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc46_gdal_ogr_unification.html">RFC 46: GDAL/OGR unification</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc47_dataset_caching.html">RFC 47: Per Dataset Caching and GDALRasterBand Multithreading (not implemented)</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc48_geographical_networks_support.html">RFC 48: Geographical networks support</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc49_curve_geometries.html">RFC 49: Curve geometries</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc50_ogr_field_subtype.html">RFC 50: OGR field subtypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc51_rasterio_resampling_progress.html">RFC 51: RasterIO() improvements : resampling and progress callback</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc52_strict_sql_quoting.html">RFC 52: Strict OGR SQL quoting</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc53_ogr_notnull_default.html">RFC 53: OGR not-null constraints and default values</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc54_dataset_transactions.html">RFC 54: Dataset transactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc55_refined_setfeature_deletefeature_semantics.html">RFC 55: Refined SetFeature() and DeleteFeature() semantics</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc56_millisecond_precision.html">RFC 56: OFTTime/OFTDateTime millisecond accuracy</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc57_histogram_64bit_count.html">RFC 57: 64-bit bucket counts for histograms</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc58_removing_dataset_nodata_value.html">RFC 58: Removing Dataset Nodata Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc59.1_utilities_as_a_library.html">RFC 59.1 : GDAL/OGR utilities as a library</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc59_utilities_as_a_library.html">RFC 59 : GDAL/OGR utilities as a library</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc60_improved_roundtripping_in_ogr.html">RFC 60 : Improved round-tripping in OGR</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc61_support_for_measured_geometries.html">RFC 61 : Support for measured geometries</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc62_raster_algebra.html">RFC 62 : Raster algebra</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc63_sparse_datasets_improvements.html">RFC 63 : Sparse datasets improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc64_triangle_polyhedralsurface_tin.html">RFC 64: Triangle, Polyhedral surface and TIN</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc65_rfc7946_geojson.html">RFC 65: RFC 7946 GeoJSON</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc66_randomlayerreadwrite.html">RFC 66 : OGR random layer read/write capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc67_nullfieldvalues.html">RFC 67 : Null values in OGR</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc68_cplusplus11.html">RFC 68: C++11 Compilation Mode</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">RFC 69: C/C++ Code Formatting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#motivation">Motivation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#proposal">Proposal</a></li>
<li class="toctree-l4"><a class="reference internal" href="#code-formatting-rules">Code Formatting Rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#after-big-reformat">After Big Reformat</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#references">References</a></li>
<li class="toctree-l4"><a class="reference internal" href="#voting-history">Voting history</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rfc70_output_format_guess.html">RFC 70: Guessing output format from output file name extension for utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc71_github_migration.html">RFC 71: Migration to GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc72_pytest.html">RFC 72: Update autotest suite to use pytest</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc73_proj6_wkt2_srsbarn.html">RFC 73: Integration of PROJ6 for WKT2, late binding capabilities, time-support and unified CRS database</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc74_sphinx.html">RFC 74: Migrate gdal.org to RTD-style Sphinx infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc75_multidimensional_arrays.html">RFC 75: Multidimensional arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc76_ogrpythondrivers.html">RFC 76: OGR Python drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc77_drop_python2_support.html">RFC 77: Drop Python 2 support in favour of Python 3.6</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc78_gdal_utils_package.html">RFC 78: gdal-utils package</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc79_listing_service_providers.html">RFC 79: Listing of Service Providers on GDAL website</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc80_numfocus_relationship.html">RFC 80: NumFOCUS relationship and sponsorship program</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc81_coordinate_epoch.html">RFC 81: Support for coordinate epochs in geospatial formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc83_use_of_project_sponsorship.html">RFC 83: guidelines for the use of GDAL project sponsorship</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc84_cmake.html">RFC 84: Migrating build systems to CMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc85_policy_code_additions.html">RFC 85: Policy regarding substantial code additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc86_column_oriented_api.html">RFC 86: Column-oriented read API for vector layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc87_signed_int8.html">RFC 87: Signed int8 data type for raster</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc88_googletest.html">RFC 88: Use GoogleTest framework for C/C++ unit tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc89_sql_logging_callback.html">RFC 89: SQL logging callback</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc90_read_compressed_data.html">RFC 90: Direct access to compressed raster data</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc91_dataset_close.html">RFC 91: GDALDataset::Close() method</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc92_wkb_only_geometries.html">RFC 92: WKB Only geometries (on hold)</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc93_update_feature.html">RFC 93: OGRLayer::UpdateFeature() method</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc94_field_precision_width_metadata.html">RFC 94: Numeric fields width/precision metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc95_standard_int_types.html">RFC 95: Use standard C/C++ integer types (proposed, <em>NOT</em> adopted)</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc96_deferred_plugin_loading.html">RFC 96: Deferred C++ plugin loading</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc97_feature_and_fielddefn_sealing.html">RFC 97: OGRFeatureDefn, OGRFieldDefn and OGRGeomFieldDefn &quot;sealing&quot;</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc98_build_requirements_gdal_3_9.html">RFC 98: Build requirements for GDAL 3.9</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc99_geometry_coordinate_precision.html">RFC 99: Geometry coordinate precision</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">コミュニティ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sponsors/index.html">スポンサー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">どのように貢献できますか?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">ライセンス</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html"> GDAL  ドキュメント </a> &raquo;</li>
      
          <li><a href="../index.html">開発</a> &raquo;</li>
      
          <li><a href="index.html">RFC list</a> &raquo;</li>
      
      <li>RFC 69: C/C++ Code Formatting</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit/master/doc/source/development/rfc/rfc69_cplusplus_formatting.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="rfc70_output_format_guess.html" class="btn btn-neutral float-right" title="RFC 70: Guessing output format from output file name extension for utilities" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rfc68_cplusplus11.html" class="btn btn-neutral float-left" title="RFC 68: C++11 Compilation Mode" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rfc-69-c-c-code-formatting">
<span id="rfc-69"></span><h1>RFC 69: C/C++ Code Formatting<a class="headerlink" href="#rfc-69-c-c-code-formatting" title="Link to this heading"></a></h1>
<p>This document proposes and describes desired code formatting style used
across C and C++ source code in GDAL.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Author:</p></td>
<td><p>Kurt Schwehr</p></td>
</tr>
<tr class="row-even"><td><p>Contact:</p></td>
<td><p><a class="reference external" href="mailto:schwehr&#37;&#52;&#48;google&#46;com">schwehr<span>&#64;</span>google<span>&#46;</span>com</a> / <a class="reference external" href="mailto:schwehr&#37;&#52;&#48;gmail&#46;com">schwehr<span>&#64;</span>gmail<span>&#46;</span>com</a></p></td>
</tr>
<tr class="row-odd"><td><p>Co-Author:</p></td>
<td><p>Alessandro Pasotti</p></td>
</tr>
<tr class="row-even"><td><p>Contact:</p></td>
<td><p><a class="reference external" href="mailto:elpaso&#37;&#52;&#48;itopen&#46;it">elpaso<span>&#64;</span>itopen<span>&#46;</span>it</a></p></td>
</tr>
<tr class="row-odd"><td><p>Started:</p></td>
<td><p>2017-May-04</p></td>
</tr>
<tr class="row-even"><td><p>Status:</p></td>
<td><p>Adpoted, implemented</p></td>
</tr>
</tbody>
</table>
<p>This RFC is based on <a class="reference external" href="https://trac.osgeo.org/geos/wiki/RFC4">GEOS RFC
4</a> by Mateusz Łoskot.</p>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h2>
<p>The document proposes and describes desired default code formatting
style guidelines for GDAL programming in C and C++ languages.</p>
<p>The goal of this document is to initiate process to reach an agreement
for the default code formatting style.</p>
</section>
<section id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Link to this heading"></a></h2>
<p>There is a need to decide on format of GDAL source code and apply such
globally consistent format to GDAL C/C++ codebase.</p>
<p>A uniform, codebase-wide formatting style makes reading and
comprehending existing code easier, writing code focused on important
aspects of new developments and more pleasant, removes burden during a
patch or pull request code reviews and prevents <a class="reference external" href="http://wiki.c2.com/?WhereDoTheBracesGo">bikeshedding religious
arguments</a>. Even in small
projects, contributing developers discover the problems of working
without an agreed upon code format.</p>
<p>The utility of such guidelines has been proven by many open source
software projects.</p>
<p>The scope of the proposal is specifically limited to formatting style
guidelines. It is not an intention to develop a general coding guide
covering other aspects of writing software like naming, etc.</p>
</section>
<section id="proposal">
<h2>Proposal<a class="headerlink" href="#proposal" title="Link to this heading"></a></h2>
<p>It is important to make effortless for developers to produce properly
formatted code.</p>
<p>The proposal suggests to use
<a class="reference external" href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a> version
3.8 or higher to define C++ code formatting rules for GDAL code.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> is a tool to automatically format C/C++ code, so
that developers don't need to worry about style issues. Unlike other
tools which use own parsers, <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> uses the Clang tokenizer
and supports the same C++ source code as the Clang compiler. This
guarantees correct output is produced and offers unique features (eg.
wrapping long lines whether of code, strings, arrays - something which
AStyle has no way of doing).</p>
<p>The style settings can be defined in a <code class="docutils literal notranslate"><span class="pre">.clang-format</span></code> configuration
file, however to make it as easy as possible, we will use the default
style (LLVM style?).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> is straightforward to run and can support
development workflow as standalone tool or as one of many editor
integrations or other bespoke utilities (eg. <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">cl</span> <span class="pre">format</span></code>
[Chromium]).</p>
<p>A new pre-commit hook will be added to the current configuration in
<code class="docutils literal notranslate"><span class="pre">.pre-commit-config.yaml</span></code> to run [clang-format pre-commit].</p>
<p>To enforce the code formatting, a gatekeeper will be installed in CI,
rejecting commits with code not conforming to the code formatting style
and a brief textual hint to install or update the pre-commit hooks
will be added to failure message.</p>
</section>
<section id="code-formatting-rules">
<h2>Code Formatting Rules<a class="headerlink" href="#code-formatting-rules" title="Link to this heading"></a></h2>
<p>What code formatting rules to use?</p>
<p><em>&quot;A mature engineers know that a standard is more important than which
standard.&quot;</em> ~[MongoDB]</p>
<p><code class="docutils literal notranslate"><span class="pre">clang-format</span></code> offers several defaults (eg. LLVM, Mozilla, Linux,
Google C++ Style).</p>
<p>The proposal recommends to use one of the base styles without any
modification. It is possible to fine-tune the configuration, but this
RFC aims for simplicity.</p>
<p>The reasons are two-fold:</p>
<ul class="simple">
<li><p>make GDAL code unified with the wide spectrum of well-established
C/C++ projects</p></li>
<li><p>long arguments and religious wars prevention.</p></li>
</ul>
<section id="clang-format">
<h3><code class="docutils literal notranslate"><span class="pre">.clang-format</span></code><a class="headerlink" href="#clang-format" title="Link to this heading"></a></h3>
<p>The hope is to avoid requiring a .clang-format file in the code base.</p>
</section>
<section id="editorconfig">
<h3><code class="docutils literal notranslate"><span class="pre">.editorconfig</span></code><a class="headerlink" href="#editorconfig" title="Link to this heading"></a></h3>
<p><a class="reference external" href="http://editorconfig.org/">EditorConfig</a> is currently in use and
<code class="docutils literal notranslate"><span class="pre">.editorconfig</span></code> file is provided to automatically tell popular code
editors about the basic style settings like indentation, whitespaces and
end-of-line markers for distinguished types of plain text files.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.editorconfig</span></code> file will have to be updated to match the chosen
<code class="docutils literal notranslate"><span class="pre">.clang-format</span></code> settings if they are required.</p>
</section>
<section id="eol">
<h3>EOL<a class="headerlink" href="#eol" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">clang-format</span></code> does not enforce line endings.</p>
<p>The EOL marker is considered to be <a class="reference external" href="http://lists.llvm.org/pipermail/cfe-commits/Week-of-Mon-20130930/090200.html">a part of a file encoding
decision</a>
and not part of any coding style.</p>
<p>The EOL marker can be enforced as project-wide setting controlled with
<code class="docutils literal notranslate"><span class="pre">.gitattributes</span></code> and <code class="docutils literal notranslate"><span class="pre">.editorconfig</span></code>.</p>
<p>However, it shall still be left as configurable setting in developer's
environment of choice (eg. <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span></code>) independently from the
project-wide setting.</p>
</section>
<section id="big-reformat">
<h3>Big Reformat<a class="headerlink" href="#big-reformat" title="Link to this heading"></a></h3>
<p>What to do about the existing code?</p>
<p>The proposal recommends to just do one big reformat of the codebase.</p>
<p>While it may seem causing clutter in the repository log (eg.
<code class="docutils literal notranslate"><span class="pre">svn</span> <span class="pre">blame</span></code>), if it occurs infrequently (eg. yearly) and is applied to
the entire codebase at that time, it should not be very disruptive to
the source code history. One way to cope with skewed history is to use
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">blame</span> <span class="pre">-w</span></code> which ignores whitespace when comparing commits.</p>
<p>Partial application of the code formatting rules would create more work
without delivering the full benefit [MongoDB] leading to codebase with
different styles mixed.</p>
<p>To skip the &quot;big reformat&quot; commit from <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">blame</span></code>, git offers a mechanism
to [git_blame_ignore] , a pre-configured ignore file <code class="docutils literal notranslate"><span class="pre">.git-blame-ignore-revs</span></code>
will be provided in the source tree with the &quot;big reformat&quot; commit
hash in it.</p>
<p>The ignore file can be specified on the command line with
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">blame</span> <span class="pre">--ignore-revs-file</span> <span class="pre">.git-blame-ignore-revs</span></code> or it can be set
permanently with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">blame.ignoreRevsFile</span> <span class="pre">.git-blame-ignore-revs</span></code>.</p>
<p>The a.m. instructions will be added to the <a class="reference external" href="https://gdal.org/development/dev_practices.html">developers documentation</a>.</p>
<section id="branches">
<h4>Branches<a class="headerlink" href="#branches" title="Link to this heading"></a></h4>
<p>Branches to run the big reformat in are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">master</span></code></p></li>
<li><p>current stable version (to make backports easier)</p></li>
</ul>
</section>
</section>
</section>
<section id="after-big-reformat">
<h2>After Big Reformat<a class="headerlink" href="#after-big-reformat" title="Link to this heading"></a></h2>
<p>The pre-commit hook will automatically take care of formatting
the code before every commit, the CI test will reject not formatted
code.</p>
<p><em>&quot;After all, every moment of time wasted on code formatting or
discussion thereof is eliminated.&quot;</em> ~[MongoDB]</p>
</section>
<section id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>add clang-format to pre-commit configuration file</p></li>
<li><p>Set up GitHub workflow [clang-format-check]</p></li>
</ol>
<p>A draft of the implementation is available at <a class="reference external" href="https://github.com/elpaso/gdal/tree/rfc69_cplusplus_formatting_revival">this branch</a>.</p>
<p>The relevant files are:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/elpaso/gdal/blob/rfc69_cplusplus_formatting_revival/.pre-commit-config.yaml#L30">pre-commit</a></p></li>
<li><p><a class="reference external" href="https://github.com/elpaso/gdal/blob/rfc69_cplusplus_formatting_revival/.clang-format">.clang-format style</a></p></li>
<li><p><a class="reference external" href="https://github.com/elpaso/gdal/blob/rfc69_cplusplus_formatting_revival/.github/workflows/clang-format-check.yml">GH workflow</a></p></li>
<li><p><a class="reference external" href="https://github.com/elpaso/gdal/blob/rfc69_cplusplus_formatting_revival/scripts/clang-format.sh">clang-format script</a></p></li>
</ul>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>[clang-format pre-commit] <a class="reference external" href="https://github.com/pre-commit/mirrors-clang-format">Clang-Format Pre-Commit</a></p></li>
<li><p>[clang-format-check] <a class="reference external" href="https://github.com/marketplace/actions/clang-format-check">Clang-Format Check Workflow</a></p></li>
<li><p>[MongoDB] Succeeding With ClangFormat: <a class="reference external" href="https://engineering.mongodb.com/post/succeeding-with-clangformat-part-1-pitfalls-and-planning/">Part
1</a>,
<a class="reference external" href="https://engineering.mongodb.com/post/succeeding-with-clangformat-part-2-the-big-reformat/">Part
2</a>,
<a class="reference external" href="https://engineering.mongodb.com/post/succeeding-with-clangformat-part-3-persisting-the-change/">Part
3</a></p></li>
<li><p>[Chromium] <a class="reference external" href="https://chromium.googlesource.com/chromium/src/+/master/docs/clang_format.md">Using clang-format on Chromium C++
Code</a></p></li>
<li><p><a class="reference external" href="https://clangformat.com">https://clangformat.com</a> -
<code class="docutils literal notranslate"><span class="pre">clang-format</span></code> interactive guide and builder</p></li>
<li><p><a class="reference external" href="https://zed0.co.uk/clang-format-configurator/">https://zed0.co.uk/clang-format-configurator/</a></p></li>
<li><p><a class="reference external" href="https://trac.osgeo.org/geos/wiki/RFC4">https://trac.osgeo.org/geos/wiki/RFC4</a></p></li>
<li><p>[git_blame_ignore] <cite>Ignore Commits in Blame View</cite> &lt;Git <a class="reference external" href="https://docs.github.com/en/repositories/working-with-files/using-files/viewing-a-file#ignore-commits-in-the-blame-view">https://docs.github.com/en/repositories/working-with-files/using-files/viewing-a-file#ignore-commits-in-the-blame-view</a>&gt;`__</p></li>
</ul>
</section>
<section id="voting-history">
<h2>Voting history<a class="headerlink" href="#voting-history" title="Link to this heading"></a></h2>
<p>+1 from PSC members KurtS and EvenR</p>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rfc70_output_format_guess.html" class="btn btn-neutral float-right" title="RFC 70: Guessing output format from output file name extension for utilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rfc68_cplusplus11.html" class="btn btn-neutral float-left" title="RFC 68: C++11 Compilation Mode" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2024 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
  </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>