<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GPKG -- GeoPackage vector &mdash; GDAL  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/gdal.css?v=e152ac3b" />

  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="canonical" href="https://gdal.org/drivers/vector/gpkg.html"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=c033477b"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/translations.js?v=4dbe4bdc"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="このドキュメントについて" href="../../about.html" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="GeoPackage aspatial extension" href="geopackage_aspatial.html" />
    <link rel="prev" title="GMT ASCII Vectors (.gmt)" href="gmt.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/gdalicon.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../download.html">ダウンロード</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programs/index.html">プログラム</a></li>
<li class="toctree-l1"><a class="reference internal" href="../raster/index.html">ラスタードライバー</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ベクタードライバー</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="amigocloud.html">AmigoCloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="arrow.html">(Geo)Arrow IPC File Format / Stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="avcbin.html">Arc/Info Binary Coverage</a></li>
<li class="toctree-l2"><a class="reference internal" href="avce00.html">Arc/Info E00 (ASCII) Coverage</a></li>
<li class="toctree-l2"><a class="reference internal" href="cad.html">CAD -- AutoCAD DWG</a></li>
<li class="toctree-l2"><a class="reference internal" href="carto.html">Carto</a></li>
<li class="toctree-l2"><a class="reference internal" href="csv.html">Comma Separated Value (.csv)</a></li>
<li class="toctree-l2"><a class="reference internal" href="csw.html">CSW - OGC CSW (Catalog Service for the Web)</a></li>
<li class="toctree-l2"><a class="reference internal" href="dgn.html">Microstation DGN</a></li>
<li class="toctree-l2"><a class="reference internal" href="dgnv8.html">Microstation DGN v8</a></li>
<li class="toctree-l2"><a class="reference internal" href="dwg.html">AutoCAD DWG</a></li>
<li class="toctree-l2"><a class="reference internal" href="dxf.html">AutoCAD DXF</a></li>
<li class="toctree-l2"><a class="reference internal" href="eeda.html">Google Earth Engine Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="edigeo.html">EDIGEO</a></li>
<li class="toctree-l2"><a class="reference internal" href="elasticsearch.html">Elasticsearch: Geographically Encoded Objects for Elasticsearch</a></li>
<li class="toctree-l2"><a class="reference internal" href="esrijson.html">ESRIJSON / FeatureService driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="filegdb.html">ESRI File Geodatabase (FileGDB)</a></li>
<li class="toctree-l2"><a class="reference internal" href="flatgeobuf.html">FlatGeobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="geoconcept.html">GeoConcept text export</a></li>
<li class="toctree-l2"><a class="reference internal" href="geojson.html">GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="geojsonseq.html">GeoJSONSeq: sequence of GeoJSON features</a></li>
<li class="toctree-l2"><a class="reference internal" href="georss.html">GeoRSS : Geographically Encoded Objects for RSS feeds</a></li>
<li class="toctree-l2"><a class="reference internal" href="gml.html">GML - Geography Markup Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="gmlas.html">GMLAS - Geography Markup Language (GML) driven by application schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="gmt.html">GMT ASCII Vectors (.gmt)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">GPKG -- GeoPackage vector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#driver-capabilities">Driver capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#specification-version">Specification version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#limitations">Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sql">SQL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sql-functions">SQL functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#link-with-spatialite">Link with Spatialite</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#transaction-support">Transaction support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#relationships">Relationships</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dataset-open-options">Dataset open options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creation-issues">Creation issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dataset-creation-options">Dataset creation options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#layer-creation-options">Layer creation options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-options">Configuration options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metadata">Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#non-spatial-tables">Non-spatial tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spatial-views">Spatial views</a></li>
<li class="toctree-l3"><a class="reference internal" href="#coordinate-reference-systems">Coordinate Reference Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="#level-of-support-of-geopackage-extensions">Level of support of GeoPackage Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compressed-files">Compressed files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#geometry-coordinate-precision">Geometry coordinate precision</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-hints">Performance hints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#see-also">See Also</a><ul>
<li class="toctree-l4"><a class="reference internal" href="geopackage_aspatial.html">GeoPackage aspatial extension</a></li>
<li class="toctree-l4"><a class="reference internal" href="gpkg_spatialite_computed_geom_column.html">GeoPackage Spatialite computed geometry column extension</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gpsbabel.html">GPSBabel</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpx.html">GPX - GPS Exchange Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="grass.html">GRASS Vector Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="gtfs.html">GTFS - General Transit Feed Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="hana.html">SAP HANA</a></li>
<li class="toctree-l2"><a class="reference internal" href="idb.html">IDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="idrisi.html">Idrisi Vector (.VCT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ili.html">&quot;INTERLIS 1&quot; and &quot;INTERLIS 2&quot; drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="jml.html">JML: OpenJUMP JML format</a></li>
<li class="toctree-l2"><a class="reference internal" href="jsonfg.html">JSONFG -- OGC Features and Geometries JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="kml.html">KML - Keyhole Markup Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="libkml.html">LIBKML Driver (.kml .kmz)</a></li>
<li class="toctree-l2"><a class="reference internal" href="lvbag.html">Dutch Kadaster LV BAG 2.0 Extract</a></li>
<li class="toctree-l2"><a class="reference internal" href="mapml.html">MapML</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html">Memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="miramon.html">MiraMon Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="mitab.html">MapInfo TAB and MIF/MID</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodbv3.html">MongoDBv3</a></li>
<li class="toctree-l2"><a class="reference internal" href="mssqlspatial.html">MSSQLSpatial - Microsoft SQL Server Spatial Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="mvt.html">MVT: Mapbox Vector Tiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="mysql.html">MySQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="nas.html">NAS - ALKIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="netcdf.html">NetCDF: Network Common Data Form - Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="ngw.html">NGW -- NextGIS Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="ntf.html">UK .NTF</a></li>
<li class="toctree-l2"><a class="reference internal" href="oapif.html">OGC API - Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="oci.html">Oracle Spatial</a></li>
<li class="toctree-l2"><a class="reference internal" href="odbc.html">ODBC RDBMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="ods.html">ODS - Open Document Spreadsheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="ogdi.html">OGDI Vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="openfilegdb.html">ESRI File Geodatabase vector (OpenFileGDB)</a></li>
<li class="toctree-l2"><a class="reference internal" href="osm.html">OSM - OpenStreetMap XML and PBF</a></li>
<li class="toctree-l2"><a class="reference internal" href="parquet.html">(Geo)Parquet</a></li>
<li class="toctree-l2"><a class="reference internal" href="pdf.html">PDF -- Geospatial PDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="pds.html">PDS - Planetary Data Systems TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="pgdump.html">PostgreSQL SQL Dump</a></li>
<li class="toctree-l2"><a class="reference internal" href="pgeo.html">ESRI Personal GeoDatabase</a></li>
<li class="toctree-l2"><a class="reference internal" href="pg.html">PostgreSQL / PostGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="plscenes.html">PLScenes (Planet Labs Scenes/Catalog API)</a></li>
<li class="toctree-l2"><a class="reference internal" href="pmtiles.html">PMTiles -- ProtoMaps Tiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="s57.html">IHO S-57 (ENC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="sdts.html">SDTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="selafin.html">Selafin files</a></li>
<li class="toctree-l2"><a class="reference internal" href="shapefile.html">ESRI Shapefile / DBF</a></li>
<li class="toctree-l2"><a class="reference internal" href="sosi.html">Norwegian SOSI Standard</a></li>
<li class="toctree-l2"><a class="reference internal" href="sqlite.html">SQLite / Spatialite RDBMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="svg.html">SVG - Scalable Vector Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="sxf.html">Storage and eXchange Format - SXF</a></li>
<li class="toctree-l2"><a class="reference internal" href="tiger.html">U.S. Census TIGER/Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="tiledb.html">TileDB -- TileDB vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="topojson.html">TopoJSON driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="vdv.html">VDV - VDV-451/VDV-452/INTREST Data Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="vfk.html">VFK - Czech Cadastral Exchange Data Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="vrt.html">VRT -- Virtual Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="wasp.html">WAsP - WAsP .map format</a></li>
<li class="toctree-l2"><a class="reference internal" href="wfs.html">WFS - OGC WFS service</a></li>
<li class="toctree-l2"><a class="reference internal" href="xls.html">XLS - MS Excel format</a></li>
<li class="toctree-l2"><a class="reference internal" href="xlsx.html">XLSX - MS Office Open XML spreadsheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="xodr.html">XODR -- OpenDRIVE Road Description Format</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">ユーザー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">チュートリアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">開発</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">コミュニティ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sponsors/index.html">スポンサー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">どのように貢献できますか?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">ライセンス</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html"> GDAL  ドキュメント </a> &raquo;</li>
      
          <li><a href="index.html">ベクタードライバー</a> &raquo;</li>
      
      <li>GPKG -- GeoPackage vector</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit/master/doc/source/drivers/vector/gpkg.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="geopackage_aspatial.html" class="btn btn-neutral float-right" title="GeoPackage aspatial extension" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gmt.html" class="btn btn-neutral float-left" title="GMT ASCII Vectors (.gmt)" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gpkg-geopackage-vector">
<span id="vector-gpkg"></span><h1>GPKG -- GeoPackage vector<a class="headerlink" href="#gpkg-geopackage-vector" title="Link to this heading"></a></h1>
<div class="admonition shortname" id="shortname-0">
<p class="admonition-title">Driver short name</p>
<p>GPKG</p>
</div>
<div class="admonition build_dependencies" id="build_dependencies-0">
<p class="admonition-title">Build dependencies</p>
<p>libsqlite3</p>
</div>
<p>This driver implements support for access to spatial tables in the <a class="reference external" href="http://www.opengeospatial.org/standards/geopackage">OGC
GeoPackage format
standard</a> The
GeoPackage standard uses a SQLite database file as a generic container,
and the standard defines:</p>
<ul class="simple">
<li><p>Expected metadata tables (<code class="docutils literal notranslate"><span class="pre">gpkg_contents</span></code>,
<code class="docutils literal notranslate"><span class="pre">gpkg_spatial_ref_sys</span></code>, <code class="docutils literal notranslate"><span class="pre">gpkg_geometry_columns</span></code>)</p></li>
<li><p>Binary format encoding for geometries in spatial tables (basically a
GPKG standard header object followed by ISO standard well-known
binary (WKB))</p></li>
<li><p>Naming and conventions for extensions (extended feature types) and
indexes (how to use SQLite r-tree in an interoperable manner)</p></li>
</ul>
<p>This driver reads and writes SQLite files from the file system, so it
must be run by a user with read/write access to the files it is working
with.</p>
<p>The driver also supports reading and writing the
following non-linear geometry types: CIRCULARSTRING, COMPOUNDCURVE,
CURVEPOLYGON, MULTICURVE and MULTISURFACE</p>
<p>GeoPackage raster/tiles are supported. See the
<a class="reference internal" href="../raster/gpkg.html#raster-gpkg"><span class="std std-ref">GeoPackage raster</span></a> documentation page.</p>
<section id="driver-capabilities">
<h2>Driver capabilities<a class="headerlink" href="#driver-capabilities" title="Link to this heading"></a></h2>
<div class="admonition supports_create" id="supports_create-0">
<p class="admonition-title">Supports Create()</p>
<p>This driver supports the <a class="reference internal" href="../../api/gdaldriver_cpp.html#_CPPv4N10GDALDriver6CreateEPKciii12GDALDataType12CSLConstList" title="GDALDriver::Create"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALDriver::Create()</span></code></a> operation</p>
</div>
<div class="admonition supports_georeferencing" id="supports_georeferencing-0">
<p class="admonition-title">Supports Georeferencing</p>
<p>This driver supports georeferencing</p>
</div>
<div class="admonition supports_virtualio" id="supports_virtualio-0">
<p class="admonition-title">Supports VirtualIO</p>
<p>This driver supports <a class="reference internal" href="../../user/virtual_file_systems.html#virtual-file-systems"><span class="std std-ref">virtual I/O operations (/vsimem/, etc.)</span></a></p>
</div>
</section>
<section id="specification-version">
<h2>Specification version<a class="headerlink" href="#specification-version" title="Link to this heading"></a></h2>
<p>Starting with GDAL 2.2, the driver is able to create GeoPackage
databases following the 1.0/1.0.1, 1.1 or 1.2 versions. For GDAL 2.2, it
will automatically adjust to the minimum version required for the
features of GeoPackage used. For GDAL 2.3 or later, it will default to
1.2. Explicit version choice can be done by specifying the VERSION
dataset creation option.</p>
</section>
<section id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>GeoPackage only supports one geometry column per table.</p></li>
</ul>
</section>
<section id="sql">
<h2>SQL<a class="headerlink" href="#sql" title="Link to this heading"></a></h2>
<p>The driver supports OGR attribute filters, and users are expected to
provide filters in the SQLite dialect, as they will be executed directly
against the database.</p>
<p>SQL SELECT statements passed to ExecuteSQL() are
also executed directly against the database. If Spatialite is used, a
recent version (4.2.0) is needed and use of explicit cast operators
AsGPB() is required to transform GeoPackage geometries to Spatialite
geometries (the reverse conversion from Spatialite geometries is
automatically done by the GPKG driver). It is also possible to use with
any Spatialite version, but in a slower way, by specifying the
&quot;INDIRECT_SQLITE&quot; dialect. In which case, GeoPackage geometries
automatically appear as Spatialite geometries after translation by OGR.</p>
<p>Starting with GDAL 2.2, the &quot;DROP TABLE layer_name&quot; and &quot;ALTER TABLE
layer_name RENAME TO new_layer&quot; statements can be used. They will update
GeoPackage system tables.</p>
<p>Starting with GDAL 2.2, the
&quot;HasSpatialIndex('table_name','geom_col_name')&quot; statement can be used
for checking if the table has spatial index on the named geometry
column.</p>
<p>When dropping a table, or removing records from tables, the space they
occupied is not immediately released and kept in the pool of file pages
that SQLite may reuse later. If you need to shrink the file to its
minimum size, you need to issue an explicit &quot;VACUUM&quot; SQL request. Note
that this will result in a full rewrite of the file.</p>
<section id="sql-functions">
<h3>SQL functions<a class="headerlink" href="#sql-functions" title="Link to this heading"></a></h3>
<p>The following SQL functions, from the GeoPackage specification, are available:</p>
<ul class="simple">
<li><p>ST_MinX(geom <em>Geometry</em>): returns the minimum X coordinate of the
geometry</p></li>
<li><p>ST_MinY(geom <em>Geometry</em>): returns the minimum Y coordinate of the
geometry</p></li>
<li><p>ST_MaxX(geom <em>Geometry</em>): returns the maximum X coordinate of the
geometry</p></li>
<li><p>ST_MaxY(geom <em>Geometry</em>): returns the maximum Y coordinate of the
geometry</p></li>
<li><p>ST_IsEmpty(geom <em>Geometry</em>): returns 1 if the geometry is empty (but
not null), e.g. a POINT EMPTY geometry</p></li>
<li><p>ST_GeometryType(geom <em>Geometry</em>): returns the geometry type:
'POINT', 'LINESTRING', 'POLYGON', 'MULTIPOLYGON', 'MULTILINESTRING',
'MULTIPOINT', 'GEOMETRYCOLLECTION'</p></li>
<li><p>ST_SRID(geom <em>Geometry</em>): returns the SRID of the geometry</p></li>
<li><p>GPKG_IsAssignable(expected_geom_type <em>String</em>, actual_geom_type
<em>String</em>) : mainly, needed for the 'Geometry Type Triggers Extension'</p></li>
</ul>
<p>The following functions, with identical syntax and semantics as in
Spatialite, are also available :</p>
<ul class="simple">
<li><p>CreateSpatialIndex(table_name <em>String</em>, geom_column_name <em>String</em>):
creates a spatial index (RTree) on the specified table/geometry
column</p></li>
<li><p>DisableSpatialIndex(table_name <em>String</em>, geom_column_name <em>String</em>):
drops an existing spatial index (RTree) on the specified
table/geometry column</p></li>
<li><p>ST_Area(geom <em>Geometry</em>): compute the area in square units of the geometry SRS.</p></li>
<li><p>ST_Area(geom <em>Geometry</em>, use_ellipsoid <em>boolean</em>): (GDAL &gt;= 3.9): compute
the area in square meters, considering the geometry on the ellipsoid
(use_ellipsoid must be set to true/1).</p></li>
<li><p>SetSRID(geom <em>Geometry</em>, srs_id <em>Integer</em>): overrides the geometry' SRS ID,
without reprojection.</p></li>
<li><p>ST_Transform(geom <em>Geometry</em>, target_srs_id <em>Integer</em>): reproject the geometry
to the SRS of specified srs_id. If no SRS with that given srs_id is not found
in gpkg_spatial_ref_sys, starting with GDAL 3.2, it will be interpreted as
a EPSG code.</p></li>
<li><p>ST_EnvIntersects(geom <em>Geometry</em>, minx <em>Double</em>, miny <em>Double</em>, maxx <em>Double</em>, maxy <em>Double</em>):
(GDAL &gt;= 3.7) Returns 1 if the minimum bounding box of geom intersects the
bounding box defined by (minx,miny)-(maxx,maxy), or 0 otherwise.</p></li>
<li><p>ST_EnvIntersects(geom1 <em>Geometry</em>, geom2 <em>Geometry</em>):
(GDAL &gt;= 3.7) Returns 1 if the minimum bounding box of geom1 intersects the
one of geom2, or 0 otherwise. (Note: this function, as all others, does not
automatically uses spatial indices)</p></li>
</ul>
<p>The raster SQL functions mentioned at <a class="reference internal" href="../raster/gpkg.html#raster-gpkg-raster"><span class="std std-ref">Raster SQL functions</span></a>
are also available.</p>
</section>
<section id="link-with-spatialite">
<h3>Link with Spatialite<a class="headerlink" href="#link-with-spatialite" title="Link to this heading"></a></h3>
<p>If it has been compiled against Spatialite 4.2
or later, it is also possible to use Spatialite SQL functions. Explicit
transformation from GPKG geometry binary encoding to Spatialite geometry
binary encoding must be done.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="n">poly</span><span class="o">.</span><span class="n">gpkg</span> <span class="o">-</span><span class="n">sql</span> <span class="s2">&quot;SELECT ST_Buffer(CastAutomagic(geom),5) FROM poly&quot;</span>
</pre></div>
</div>
<p>Starting with Spatialite 4.3, CastAutomagic is no longer needed.</p>
<p>Note that due to the loose typing mechanism of SQLite, if a geometry expression
returns a NULL value for the first row, this will generally cause OGR not to
recognize the column as a geometry column. It might be then useful to sort
the results by making sure that non-null geometries are returned first:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="n">poly</span><span class="o">.</span><span class="n">gpkg</span> <span class="o">-</span><span class="n">sql</span> <span class="s2">&quot;SELECT * FROM (SELECT ST_Buffer(geom,5) AS geom, * FROM poly) ORDER BY geom IS NULL ASC&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="transaction-support">
<h2>Transaction support<a class="headerlink" href="#transaction-support" title="Link to this heading"></a></h2>
<p>The driver implements transactions at the database level, per <a class="reference internal" href="../../development/rfc/rfc54_dataset_transactions.html#rfc-54"><span class="std std-ref">RFC 54: Dataset transactions</span></a></p>
</section>
<section id="relationships">
<h2>Relationships<a class="headerlink" href="#relationships" title="Link to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.6.</span></p>
</div>
<p>Many-to-many relationship retrieval is supported, respecting the OGC GeoPackage Related Tables Extension.
One-to-many relationships will also be reported for tables which utilize FOREIGN KEY constraints.</p>
<p>Relationship creation, deletion and updating is supported since GDAL 3.7. Relationships can
only be updated to change their base or related table fields, or the relationship related
table type. It is not permissible to change the base or related table itself, or the mapping
table details. If this is desired then a new relationship should be created instead.</p>
<p>Note that when a many-to-many relationship is created in a GeoPackage, GDAL will always
insert the mapping table into the gpkg_contents table. Formally this is not required
by the Related Tables Extension (instead, the table should only be listed in gpkgext_relations),
however failing to list the mapping table in gpkg_contents prevents it from being usable
in some other applications (e.g. ESRI software).</p>
</section>
<section id="dataset-open-options">
<h2>Dataset open options<a class="headerlink" href="#dataset-open-options" title="Link to this heading"></a></h2>
<p>Open options can be specified in command-line tools using the syntax <code class="docutils literal notranslate"><span class="pre">-oo</span> <span class="pre">&lt;NAME&gt;=&lt;VALUE&gt;</span></code> or by providing the appropriate arguments to <a class="reference internal" href="../../api/raster_c_api.html#_CPPv410GDALOpenExPKcjPPCKcPPCKcPPCKc" title="GDALOpenEx"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALOpenEx()</span></code></a> (C) or <a class="reference internal" href="../../api/python/raster_api.html#osgeo.gdal.OpenEx" title="osgeo.gdal.OpenEx"><code class="xref py py-meth docutils literal notranslate"><span class="pre">gdal.OpenEx</span></code></a> (Python).
The following open options are available:</p>
<ul class="simple">
<li><p id="drivers/vector/gpkg-oo-LIST_ALL_TABLES"><strong>LIST_ALL_TABLES=[AUTO/YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">AUTO</span></code>. Whether all tables,
including those not listed in gpkg_contents, should be listed.
If AUTO, all tables including those not listed in
gpkg_contents will be listed, except if the aspatial extension is
found or a table is registered as 'attributes' in gpkg_contents. If
YES, all tables including those not listed in gpkg_contents will be
listed, in all cases. If NO, only tables registered as 'features',
'attributes' or 'aspatial' will be listed.</p>
</li>
<li><p id="drivers/vector/gpkg-oo-PRELUDE_STATEMENTS"><strong>PRELUDE_STATEMENTS=value: </strong> (GDAL &gt;= 3.2) SQL statement(s) to
send on the SQLite3 connection before any other ones. In
case of several statements, they must be separated with the
semi-column (;) sign. This option may be useful to
<a class="reference external" href="https://www.sqlite.org/lang_attach.html">attach another database</a>
to the current one and issue cross-database requests.<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>The attached database must be a GeoPackage one too, so
that its geometry blobs are properly recognized (so typically not a Spatialite one)</p>
</div>
</p>
</li>
<li><p id="drivers/vector/gpkg-oo-NOLOCK"><strong>NOLOCK=[YES/NO]: </strong> (GDAL &gt;= 3.4.2)  Defaults to <code class="docutils literal notranslate"><span class="pre">NO</span></code>. Whether the database should be used without doing any file locking. Setting
it to YES will only be honoured when opening in read-only mode and if the
journal mode is not WAL.
This corresponds to the nolock=1 query parameter described at
<a class="reference external" href="https://www.sqlite.org/uri.html">https://www.sqlite.org/uri.html</a></p>
</li>
<li><p id="drivers/vector/gpkg-oo-IMMUTABLE"><strong>IMMUTABLE=[YES/NO]: </strong> (GDAL &gt;= 3.5.3) Whether the database should be opened by assuming that the file cannot be
modified by another process. This will skip any checks for change detection.
This can be useful for WAL enabled files on read-only storage.
GDAL will automatically try to turn it on when not being able to open
in read-only mode a WAL enabled file.
This corresponds to the immutable=1 query parameter described at
<a class="reference external" href="https://www.sqlite.org/uri.html">https://www.sqlite.org/uri.html</a></p>
</li>
</ul>
<p>Note: open options are typically specified with &quot;-oo name=value&quot; syntax
in most OGR utilities, or with the <code class="docutils literal notranslate"><span class="pre">GDALOpenEx()</span></code> API call.</p>
<p>Note: configuration option <a class="reference internal" href="sqlite.html#config-OGR_SQLITE_JOURNAL"><code class="docutils literal notranslate"><span class="pre">OGR_SQLITE_JOURNAL</span></code></a> can
be used to set the journal mode of the GeoPackage (and thus SQLite)
file, see also <a class="reference external" href="https://www.sqlite.org/pragma.html#pragma_journal_mode">https://www.sqlite.org/pragma.html#pragma_journal_mode</a>.</p>
</section>
<section id="creation-issues">
<h2>Creation issues<a class="headerlink" href="#creation-issues" title="Link to this heading"></a></h2>
<p>When creating a new GeoPackage file, the driver will attempt to force
the database into a UTF-8 mode for text handling, satisfying the OGR
strict UTF-8 capability. For pre-existing files, the driver will work
with whatever it is given.</p>
<p>The driver updates the GeoPackage <code class="docutils literal notranslate"><span class="pre">last_change</span></code> timestamp when the file is
created or modified. If consistent binary output is required for
reproducibility, the timestamp can be forced to a specific value by setting the
<a class="reference internal" href="#config-OGR_CURRENT_DATE"><code class="docutils literal notranslate"><span class="pre">OGR_CURRENT_DATE</span></code></a> global configuration option.
When setting the option, take care to meet the specific time format
requirement of the GeoPackage standard,
e.g. <a class="reference external" href="https://www.geopackage.org/spec120/#r15">for version 1.2</a>.</p>
<section id="dataset-creation-options">
<h3>Dataset creation options<a class="headerlink" href="#dataset-creation-options" title="Link to this heading"></a></h3>
<p>Dataset creation options can be specified in command-line tools using the syntax <code class="docutils literal notranslate"><span class="pre">-dsco</span> <span class="pre">&lt;NAME&gt;=&lt;VALUE&gt;</span></code> or by providing the appropriate arguments to <a class="reference internal" href="../../api/raster_c_api.html#_CPPv410GDALCreate11GDALDriverHPKciii12GDALDataType12CSLConstList" title="GDALCreate"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALCreate()</span></code></a> (C) or <a class="reference internal" href="../../api/python/raster_api.html#osgeo.gdal.Driver.Create" title="osgeo.gdal.Driver.Create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Driver.Create</span></code></a> (Python).
The following creation options (specific to vector, or common with
raster) are available:</p>
<ul class="simple">
<li><p id="drivers/vector/gpkg-dsco-VERSION"><strong>VERSION=[AUTO/1.0/1.1/1.2/1.3/1.4]: </strong>Set GeoPackage version
(for application_id and user_version fields). In AUTO mode, this will
be equivalent to 1.2 starting with GDAL 2.3.
1.3 is available starting with GDAL 3.3
1.4 is available starting with GDAL 3.7.1</p>
</li>
<li><p id="drivers/vector/gpkg-dsco-ADD_GPKG_OGR_CONTENTS"><strong>ADD_GPKG_OGR_CONTENTS=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">YES</span></code>. Defines whether to
add a gpkg_ogr_contents table to keep feature count, and associated
triggers.</p>
</li>
<li><p id="drivers/vector/gpkg-dsco-DATETIME_FORMAT"><strong>DATETIME_FORMAT=[WITH_TZ/UTC]: </strong> (GDAL &gt;= 3.2)  Defaults to <code class="docutils literal notranslate"><span class="pre">WITH_TZ</span></code>. Defines whether to keep the
DateTime values in the time zones as used in the data source (WITH_TZ),
or to convert the date and time expressions to UTC (Coordinated Universal Time).
Pedantically, non-UTC time zones are not currently supported
by GeoPackage v1.3 (see <a class="reference external" href="https://github.com/opengeospatial/geopackage/issues/530">https://github.com/opengeospatial/geopackage/issues/530</a>).
When using UTC format, with a unspecified timezone, UTC will be assumed.</p>
</li>
<li><p id="drivers/vector/gpkg-dsco-CRS_WKT_EXTENSION"><strong>CRS_WKT_EXTENSION=[YES/NO]: </strong> (GDAL &gt;= 3.8)  Defaults to <code class="docutils literal notranslate"><span class="pre">NO</span></code>. Defines whether to add the <code class="docutils literal notranslate"><span class="pre">definition_12_063</span></code> column to the
<code class="docutils literal notranslate"><span class="pre">gpkg_spatial_ref_sys</span></code> system table, according to
<a class="reference external" href="http://www.geopackage.org/spec/#extension_crs_wkt">http://www.geopackage.org/spec/#extension_crs_wkt</a> . The default is NO,
unless the tile gridded coverage extension is used.
With VERSION &gt;= 1.4, a <code class="docutils literal notranslate"><span class="pre">epoch</span></code> column is also added.
WKT strings in <code class="docutils literal notranslate"><span class="pre">definition_12_063</span></code> will follow the
<a class="reference external" href="https://docs.ogc.org/is/12-063r5/12-063r5.html">WKT2:2015 standard</a>
when possible, but may use the
<a class="reference external" href="https://docs.ogc.org/is/18-010r7/18-010r7.html">WKT2:2019 standard</a>
for specific cases (dynamic CRS with coordinate epoch).
This option generally does not need to be specified, as the driver will
automatically update the <code class="docutils literal notranslate"><span class="pre">gpkg_spatial_ref_sys</span></code> table when needed, but
it may be useful to create GeoPackage datasets matching the exceptions of
other software or profiles (such as the DGIWG-GPKG profile).</p>
</li>
<li><p id="drivers/vector/gpkg-co-METADATA_TABLES"><strong>METADATA_TABLES=[YES/NO]: </strong> (GDAL &gt;= 3.8) Defines whether to add the metadata system tables.
By default, they are created on demand.
If NO is specified, they are not created, even if metadata is set.
If YES is specified, they are always created.</p>
</li>
</ul>
<p>Other options are available for raster. See the <a class="reference internal" href="../raster/gpkg.html#raster-gpkg"><span class="std std-ref">GeoPackage raster</span></a>
documentation page.</p>
</section>
<section id="layer-creation-options">
<h3>Layer creation options<a class="headerlink" href="#layer-creation-options" title="Link to this heading"></a></h3>
<p>Layer creation options can be specified in command-line tools using the syntax <code class="docutils literal notranslate"><span class="pre">-lco</span> <span class="pre">&lt;NAME&gt;=&lt;VALUE&gt;</span></code> or by providing the appropriate arguments to <a class="reference internal" href="../../api/raster_c_api.html#_CPPv422GDALDatasetCreateLayer12GDALDatasetHPKc20OGRSpatialReferenceH18OGRwkbGeometryType12CSLConstList" title="GDALDatasetCreateLayer"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALDatasetCreateLayer()</span></code></a> (C) or <a class="reference internal" href="../../api/python/raster_api.html#osgeo.gdal.Dataset.CreateLayer" title="osgeo.gdal.Dataset.CreateLayer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataset.CreateLayer</span></code></a> (Python).
The following layer creation options are available:</p>
<ul class="simple">
<li><p id="drivers/vector/gpkg-lco-LAUNDER"><strong>LAUNDER=[YES/NO]: </strong> (GDAL &gt;= 3.9)  Defaults to <code class="docutils literal notranslate"><span class="pre">NO</span></code>. Whether layer and field names will be laundered. Laundering makes sure
that the recommendation of <a class="reference external" href="https://www.geopackage.org/guidance/getting-started.html">https://www.geopackage.org/guidance/getting-started.html</a>
is followed: an identifier should start with a lowercase character and
only use lowercase characters, numbers 0-9, and underscores (_). UTF-8
accented characters in the <a class="reference external" href="https://en.wikipedia.org/wiki/Latin-1_Supplement">Latin-1 Supplement</a>
and <a class="reference external" href="https://en.wikipedia.org/wiki/Latin_Extended-A">Latin Extented-A</a>
sets are replaced when possible with the closest ASCII letter.
Characters that do not match the recommendation are replaced with underscore.
Consequently this option is not appropriate for non-Latin languages.</p>
</li>
<li><p id="drivers/vector/gpkg-lco-GEOMETRY_NAME"><strong>GEOMETRY_NAME=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">geom</span></code>. Column to use for the geometry column. Default to
&quot;geom&quot;. Note: This option was called GEOMETRY_COLUMN in releases before
GDAL 2</p>
</li>
<li><p id="drivers/vector/gpkg-lco-GEOMETRY_NULLABLE"><strong>GEOMETRY_NULLABLE=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">YES</span></code>. Whether the values of the
geometry column can be NULL. Can be set to NO so that geometry is
required.</p>
</li>
<li><p id="drivers/vector/gpkg-lco-SRID"><strong>SRID=&lt;integer&gt;: </strong> (GDAL &gt;= 3.9) Forced <code class="docutils literal notranslate"><span class="pre">srs_id</span></code> of the entry in the <code class="docutils literal notranslate"><span class="pre">gpkg_spatial_ref_sys</span></code> table to point to.
This may be -1 (&quot;Undefined Cartesian SRS&quot;), 0 (&quot;Undefined geographic SRS&quot;),
99999 (&quot;Undefined SRS&quot;), a valid EPSG CRS code or an existing entry of the
<code class="docutils literal notranslate"><span class="pre">gpkg_spatial_ref_sys</span></code> table. If pointing to a non-existing entry, only a warning
will be emitted.</p>
</li>
<li><p id="drivers/vector/gpkg-lco-DISCARD_COORD_LSB"><strong>DISCARD_COORD_LSB=[YES/NO]: </strong> (GDAL &gt;= 3.9)  Defaults to <code class="docutils literal notranslate"><span class="pre">NO</span></code>. Whether the geometry coordinate precision should be used to set to zero non-significant least-significant bits of geometries. Helps when further compression is used. See <a class="reference internal" href="#ogr-gpkg-geometry-coordinate-precision"><span class="std std-ref">Geometry coordinate precision</span></a> for more details.</p>
</li>
<li><p id="drivers/vector/gpkg-lco-UNDO_DISCARD_COORD_LSB_ON_READING"><strong>UNDO_DISCARD_COORD_LSB_ON_READING=[YES/NO]: </strong> (GDAL &gt;= 3.9)  Defaults to <code class="docutils literal notranslate"><span class="pre">NO</span></code>. Whether to ask GDAL to take into coordinate precision to undo the effects of DISCARD_COORD_LSB. See <a class="reference internal" href="#ogr-gpkg-geometry-coordinate-precision"><span class="std std-ref">Geometry coordinate precision</span></a> for more details.</p>
</li>
<li><p id="drivers/vector/gpkg-lco-FID"><strong>FID=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">fid</span></code>. Column name to use for the OGR FID (primary key in the
SQLite database).</p>
</li>
<li><p id="drivers/vector/gpkg-lco-OVERWRITE"><strong>OVERWRITE=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">NO</span></code>. If set to &quot;YES&quot; will delete any existing layers that
have the same name as the layer being created.</p>
</li>
<li><p id="drivers/vector/gpkg-lco-SPATIAL_INDEX"><strong>SPATIAL_INDEX=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">YES</span></code>. If set to &quot;YES&quot; will create a spatial
index for this layer.</p>
</li>
<li><p id="drivers/vector/gpkg-lco-PRECISION"><strong>PRECISION=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">YES</span></code>. This may be &quot;YES&quot; to force new fields
created on this layer to try and represent the width of text fields
(in terms of UTF-8 characters, not bytes), if available using
TEXT(width) types. If &quot;NO&quot; then the type TEXT will be used instead.</p>
</li>
<li><p id="drivers/vector/gpkg-lco-TRUNCATE_FIELDS"><strong>TRUNCATE_FIELDS=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">NO</span></code>. This may be &quot;YES&quot; to force
truncated of field values that exceed the maximum allowed width of
text fields, and also to &quot;fix&quot; the passed string if needed to make it
a valid UTF-8 string. If &quot;NO&quot; then the value is not truncated nor
modified.</p>
</li>
<li><p id="drivers/vector/gpkg-lco-IDENTIFIER"><strong>IDENTIFIER=value: </strong>Identifier of the layer, as put
in the contents table.</p>
</li>
<li><p id="drivers/vector/gpkg-lco-DESCRIPTION"><strong>DESCRIPTION=value: </strong>Description of the layer, as
put in the contents table.</p>
</li>
<li><p id="drivers/vector/gpkg-lco-ASPATIAL_VARIANT"><strong>ASPATIAL_VARIANT=[GPKG_ATTRIBUTES/NOT_REGISTERED]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">GPKG_ATTRIBUTES</span></code>. How to register non spatial tables. Defaults to
GPKG_ATTRIBUTES in GDAL 2.2 or later (behavior in previous version
was equivalent to OGR_ASPATIAL). Starting with GeoPackage 1.2, non
spatial tables are part of the specification. They are recorded with
data_type=&quot;attributes&quot; in the gpkg_contents table. This is only
compatible of GDAL 2.2 or later.
It is also possible to use the NOT_REGISTERED
option, in which case the non spatial table is not registered at all
in any GeoPackage system tables.
Priorly, in OGR 2.0 and 2.1, the &quot;aspatial&quot; extension had been developed for
similar purposes, so if selecting OGR_ASPATIAL, non spatial tables will be
recorded with data_type=&quot;aspatial&quot; and the &quot;aspatial&quot; extension was declared in the
gpkg_extensions table. Starting with GDAL 3.3, OGR_ASPATIAL is no longer
available on creation.</p>
</li>
<li><p id="drivers/vector/gpkg-lco-DATETIME_PRECISION"><strong>DATETIME_PRECISION=[AUTO/MILLISECOND/SECOND/MINUTE]: </strong> (GDAL &gt;= 3.8)  Defaults to <code class="docutils literal notranslate"><span class="pre">AUTO</span></code>. Determines the level of detail for datetime fields.
Starting with GeoPackage 1.4, three variants of datetime formats are supported:
truncated at minute (<code class="docutils literal notranslate"><span class="pre">MINUTE</span></code>), truncated at second (<code class="docutils literal notranslate"><span class="pre">SECOND</span></code>) or
including milliseconds (<code class="docutils literal notranslate"><span class="pre">MILLISECOND</span></code>).
In <code class="docutils literal notranslate"><span class="pre">AUTO</span></code> mode and GeoPackage 1.4, milliseconds are included only if non-zero.
Selecting modes <code class="docutils literal notranslate"><span class="pre">MINUTE</span></code> or <code class="docutils literal notranslate"><span class="pre">SECOND</span></code> will raise a warning with GeoPackage &lt; 1.4.</p>
</li>
</ul>
</section>
</section>
<section id="configuration-options">
<h2>Configuration options<a class="headerlink" href="#configuration-options" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../../user/configoptions.html#configoptions"><span class="std std-ref">Configuration options</span></a> can be specified in command-line tools using the syntax <code class="docutils literal notranslate"><span class="pre">--config</span> <span class="pre">&lt;NAME&gt;=&lt;VALUE&gt;</span></code> or using functions such as <a class="reference internal" href="../../api/cpl.html#_CPPv418CPLSetConfigOptionPKcPKc" title="CPLSetConfigOption"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CPLSetConfigOption()</span></code></a> (C) or <code class="xref py py-func docutils literal notranslate"><span class="pre">gdal.config_options</span></code> (Python).
The following configuration options are available:</p>
<ul class="simple">
<li><p><p id="config-OGR_SQLITE_JOURNAL"><strong>OGR_SQLITE_JOURNAL=value: </strong>can be used to set the journal mode of the SQLite file, see also
<a class="reference external" href="https://www.sqlite.org/pragma.html#pragma_journal_mode">https://www.sqlite.org/pragma.html#pragma_journal_mode</a>.</p>
</p></li>
<li><p><p id="config-OGR_SQLITE_CACHE"><strong>OGR_SQLITE_CACHE=value: </strong>see <a class="reference internal" href="#target-drivers-vector-sqlite-performance-hints"><span class="std std-ref">Performance hints</span></a>.</p>
</p></li>
<li><p><p id="config-OGR_SQLITE_SYNCHRONOUS"><strong>OGR_SQLITE_SYNCHRONOUS=value: </strong>see <a class="reference internal" href="#target-drivers-vector-sqlite-performance-hints"><span class="std std-ref">Performance hints</span></a>.</p>
</p></li>
<li><p><p id="config-OGR_SQLITE_LOAD_EXTENSIONS"><strong>OGR_SQLITE_LOAD_EXTENSIONS=[&lt;extension1,...,extensionN&gt;/ENABLE_SQL_LOAD_EXTENSION]: </strong> (GDAL &gt;= 3.5.0) Comma separated list of names of shared libraries containing
extensions to load at database opening.
If a file cannot be loaded directly, attempts are made to load with various
operating-system specific extensions added. So
for example, if &quot;samplelib&quot; cannot be loaded, then names like &quot;samplelib.so&quot;
or &quot;samplelib.dylib&quot; or &quot;samplelib.dll&quot; might be tried also.
The special value <code class="docutils literal notranslate"><span class="pre">ENABLE_SQL_LOAD_EXTENSION</span></code> can be used to enable the use of
the SQL <code class="docutils literal notranslate"><span class="pre">load_extension()</span></code> function, which is normally disabled in standard
builds of sqlite3.
Loading extensions as a potential security impact if they are untrusted.</p>
</p></li>
<li><p><p id="config-OGR_SQLITE_PRAGMA"><strong>OGR_SQLITE_PRAGMA=value: </strong>with this option any SQLite
<a class="reference external" href="http://www.sqlite.org/pragma.html">pragma</a> can be specified. The syntax is
<code class="docutils literal notranslate"><span class="pre">OGR_SQLITE_PRAGMA</span> <span class="pre">=</span> <span class="pre">&quot;pragma_name=pragma_value[,pragma_name2=pragma_value2]*&quot;</span></code>.</p>
</p></li>
<li><p id="config-OGR_CURRENT_DATE"><strong>OGR_CURRENT_DATE=value: </strong>the driver updates the GeoPackage
<code class="docutils literal notranslate"><span class="pre">last_change</span></code> timestamp when the file is created or modified. If consistent
binary output is required for reproducibility, the timestamp can be forced to
a specific value by setting this global configuration option.
When setting the option, take care to meet the specific time format
requirement of the GeoPackage standard,
e.g. <a class="reference external" href="https://www.geopackage.org/spec120/#r15">for version 1.2</a>.</p>
</li>
<li><p><p id="config-SQLITE_USE_OGR_VFS"><strong>SQLITE_USE_OGR_VFS=[YES/NO]: </strong>YES enables extra buffering/caching
by the GDAL/OGR I/O layer and can speed up I/O. More information
<a class="reference internal" href="../../user/virtual_file_systems.html#vsicached"><span class="std std-ref">here</span></a>.
Be aware that no file locking will occur if this option is activated, so
concurrent edits may lead to database corruption.</p>
</p></li>
<li><p id="config-OGR_GPKG_NUM_THREADS"><strong>OGR_GPKG_NUM_THREADS=value: </strong> (GDAL &gt;= 3.8.3) Can be set to an integer or <code class="docutils literal notranslate"><span class="pre">ALL_CPUS</span></code>.
This is the number of threads used when reading tables through the
ArrowArray interface, when no filter is applied and when features have
consecutive feature ID numbering.
The default is the minimum of 4 and the number of CPUs.
Note that setting this value too high is not recommended: a value of 4 is
close to the optimal.</p>
</li>
</ul>
</section>
<section id="metadata">
<h2>Metadata<a class="headerlink" href="#metadata" title="Link to this heading"></a></h2>
<p>GDAL uses the standardized
<a class="reference external" href="http://www.geopackage.org/spec/#_metadata_table">gpkg_metadata</a>
and
<a class="reference external" href="http://www.geopackage.org/spec/#_metadata_reference_table">gpkg_metadata_reference</a>
tables to read and write metadata, on the dataset and layer objects.</p>
<p>GDAL metadata, from the default metadata domain and possibly other
metadata domains, is serialized in a single XML document, conformant
with the format used in GDAL PAM (Persistent Auxiliary Metadata)
.aux.xml files, and registered with md_scope=dataset and
md_standard_uri=http://gdal.org in gpkg_metadata. For the dataset, this
entry is referenced in gpkg_metadata_reference with a
reference_scope=geopackage. For a layer, this entry is referenced in
gpkg_metadata_reference with a reference_scope=table and
table_name={name of the table}</p>
<p>Metadata not originating from GDAL can be read by the driver and will be
exposed as metadata items with keys of the form GPKG_METADATA_ITEM_XXX
and values the content of the <em>metadata</em> columns of the gpkg_metadata
table. Update of such metadata is not currently supported through GDAL
interfaces ( although it can be through direct SQL commands).</p>
<p>The specific DESCRIPTION and IDENTIFIER metadata item of the default
metadata domain can be used in read/write to read from/update the
corresponding columns of the gpkg_contents table.</p>
</section>
<section id="non-spatial-tables">
<h2>Non-spatial tables<a class="headerlink" href="#non-spatial-tables" title="Link to this heading"></a></h2>
<p>The core GeoPackage specification of GeoPackage 1.0 and 1.1 did not
support non-spatial tables. This was added in GeoPackage 1.2 as the
&quot;attributes&quot; data type.</p>
<p>The driver allows creating and reading non-spatial tables with the <a class="reference internal" href="geopackage_aspatial.html#vector-geopackage-aspatial"><span class="std std-ref">GeoPackage aspatial extension</span></a>.</p>
<p>Starting with GDAL 2.2, the driver will also, by default, list non
spatial tables that are not registered through the gdal_aspatial
extension, and support the GeoPackage 1.2 &quot;attributes&quot; data type as
well. Starting with GDAL 2.2, non spatial tables are by default created
following the GeoPackage 1.2 &quot;attributes&quot; data type (can be controlled
with the <a class="reference internal" href="#drivers/vector/gpkg-lco-ASPATIAL_VARIANT"><code class="docutils literal notranslate"><span class="pre">ASPATIAL_VARIANT</span></code></a> layer creation option).</p>
</section>
<section id="spatial-views">
<h2>Spatial views<a class="headerlink" href="#spatial-views" title="Link to this heading"></a></h2>
<p>Views can be created and recognized as valid spatial layers if a
corresponding record is inserted into the gpkg_contents and
gpkg_geometry_columns table.</p>
<p>Starting with GDAL 2.2, in the case of the columns in the SELECT clause
of the view acts a integer primary key, then it can be recognized by OGR
as the FID column of the view, provided it is renamed as OGC_FID.
Selecting a feature id from a source table without renaming will not be
sufficient, since due to joins this feature id could appear several
times. Thus the user must explicitly acknowledge that the column is
really a primary key.</p>
<p>For example:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">my_view</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">fid</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">OGC_FID</span><span class="p">,</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">geom</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">another_table</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">some_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">another_table</span><span class="p">.</span><span class="n">other_id</span><span class="p">;</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gpkg_contents</span><span class="w"> </span><span class="p">(</span><span class="k">table_name</span><span class="p">,</span><span class="w"> </span><span class="n">identifier</span><span class="p">,</span><span class="w"> </span><span class="n">data_type</span><span class="p">,</span><span class="w"> </span><span class="n">srs_id</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;my_view&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;my_view&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;features&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gpkg_geometry_columns</span><span class="w"> </span><span class="p">(</span><span class="k">table_name</span><span class="p">,</span><span class="w"> </span><span class="k">column_name</span><span class="p">,</span><span class="w"> </span><span class="n">geometry_type_name</span><span class="p">,</span><span class="w"> </span><span class="n">srs_id</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="p">)</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;my_view&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;my_geom&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;GEOMETRY&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
<p>This requires GDAL to be compiled with the SQLITE_HAS_COLUMN_METADATA
option and SQLite3 with the SQLITE_ENABLE_COLUMN_METADATA option.
Starting with GDAL 2.3, this can be easily verified if the
SQLITE_HAS_COLUMN_METADATA=YES driver metadata item is declared (for
example with &quot;ogrinfo --format GPKG&quot;).</p>
<p>Starting with GDAL 3.7.1, it is possible to define a geometry column as the
result of a Spatialite spatial function. Note however that this is an extension
likely to be non-interoperable with other software that does not activate Spatialite
for the SQLite3 database connection. Such geometry column should be registered
into the <code class="docutils literal notranslate"><span class="pre">gpkg_extensions</span></code> using the <code class="docutils literal notranslate"><span class="pre">gdal_spatialite_computed_geom_column</span></code>
extension name (cf <a class="reference internal" href="gpkg_spatialite_computed_geom_column.html#vector-gpkg-spatialite-computed-geom-column"><span class="std std-ref">GeoPackage Spatialite computed geometry column extension</span></a>), like below:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">my_view</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">fid</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">OGC_FID</span><span class="p">,</span><span class="w"> </span><span class="n">AsGBP</span><span class="p">(</span><span class="n">ST_Multi</span><span class="p">(</span><span class="n">foo</span><span class="p">.</span><span class="n">geom</span><span class="p">))</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">foo</span><span class="p">;</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gpkg_contents</span><span class="w"> </span><span class="p">(</span><span class="k">table_name</span><span class="p">,</span><span class="w"> </span><span class="n">identifier</span><span class="p">,</span><span class="w"> </span><span class="n">data_type</span><span class="p">,</span><span class="w"> </span><span class="n">srs_id</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s1">&#39;my_view&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;my_view&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;features&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gpkg_geometry_columns</span><span class="w"> </span><span class="p">(</span><span class="k">table_name</span><span class="p">,</span><span class="w"> </span><span class="k">column_name</span><span class="p">,</span><span class="w"> </span><span class="n">geometry_type_name</span><span class="p">,</span><span class="w"> </span><span class="n">srs_id</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s1">&#39;my_view&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;my_geom&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;MULTIPOLYGON&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">gpkg_extensions</span><span class="w"> </span><span class="p">(</span><span class="k">table_name</span><span class="p">,</span><span class="w"> </span><span class="k">column_name</span><span class="p">,</span><span class="w"> </span><span class="n">extension_name</span><span class="p">,</span><span class="w"> </span><span class="n">definition</span><span class="p">,</span><span class="w"> </span><span class="k">scope</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s1">&#39;my_view&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;my_geom&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;gdal_spatialite_computed_geom_column&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;https://gdal.org/drivers/vector/gpkg_spatialite_computed_geom_column.html&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;read-write&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="coordinate-reference-systems">
<h2>Coordinate Reference Systems<a class="headerlink" href="#coordinate-reference-systems" title="Link to this heading"></a></h2>
<p>Valid geographic, projected and compound CRS supported in general by GDAL are
also supported by GeoPackage and stored in the <code class="docutils literal notranslate"><span class="pre">gpkg_spatial_ref_sys</span></code> table.</p>
<p>Two special hard-coded CRS are reserved per the GeoPackage specification:</p>
<ul class="simple">
<li><p>srs_id=0, for a Undefined Geographic CRS. For GDAL 3.8 or earlier, this one is
selected by default if creating a spatial layer without any explicit CRS</p></li>
<li><p>srs_id=-1, for a Undefined Projected CRS. It might be selected by creating a
layer with a CRS instantiated from the following WKT string:
<code class="docutils literal notranslate"><span class="pre">LOCAL_CS[&quot;Undefined</span> <span class="pre">Cartesian</span> <span class="pre">SRS&quot;]</span></code>. (GDAL &gt;= 3.3)</p></li>
</ul>
<p>Starting with GDAL 3.9, a layer without any explicit CRS is mapped from/to a
custom entry of srs_id=99999 with the following properties:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">srs_name</span></code>: <code class="docutils literal notranslate"><span class="pre">Undefined</span> <span class="pre">SRS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">organization</span></code>: <code class="docutils literal notranslate"><span class="pre">GDAL</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">organization_coordsys_id</span></code>: 99999</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">definition</span></code>: <code class="docutils literal notranslate"><span class="pre">LOCAL_CS[&quot;Undefined</span> <span class="pre">SRS&quot;,LOCAL_DATUM[&quot;unknown&quot;,32767],UNIT[&quot;unknown&quot;,0],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH]]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">definition_12_063</span></code> (when the CRS WKT extension is used): <code class="docutils literal notranslate"><span class="pre">ENGCRS[&quot;Undefined</span> <span class="pre">SRS&quot;,EDATUM[&quot;unknown&quot;],CS[Cartesian,2],AXIS[&quot;easting&quot;,east,ORDER[1],LENGTHUNIT[&quot;unknown&quot;,0]],AXIS[&quot;northing&quot;,north,ORDER[2],LENGTHUNIT[&quot;unknown&quot;,0]]]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code>: <code class="docutils literal notranslate"><span class="pre">Custom</span> <span class="pre">undefined</span> <span class="pre">coordinate</span> <span class="pre">reference</span> <span class="pre">system</span></code></p></li>
</ul>
<p>Note that the use of a LOCAL_CS / EngineeringCRS is mostly to provide a valid
CRS definition to comply with the requirements of the GeoPackage specification
and to be compatible of other applications (or GDAL 3.8 or earlier), but the
semantics of that entry is intended to be &quot;undefined SRS of any kind&quot;.</p>
</section>
<section id="level-of-support-of-geopackage-extensions">
<h2>Level of support of GeoPackage Extensions<a class="headerlink" href="#level-of-support-of-geopackage-extensions" title="Link to this heading"></a></h2>
<p>(Restricted to those that have a vector scope)</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Extensions</span><a class="headerlink" href="#id1" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Extension name</p></th>
<th class="head"><p>OGC adopted extension ?</p></th>
<th class="head"><p>Supported by GDAL?</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="http://www.geopackage.org/guidance/extensions/nonlinear_geometry_types.html">Non-Linear Geometry Types</a></p></td>
<td><p>Yes</p></td>
<td><p>Yes, since GDAL 2.1</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="http://www.geopackage.org/guidance/extensions/rtree_spatial_indexes.html">RTree Spatial Indexes</a></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="http://www.geopackage.org/guidance/extensions/metadata.html">Metadata</a></p></td>
<td><p>Yes</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="http://www.geopackage.org/guidance/extensions/schema.html">Schema</a></p></td>
<td><p>Yes</p></td>
<td><p>Yes, since GDAL 3.3 (Geopackage constraints exposed as field domains)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="http://www.geopackage.org/guidance/extensions/wkt_for_crs.md">WKT for Coordinate Reference Systems</a> (WKT v2)</p></td>
<td><p>Yes</p></td>
<td><p>Partially, since GDAL 2.2. GDAL can read databases using this extension, but cannot interpret a SRS entry that has only a WKT v2 entry.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="geopackage_aspatial.html#vector-geopackage-aspatial"><span class="std std-ref">GeoPackage aspatial extension</span></a></p></td>
<td><p>No</p></td>
<td><p>Yes. Deprecated in GDAL 2.2 for the <em>attributes</em> official data_type</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="gpkg_spatialite_computed_geom_column.html#vector-gpkg-spatialite-computed-geom-column"><span class="std std-ref">GeoPackage Spatialite computed geometry column extension</span></a></p></td>
<td><p>No</p></td>
<td><p>Yes, starting with GDAL 3.7.1</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="http://www.geopackage.org/spec/related-tables/">OGC GeoPackage Related Tables Extension</a></p></td>
<td><p>Yes</p></td>
<td><p>Yes, starting with GDAL 3.6</p></td>
</tr>
</tbody>
</table>
</section>
<section id="compressed-files">
<h2>Compressed files<a class="headerlink" href="#compressed-files" title="Link to this heading"></a></h2>
<p>Starting with GDAL 3.7, the driver can also support reading and creating
.gpkg.zip files containing one .gpkg file.</p>
<p>On large files, good read performance can only be achieved if the file inside
the .zip is not compressed or compressed using the <a class="reference external" href="https://sozip.org">SOZip</a>
optimization.</p>
<p>Update of an existing file is not supported.</p>
<p>Creation involves the creation of a temporary file. Sufficiently large files
will be automatically compressed using the SOZip optimization.</p>
</section>
<section id="geometry-coordinate-precision">
<span id="ogr-gpkg-geometry-coordinate-precision"></span><h2>Geometry coordinate precision<a class="headerlink" href="#geometry-coordinate-precision" title="Link to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Added in version GDAL: </span>3.9</p>
</div>
<p>The GeoPackage driver supports reading and writing the geometry coordinate
precision, using the <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">OGRGeomCoordinatePrecision</span></code> settings of the
<a class="reference internal" href="../../api/ogrfeature_cpp.html#_CPPv416OGRGeomFieldDefn" title="OGRGeomFieldDefn"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">OGRGeomFieldDefn</span></code></a>. By default, the geometry coordinate precision
is only noted in metadata, and does not cause geometries that are written to
be modified to comply with this precision.</p>
<p>Several settings may be combined to apply further processing:</p>
<ul class="simple">
<li><p>if the <a class="reference internal" href="../../user/configoptions.html#config-OGR_APPLY_GEOM_SET_PRECISION"><code class="docutils literal notranslate"><span class="pre">OGR_APPLY_GEOM_SET_PRECISION</span></code></a> configuration option is set to
<code class="docutils literal notranslate"><span class="pre">YES</span></code>, the <a class="reference internal" href="../../api/ogrgeometry_cpp.html#_CPPv4NK11OGRGeometry12SetPrecisionEdi" title="OGRGeometry::SetPrecision"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRGeometry::SetPrecision()</span></code></a> method will be applied
when calling the CreateFeature() and SetFeature() method of the driver, to
round X and Y coordinates to the specified precision, and fix potential
geometry invalidities resulting from the rounding.</p></li>
<li><p>if the <code class="docutils literal notranslate"><span class="pre">DISCARD_COORD_LSB</span></code> layer creation option is set to YES, the
less-significant bits of the WKB geometry encoding which are not relevant for
the requested precision are set to zero. This can improve further lossless
compression stages, for example when putting a GeoPackage in an archive.
Note however that when reading back such geometries and displaying them
to the maximum precision, they will not &quot;exactly&quot; match the original
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">OGRGeomCoordinatePrecision</span></code> settings. However, they will round
back to it.
The value of the <code class="docutils literal notranslate"><span class="pre">DISCARD_COORD_LSB</span></code> layer creation option is written in
the dataset metadata, and will be re-used for later edition sessions.</p></li>
<li><p>if the <code class="docutils literal notranslate"><span class="pre">UNDO_DISCARD_COORD_LSB_ON_READING</span></code> layer creation option is set to
YES (only makes sense if the <code class="docutils literal notranslate"><span class="pre">DISCARD_COORD_LSB</span></code> layer creation option is
also set to YES), when <em>reading</em> back geometries from a dataset, the
<a class="reference internal" href="../../api/ogrgeometry_cpp.html#_CPPv4N11OGRGeometry16roundCoordinatesERK26OGRGeomCoordinatePrecision" title="OGRGeometry::roundCoordinates"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRGeometry::roundCoordinates()</span></code></a> method will be applied so that
the geometry coordinates exactly match the original specified coordinate
precision. That option will only be honored by GDAL 3.9 or later.</p></li>
</ul>
<p>Implementation details: the coordinate precision is stored in a record in each
of the <code class="docutils literal notranslate"><span class="pre">gpkg_metadata</span></code> and <code class="docutils literal notranslate"><span class="pre">gpkg_metadata_reference</span></code> table, with the
following additional constraints on top of the ones imposed by the GeoPackage
specification:</p>
<ul class="simple">
<li><p>gpkg_metadata.md_standard_uri = '<a class="reference external" href="http://gdal.org">http://gdal.org</a>'</p></li>
<li><p>gpkg_metadata.mime_type = 'text/xml'</p></li>
<li><p>gpkg_metadata.metadata = '&lt;CoordinatePrecision xy_resolution=&quot;{xy_resolution}&quot; z_resolution=&quot;{z_resolution}&quot; m_resolution=&quot;{m_resolution}&quot; discard_coord_lsb={true or false} undo_discard_coord_lsb_on_reading={true or false} /&gt;'</p></li>
<li><p>gpkg_metadata_reference.reference_scope = 'column'</p></li>
<li><p>gpkg_metadata_reference.table_name = '{table_name}'</p></li>
<li><p>gpkg_metadata_reference.column_name = '{geometry_column_name}'</p></li>
</ul>
<p>Note that the xy_resolution, z_resolution or m_resolution attributes of the
XML CoordinatePrecision element are optional. Their numeric value is expressed
in the units of the SRS for xy_resolution and z_resolution.</p>
</section>
<section id="performance-hints">
<span id="target-drivers-vector-gpkg-performance-hints"></span><h2>Performance hints<a class="headerlink" href="#performance-hints" title="Link to this heading"></a></h2>
<p>The same performance hints apply as those mentioned for the
<a class="reference internal" href="sqlite.html#target-drivers-vector-sqlite-performance-hints"><span class="std std-ref">SQLite driver</span></a>.</p>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<ul>
<li><p>Simple translation of a single shapefile into GeoPackage. The table
'abc' will be created with the features from abc.shp and attributes
from abc.dbf. The file <code class="docutils literal notranslate"><span class="pre">filename.gpkg</span></code> must <strong>not</strong> already exist,
as it will be created. For adding new layers into existing geopackage
run ogr2ogr with <strong>-update</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogr2ogr</span> <span class="o">-</span><span class="n">f</span> <span class="n">GPKG</span> <span class="n">filename</span><span class="o">.</span><span class="n">gpkg</span> <span class="n">abc</span><span class="o">.</span><span class="n">shp</span>
</pre></div>
</div>
</li>
<li><p>Update of an existing GeoPackage file – e.g. a GeoPackage template –
by adding features to it from another GeoPackage file containing
features according to the same or a backwards compatible database
schema.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogr2ogr</span> <span class="o">-</span><span class="n">append</span> <span class="n">output</span><span class="o">.</span><span class="n">gpkg</span> <span class="nb">input</span><span class="o">.</span><span class="n">gpkg</span>
</pre></div>
</div>
</li>
<li><p>Translation of a directory of shapefiles into a GeoPackage. Each file
will end up as a new table within the GPKG file. The file
<code class="docutils literal notranslate"><span class="pre">filename.gpkg</span></code> must <strong>not</strong> already exist, as it will be created.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogr2ogr</span> <span class="o">-</span><span class="n">f</span> <span class="n">GPKG</span> <span class="n">filename</span><span class="o">.</span><span class="n">gpkg</span> <span class="o">./</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="nb">dir</span>
</pre></div>
</div>
</li>
<li><p>Translation of a PostGIS database into a GeoPackage. Each table in
the database will end up as a table in the GPKG file. The file
<code class="docutils literal notranslate"><span class="pre">filename.gpkg</span></code> must <strong>not</strong> already exist, as it will be created.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogr2ogr</span> <span class="o">-</span><span class="n">f</span> <span class="n">GPKG</span> <span class="n">filename</span><span class="o">.</span><span class="n">gpkg</span> <span class="n">PG</span><span class="p">:</span><span class="s1">&#39;dbname=mydatabase host=localhost&#39;</span>
</pre></div>
</div>
</li>
<li><p>Perform a join between 2 GeoPackage databases:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="n">my_spatial</span><span class="o">.</span><span class="n">gpkg</span> \
  <span class="o">-</span><span class="n">sql</span> <span class="s2">&quot;SELECT poly.id, other.foo FROM poly JOIN other_schema.other USING (id)&quot;</span> \
  <span class="o">-</span><span class="n">oo</span> <span class="n">PRELUDE_STATEMENTS</span><span class="o">=</span><span class="s2">&quot;ATTACH DATABASE &#39;other.gpkg&#39; AS other_schema&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../raster/gpkg.html#raster-gpkg"><span class="std std-ref">GeoPackage raster</span></a> documentation page</p></li>
<li><p><a class="reference external" href="http://www.geopackage.org/guidance/getting-started.html">Getting Started With
GeoPackage</a></p></li>
<li><p><a class="reference external" href="http://www.geopackage.org/spec/">OGC GeoPackage format standard</a>
specification, HTML format (current/development version of the
standard)</p></li>
<li><p><a class="reference external" href="http://www.opengeospatial.org/standards/geopackage">OGC GeoPackage Encoding
Standard</a> page</p></li>
<li><p><a class="reference external" href="http://sqlite.org/">SQLite</a></p></li>
</ul>
<div class="toctree-wrapper compound">
</div>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="geopackage_aspatial.html" class="btn btn-neutral float-right" title="GeoPackage aspatial extension" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gmt.html" class="btn btn-neutral float-left" title="GMT ASCII Vectors (.gmt)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2024 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
  </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>