<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>nearblack &mdash; GDAL  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../_static/css/gdal.css?v=e152ac3b" />

  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="canonical" href="https://gdal.org/programs/nearblack.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=c033477b"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/translations.js?v=4dbe4bdc"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="pct2rgb" href="pct2rgb.html" />
    <link rel="prev" title="gdalwarp" href="gdalwarp.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../index.html">
            
              <img src="../_static/gdalicon.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../download.html">ダウンロード</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">プログラム</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#general">一般情報</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#raster-programs">ラスタープログラム</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="raster_common_options.html">共通オプション</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal-config.html">gdal-config (Unix)</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal2tiles.html">gdal2tiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal2xyz.html">gdal2xyz</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_calc.html">gdal_calc</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_contour.html">gdal_contour</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_create.html">gdal_create</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_edit.html">gdal_edit</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_fillnodata.html">gdal_fillnodata</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_footprint.html">gdal_footprint</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_grid.html">gdal_grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_merge.html">gdal_merge</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_pansharpen.html">gdal_pansharpen</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_polygonize.html">gdal_polygonize</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_proximity.html">gdal_proximity</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_rasterize.html">gdal_rasterize</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_retile.html">gdal_retile</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_sieve.html">gdal_sieve</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_translate.html">gdal_translate</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_viewshed.html">gdal_viewshed</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdaladdo.html">gdaladdo</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdalattachpct.html">gdalattachpct</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdalbuildvrt.html">gdalbuildvrt</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdalcompare.html">gdalcompare</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdaldem.html">gdaldem</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdalinfo.html">gdalinfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdallocationinfo.html">gdallocationinfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdalmanage.html">gdalmanage</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdalmove.html">gdalmove</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdalsrsinfo.html">gdalsrsinfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdaltindex.html">gdaltindex</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdaltransform.html">gdaltransform</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdalwarp.html">gdalwarp</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">nearblack</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#c-api">C API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pct2rgb.html">pct2rgb</a></li>
<li class="toctree-l3"><a class="reference internal" href="rgb2pct.html">rgb2pct</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#multidimensional-raster-programs">多次元ラスタープログラム</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#vector-programs">ベクタープログラム</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#geographic-network-programs">Geographic network programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#other-utilities">Other utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../drivers/raster/index.html">ラスタードライバー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drivers/vector/index.html">ベクタードライバー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">ユーザー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">チュートリアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">開発</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">コミュニティ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sponsors/index.html">スポンサー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">どのように貢献できますか?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">ライセンス</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html"> GDAL  ドキュメント </a> &raquo;</li>
      
          <li><a href="index.html">プログラム</a> &raquo;</li>
      
      <li>nearblack</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit/master/doc/source/programs/nearblack.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="pct2rgb.html" class="btn btn-neutral float-right" title="pct2rgb" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gdalwarp.html" class="btn btn-neutral float-left" title="gdalwarp" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nearblack">
<span id="id1"></span><h1>nearblack<a class="headerlink" href="#nearblack" title="Link to this heading"></a></h1>
<p>Convert nearly black/white borders to black.</p>
<section id="synopsis">
<span id="index-0"></span><h2>Synopsis<a class="headerlink" href="#synopsis" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nearblack</span> <span class="p">[</span><span class="o">--</span><span class="n">help</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">help</span><span class="o">-</span><span class="n">general</span><span class="p">]</span>
          <span class="p">[</span><span class="o">-</span><span class="n">of</span> <span class="o">&lt;</span><span class="nb">format</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">white</span> <span class="o">|</span> <span class="p">[</span><span class="o">-</span><span class="n">color</span> <span class="o">&lt;</span><span class="n">c1</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">c2</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">c3</span><span class="o">&gt;...&lt;</span><span class="n">cn</span><span class="o">&gt;</span><span class="p">]</span><span class="o">...</span><span class="p">]</span>
          <span class="p">[</span><span class="o">-</span><span class="n">near</span> <span class="o">&lt;</span><span class="n">dist</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">nb</span> <span class="o">&lt;</span><span class="n">non_black_pixels</span><span class="o">&gt;</span><span class="p">]</span>
          <span class="p">[</span><span class="o">-</span><span class="n">setalpha</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">setmask</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">alg</span> <span class="n">twopasses</span><span class="o">|</span><span class="n">floodfill</span><span class="p">]</span>
          <span class="p">[</span><span class="o">-</span><span class="n">o</span> <span class="o">&lt;</span><span class="n">outfile</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">q</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">co</span> <span class="o">&lt;</span><span class="n">NAME</span><span class="o">&gt;=&lt;</span><span class="n">VALUE</span><span class="o">&gt;</span><span class="p">]</span><span class="o">...</span> <span class="o">&lt;</span><span class="n">infile</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading"></a></h2>
<p>This utility will scan an image and try to set all pixels that are nearly or exactly
black, white or one or more custom colors around the collar to black or white. This
is often used to &quot;fix up&quot; lossy compressed air photos so that color pixels can be
treated as transparent when mosaicing. The output format must use lossless compression
if either alpha band or mask band is not set.</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-help">
<span class="sig-name descname"><span class="pre">--help</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-nearblack-help" title="Link to this definition"></a></dt>
<dd><p>Show this help message and exit</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-help-general">
<span class="sig-name descname"><span class="pre">--help-general</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-nearblack-help-general" title="Link to this definition"></a></dt>
<dd><p>Gives a brief usage message for the generic GDAL commandline options and exit.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-o">
<span class="sig-name descname"><span class="pre">-o</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;outfile&gt;</span></span><a class="headerlink" href="#cmdoption-nearblack-o" title="Link to this definition"></a></dt>
<dd><p>The name of the output file to be created.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-of">
<span class="sig-name descname"><span class="pre">-of</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;format&gt;</span></span><a class="headerlink" href="#cmdoption-nearblack-of" title="Link to this definition"></a></dt>
<dd><p>Select the output format.
Starting with GDAL 2.3, if not specified, the format is guessed from the extension (previously
was ERDAS Imagine .img).
Use the short format name (GTiff for GeoTIFF for example).</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-co">
<span class="sig-name descname"><span class="pre">-co</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;NAME&gt;=&lt;VALUE&gt;</span></span><a class="headerlink" href="#cmdoption-nearblack-co" title="Link to this definition"></a></dt>
<dd><p>Passes a creation option to the output format driver.  Multiple
<a class="reference internal" href="#cmdoption-nearblack-co"><code class="xref std std-option docutils literal notranslate"><span class="pre">-co</span></code></a> options may be listed. See <a class="reference internal" href="../drivers/raster/index.html#raster-drivers"><span class="std std-ref">ラスタードライバー</span></a> format
specific documentation for legal creation options for each format.</p>
<p>Only valid when creating a new file</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-white">
<span class="sig-name descname"><span class="pre">-white</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-nearblack-white" title="Link to this definition"></a></dt>
<dd><p>Search for nearly white (255) pixels instead of nearly black pixels.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-color">
<span class="sig-name descname"><span class="pre">-color</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;c1&gt;,&lt;c2&gt;,&lt;c3&gt;...&lt;cn&gt;</span></span><a class="headerlink" href="#cmdoption-nearblack-color" title="Link to this definition"></a></dt>
<dd><p>Search for pixels near the specified color. May be specified multiple times.
When -color is specified, the pixels that are considered as the collar are set to 0.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-near">
<span class="sig-name descname"><span class="pre">-near</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;dist&gt;</span></span><a class="headerlink" href="#cmdoption-nearblack-near" title="Link to this definition"></a></dt>
<dd><p>Select how far from black, white or custom colors the pixel values can be
and still considered near black, white or custom color.  Defaults to 15.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-nb">
<span class="sig-name descname"><span class="pre">-nb</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;non_black_pixels&gt;</span></span><a class="headerlink" href="#cmdoption-nearblack-nb" title="Link to this definition"></a></dt>
<dd><p>number of consecutive non-black pixels that can be encountered before the
giving up search inwards. Defaults to 2.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-setalpha">
<span class="sig-name descname"><span class="pre">-setalpha</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-nearblack-setalpha" title="Link to this definition"></a></dt>
<dd><p>Adds an alpha band if the output file is specified and the input file has 3 bands,
or sets the alpha band of the output file if it is specified and the input file has 4 bands,
or sets the alpha band of the input file if it has 4 bands and no output file is specified.
The alpha band is set to 0 in the image collar and to 255 elsewhere.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-setmask">
<span class="sig-name descname"><span class="pre">-setmask</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-nearblack-setmask" title="Link to this definition"></a></dt>
<dd><p>Adds a mask band to the output file,
or adds a mask band to the input file if it does not already have one and no output file is specified.
The mask band is set to 0 in the image collar and to 255 elsewhere.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-alg">
<span class="sig-name descname"><span class="pre">-alg</span></span><span class="sig-prename descclassname"> <span class="pre">twopasses|floodfill</span></span><a class="headerlink" href="#cmdoption-nearblack-alg" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">バージョン 3.8 で追加.</span></p>
</div>
<p>Selects the algorithm to apply.</p>
<p><code class="docutils literal notranslate"><span class="pre">twopasses</span></code> uses a top-to-bottom pass followed by a bottom-to-top pass.
This is the only algorithm implemented before GDAL 3.8. It may miss with
concave areas.
The algorithm processes the image one scanline at a time.  A scan &quot;in&quot; is done
from either end setting pixels to black or white until at least
&quot;non_black_pixels&quot; pixels that are more than &quot;dist&quot; gray levels away from
black, white or custom colors have been encountered at which point the scan stops.  The nearly
black, white or custom color pixels are set to black or white. The algorithm also scans from
top to bottom and from bottom to top to identify indentations in the top or bottom.</p>
<p><code class="docutils literal notranslate"><span class="pre">floodfill</span></code> (added in GDAL 3.8) uses the <a class="reference external" href="https://en.wikipedia.org/wiki/Flood_fill#Span_filling">Flood Fill</a>
algorithm and will work with concave areas. It requires creating a temporary
dataset and is slower than <code class="docutils literal notranslate"><span class="pre">twopasses</span></code>. When a non-zero value for <a class="reference internal" href="#cmdoption-nearblack-nb"><code class="xref std std-option docutils literal notranslate"><span class="pre">-nb</span></code></a>
is used, <code class="docutils literal notranslate"><span class="pre">twopasses</span></code> is actually called as an initial step of <code class="docutils literal notranslate"><span class="pre">floodfill</span></code>.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-q">
<span class="sig-name descname"><span class="pre">-q</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-nearblack-q" title="Link to this definition"></a></dt>
<dd><p>Suppress progress monitor and other non-error output.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-nearblack-arg-infile">
<span class="sig-name descname"><span class="pre">&lt;infile&gt;</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-nearblack-arg-infile" title="Link to this definition"></a></dt>
<dd><p>The input file.  Any GDAL supported format, any number of bands, normally 8bit
Byte bands.</p>
</dd></dl>

<p>The processing is all done in 8bit (Bytes).</p>
<p>If the output file is omitted, the processed results will be written back
to the input file - which must support update.</p>
</section>
<section id="c-api">
<h2>C API<a class="headerlink" href="#c-api" title="Link to this heading"></a></h2>
<p>This utility is also callable from C with <a class="reference internal" href="../api/gdal_utils.html#_CPPv413GDALNearblackPKc12GDALDatasetH12GDALDatasetHPK20GDALNearblackOptionsPi" title="GDALNearblack"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALNearblack()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">バージョン 2.1 で追加.</span></p>
</div>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pct2rgb.html" class="btn btn-neutral float-right" title="pct2rgb" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gdalwarp.html" class="btn btn-neutral float-left" title="gdalwarp" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2024 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
  </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>