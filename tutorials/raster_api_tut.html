<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ラスターAPIチュートリアル &mdash; GDAL  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../_static/css/gdal.css?v=e152ac3b" />

  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="canonical" href="https://gdal.org/tutorials/raster_api_tut.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=c033477b"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/translations.js?v=91613774"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="Raster driver implementation tutorial" href="raster_driver_tut.html" />
    <link rel="prev" title="チュートリアル" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../index.html">
            
              <img src="../_static/gdalicon.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../download.html">ダウンロード</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programs/index.html">プログラム</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drivers/raster/index.html">ラスタードライバー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drivers/vector/index.html">ベクタードライバー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">ユーザー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">チュートリアル</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#raster">ラスター</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">ラスターAPIチュートリアル</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#opening-the-file">ファイルを開きます</a></li>
<li class="toctree-l4"><a class="reference internal" href="#getting-dataset-information">データセット情報の取得</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fetching-a-raster-band">ラスターバンドの取得</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reading-raster-data">ラスターデータの読み込み</a></li>
<li class="toctree-l4"><a class="reference internal" href="#closing-the-dataset">データセットを閉じる</a></li>
<li class="toctree-l4"><a class="reference internal" href="#techniques-for-creating-files">ファイルを作成するためのテクニック</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-createcopy">CreateCopy()の使用</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-create">Create()の使用</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="raster_driver_tut.html">Raster driver implementation tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="warp_tut.html">GDAL Warp API tutorial (Reprojection, ...)</a></li>
<li class="toctree-l3"><a class="reference internal" href="gdal_grid_tut.html">GDAL Grid Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="geotransforms_tut.html">Geotransform Tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#multidimensional-raster">多次元ラスター</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#vector">ベクター</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#geographic-network-model">ジオグラフィックネットワークモデル</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#projections-and-spatial-reference-systems-tutorial-osr-ogrspatialreference">投影と空間参照システムチュートリアル (OSR - OGRSpatialReference)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">開発</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">コミュニティ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sponsors/index.html">スポンサー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">どのように貢献できますか?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">ライセンス</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html"> GDAL  ドキュメント </a> &raquo;</li>
      
          <li><a href="index.html">チュートリアル</a> &raquo;</li>
      
      <li>ラスターAPIチュートリアル</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit/master/doc/source/tutorials/raster_api_tut.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="raster_driver_tut.html" class="btn btn-neutral float-right" title="Raster driver implementation tutorial" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="チュートリアル" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="raster-api-tutorial">
<span id="raster-api-tut"></span><h1>ラスターAPIチュートリアル<a class="headerlink" href="#raster-api-tutorial" title="Link to this heading"></a></h1>
<section id="opening-the-file">
<h2>ファイルを開きます<a class="headerlink" href="#opening-the-file" title="Link to this heading"></a></h2>
<p>GDALでサポートされているラスターデータストアを開く前に,ドライバを登録する必要があります.各サポートされているフォーマットに対してドライバがあります.通常,これは,すべての既知のドライバを登録しようとする <a class="reference internal" href="../api/raster_c_api.html#_CPPv415GDALAllRegisterv" title="GDALAllRegister"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALAllRegister()</span></code></a> 関数で行われます.これには. <a class="reference internal" href="../api/gdaldriver_cpp.html#_CPPv4N17GDALDriverManager15AutoLoadDriversEv" title="GDALDriverManager::AutoLoadDrivers"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALDriverManager::AutoLoadDrivers()</span></code></a> を使って.soファイルから自動的にロードされるドライバも含まれます.一部のアプリケーションでドライバのセットを制限する必要がある場合は.gdalallregister.cppからのコードを確認すると役立つかもしれません。Pythonは.gdalモジュールがインポートされると自動的にGDALAllRegister()を呼び出します.</p>
<p>ドライバが登録されたら,アプリケーションは,データセットを開くために独立した <a class="reference internal" href="../api/raster_c_api.html#_CPPv48GDALOpenPKc10GDALAccess" title="GDALOpen"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALOpen()</span></code></a> 関数を呼び出すべきです.データセットの名前とアクセスしたいもの(GA_ReadOnly または GA_Update)を渡します.</p>
<p>C++の場合:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;gdal_priv.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;errno.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">EINVAL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">pszFilename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

<span class="w">    </span><span class="n">GDALDatasetUniquePtr</span><span class="w"> </span><span class="n">poDataset</span><span class="p">;</span>
<span class="w">    </span><span class="n">GDALAllRegister</span><span class="p">();</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">GDALAccess</span><span class="w"> </span><span class="n">eAccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GA_ReadOnly</span><span class="p">;</span>
<span class="w">    </span><span class="n">poDataset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALDatasetUniquePtr</span><span class="p">(</span><span class="n">GDALDataset</span><span class="o">::</span><span class="n">FromHandle</span><span class="p">(</span><span class="n">GDALOpen</span><span class="p">(</span><span class="w"> </span><span class="n">pszFilename</span><span class="p">,</span><span class="w"> </span><span class="n">eAccess</span><span class="w"> </span><span class="p">)));</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">poDataset</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="p">...;</span><span class="w"> </span><span class="c1">// handle error</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Cの場合:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;gdal.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;cpl_conv.h&quot;</span><span class="c1"> /* for CPLMalloc() */</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;errno.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">EINVAL</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">pszFilename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

<span class="w">    </span><span class="n">GDALDatasetH</span><span class="w">  </span><span class="n">hDataset</span><span class="p">;</span>
<span class="w">    </span><span class="n">GDALAllRegister</span><span class="p">();</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">GDALAccess</span><span class="w"> </span><span class="n">eAccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GA_ReadOnly</span><span class="p">;</span>
<span class="w">    </span><span class="n">hDataset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALOpen</span><span class="p">(</span><span class="w"> </span><span class="n">pszFilename</span><span class="p">,</span><span class="w"> </span><span class="n">eAccess</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hDataset</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="p">...;</span><span class="w"> </span><span class="c1">// handle error</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Pythonの場合:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">osgeo</span> <span class="kn">import</span> <span class="n">gdal</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GA_ReadOnly</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">dataset</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Note that if <a class="reference internal" href="../api/raster_c_api.html#_CPPv48GDALOpenPKc10GDALAccess" title="GDALOpen"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALOpen()</span></code></a> returns NULL it means the open failed, and that an error messages will already have been emitted via <a class="reference internal" href="../api/cpl.html#_CPPv48CPLError6CPLErr11CPLErrorNumPKcz" title="CPLError"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CPLError()</span></code></a>. If you want to control how errors are reported to the user review the <a class="reference internal" href="../api/cpl.html#_CPPv48CPLError6CPLErr11CPLErrorNumPKcz" title="CPLError"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CPLError()</span></code></a> documentation. Generally speaking all of GDAL uses <a class="reference internal" href="../api/cpl.html#_CPPv48CPLError6CPLErr11CPLErrorNumPKcz" title="CPLError"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CPLError()</span></code></a> for error reporting. Also, note that pszFilename need not actually be the name of a physical file (though it usually is). It's interpretation is driver dependent, and it might be an URL, a filename with additional parameters added at the end controlling the open or almost anything. Please try not to limit GDAL file selection dialogs to only selecting physical files.</p>
</section>
<section id="getting-dataset-information">
<h2>データセット情報の取得<a class="headerlink" href="#getting-dataset-information" title="Link to this heading"></a></h2>
<p>As described in the <a class="reference internal" href="../user/raster_data_model.html#raster-data-model"><span class="std std-ref">ラスターデータモデル</span></a>, a <a class="reference internal" href="../api/gdaldataset_cpp.html#_CPPv411GDALDataset" title="GDALDataset"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">GDALDataset</span></code></a> contains a list of raster bands, all pertaining to the same area, and having the same resolution. It also has metadata, a coordinate system, a georeferencing transform, size of raster and various other information.</p>
<p>特に,一般的な&quot;北向き&quot;画像で回転やシアリングがない場合,ジオリファレンス変換 <a class="reference internal" href="geotransforms_tut.html#geotransforms-tut"><span class="std std-ref">Geotransform Tutorial</span></a> は以下の形式を取ります:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="cm">/* top left x */</span>
<span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="cm">/* w-e pixel resolution */</span>
<span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="cm">/* 0 */</span>
<span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="cm">/* top left y */</span>
<span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="cm">/* 0 */</span>
<span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="cm">/* n-s pixel resolution (negative value) */</span>
</pre></div>
</div>
<p>一般的な場合,これはアフィン変換です.</p>
<p>データセットに関する一般的な情報を表示したい場合は,以下のようにします:</p>
<p>C++の場合:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span><span class="w">        </span><span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Driver: %s/%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">poDataset</span><span class="o">-&gt;</span><span class="n">GetDriver</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetDescription</span><span class="p">(),</span>
<span class="w">        </span><span class="n">poDataset</span><span class="o">-&gt;</span><span class="n">GetDriver</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetMetadataItem</span><span class="p">(</span><span class="w"> </span><span class="n">GDAL_DMD_LONGNAME</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Size is %dx%dx%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">poDataset</span><span class="o">-&gt;</span><span class="n">GetRasterXSize</span><span class="p">(),</span><span class="w"> </span><span class="n">poDataset</span><span class="o">-&gt;</span><span class="n">GetRasterYSize</span><span class="p">(),</span>
<span class="w">        </span><span class="n">poDataset</span><span class="o">-&gt;</span><span class="n">GetRasterCount</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDataset</span><span class="o">-&gt;</span><span class="n">GetProjectionRef</span><span class="p">()</span><span class="w">  </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Projection is `%s&#39;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poDataset</span><span class="o">-&gt;</span><span class="n">GetProjectionRef</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDataset</span><span class="o">-&gt;</span><span class="n">GetGeoTransform</span><span class="p">(</span><span class="w"> </span><span class="n">adfGeoTransform</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">CE_None</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Origin = (%.6f,%.6f)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Pixel Size = (%.6f,%.6f)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Cの場合:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">GDALDriverH</span><span class="w">   </span><span class="n">hDriver</span><span class="p">;</span>
<span class="kt">double</span><span class="w">        </span><span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="n">hDriver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALGetDatasetDriver</span><span class="p">(</span><span class="w"> </span><span class="n">hDataset</span><span class="w"> </span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Driver: %s/%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">GDALGetDriverShortName</span><span class="p">(</span><span class="w"> </span><span class="n">hDriver</span><span class="w"> </span><span class="p">),</span>
<span class="w">        </span><span class="n">GDALGetDriverLongName</span><span class="p">(</span><span class="w"> </span><span class="n">hDriver</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Size is %dx%dx%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">GDALGetRasterXSize</span><span class="p">(</span><span class="w"> </span><span class="n">hDataset</span><span class="w"> </span><span class="p">),</span>
<span class="w">        </span><span class="n">GDALGetRasterYSize</span><span class="p">(</span><span class="w"> </span><span class="n">hDataset</span><span class="w"> </span><span class="p">),</span>
<span class="w">        </span><span class="n">GDALGetRasterCount</span><span class="p">(</span><span class="w"> </span><span class="n">hDataset</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">GDALGetProjectionRef</span><span class="p">(</span><span class="w"> </span><span class="n">hDataset</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Projection is `%s&#39;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">GDALGetProjectionRef</span><span class="p">(</span><span class="w"> </span><span class="n">hDataset</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">GDALGetGeoTransform</span><span class="p">(</span><span class="w"> </span><span class="n">hDataset</span><span class="p">,</span><span class="w"> </span><span class="n">adfGeoTransform</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">CE_None</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Origin = (%.6f,%.6f)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Pixel Size = (%.6f,%.6f)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Pythonの場合:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Driver: </span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">GetDriver</span><span class="p">()</span><span class="o">.</span><span class="n">ShortName</span><span class="p">,</span>
                            <span class="n">dataset</span><span class="o">.</span><span class="n">GetDriver</span><span class="p">()</span><span class="o">.</span><span class="n">LongName</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Size is </span><span class="si">{}</span><span class="s2"> x </span><span class="si">{}</span><span class="s2"> x </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">RasterXSize</span><span class="p">,</span>
                                    <span class="n">dataset</span><span class="o">.</span><span class="n">RasterYSize</span><span class="p">,</span>
                                    <span class="n">dataset</span><span class="o">.</span><span class="n">RasterCount</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Projection is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">GetProjection</span><span class="p">()))</span>
<span class="n">geotransform</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">GetGeoTransform</span><span class="p">()</span>
<span class="k">if</span> <span class="n">geotransform</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Origin = (</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">geotransform</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pixel Size = (</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">geotransform</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">geotransform</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span>
</pre></div>
</div>
</section>
<section id="fetching-a-raster-band">
<h2>ラスターバンドの取得<a class="headerlink" href="#fetching-a-raster-band" title="Link to this heading"></a></h2>
<p>この時点でGDALを介したラスターデータへのアクセスは,1つのバンドずつ行われます.また,メタデータ,ブロックサイズ,カラーテーブルおよびその他の情報がバンドごとに利用可能です.以下のコードは,データセットから <a class="reference internal" href="../api/gdalrasterband_cpp.html#_CPPv414GDALRasterBand" title="GDALRasterBand"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">GDALRasterBand</span></code></a> オブジェクトを取得し(1から <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALRasterBand::GetRasterCount()</span></code> までの番号),それについて少しの情報を表示します.</p>
<p>C++の場合:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">GDALRasterBand</span><span class="w">  </span><span class="o">*</span><span class="n">poBand</span><span class="p">;</span>
<span class="kt">int</span><span class="w">             </span><span class="n">nBlockXSize</span><span class="p">,</span><span class="w"> </span><span class="n">nBlockYSize</span><span class="p">;</span>
<span class="kt">int</span><span class="w">             </span><span class="n">bGotMin</span><span class="p">,</span><span class="w"> </span><span class="n">bGotMax</span><span class="p">;</span>
<span class="kt">double</span><span class="w">          </span><span class="n">adfMinMax</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="n">poBand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poDataset</span><span class="o">-&gt;</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="n">poBand</span><span class="o">-&gt;</span><span class="n">GetBlockSize</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">nBlockXSize</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">nBlockYSize</span><span class="w"> </span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Block=%dx%d Type=%s, ColorInterp=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">nBlockXSize</span><span class="p">,</span><span class="w"> </span><span class="n">nBlockYSize</span><span class="p">,</span>
<span class="w">        </span><span class="n">GDALGetDataTypeName</span><span class="p">(</span><span class="n">poBand</span><span class="o">-&gt;</span><span class="n">GetRasterDataType</span><span class="p">()),</span>
<span class="w">        </span><span class="n">GDALGetColorInterpretationName</span><span class="p">(</span>
<span class="w">            </span><span class="n">poBand</span><span class="o">-&gt;</span><span class="n">GetColorInterpretation</span><span class="p">())</span><span class="w"> </span><span class="p">);</span>
<span class="n">adfMinMax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poBand</span><span class="o">-&gt;</span><span class="n">GetMinimum</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bGotMin</span><span class="w"> </span><span class="p">);</span>
<span class="n">adfMinMax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poBand</span><span class="o">-&gt;</span><span class="n">GetMaximum</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bGotMax</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p">(</span><span class="n">bGotMin</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">bGotMax</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">GDALComputeRasterMinMax</span><span class="p">((</span><span class="n">GDALRasterBandH</span><span class="p">)</span><span class="n">poBand</span><span class="p">,</span><span class="w"> </span><span class="n">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">adfMinMax</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Min=%.3fd, Max=%.3f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">adfMinMax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">adfMinMax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poBand</span><span class="o">-&gt;</span><span class="n">GetOverviewCount</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Band has %d overviews.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poBand</span><span class="o">-&gt;</span><span class="n">GetOverviewCount</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poBand</span><span class="o">-&gt;</span><span class="n">GetColorTable</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Band has a color table with %d entries.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">poBand</span><span class="o">-&gt;</span><span class="n">GetColorTable</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetColorEntryCount</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>Cの場合:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">GDALRasterBandH</span><span class="w"> </span><span class="n">hBand</span><span class="p">;</span>
<span class="kt">int</span><span class="w">             </span><span class="n">nBlockXSize</span><span class="p">,</span><span class="w"> </span><span class="n">nBlockYSize</span><span class="p">;</span>
<span class="kt">int</span><span class="w">             </span><span class="n">bGotMin</span><span class="p">,</span><span class="w"> </span><span class="n">bGotMax</span><span class="p">;</span>
<span class="kt">double</span><span class="w">          </span><span class="n">adfMinMax</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="n">hBand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALGetRasterBand</span><span class="p">(</span><span class="w"> </span><span class="n">hDataset</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="n">GDALGetBlockSize</span><span class="p">(</span><span class="w"> </span><span class="n">hBand</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">nBlockXSize</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">nBlockYSize</span><span class="w"> </span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Block=%dx%d Type=%s, ColorInterp=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">nBlockXSize</span><span class="p">,</span><span class="w"> </span><span class="n">nBlockYSize</span><span class="p">,</span>
<span class="w">        </span><span class="n">GDALGetDataTypeName</span><span class="p">(</span><span class="n">GDALGetRasterDataType</span><span class="p">(</span><span class="n">hBand</span><span class="p">)),</span>
<span class="w">        </span><span class="n">GDALGetColorInterpretationName</span><span class="p">(</span>
<span class="w">            </span><span class="n">GDALGetRasterColorInterpretation</span><span class="p">(</span><span class="n">hBand</span><span class="p">))</span><span class="w"> </span><span class="p">);</span>
<span class="n">adfMinMax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALGetRasterMinimum</span><span class="p">(</span><span class="w"> </span><span class="n">hBand</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bGotMin</span><span class="w"> </span><span class="p">);</span>
<span class="n">adfMinMax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALGetRasterMaximum</span><span class="p">(</span><span class="w"> </span><span class="n">hBand</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">bGotMax</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p">(</span><span class="n">bGotMin</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">bGotMax</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">GDALComputeRasterMinMax</span><span class="p">(</span><span class="w"> </span><span class="n">hBand</span><span class="p">,</span><span class="w"> </span><span class="n">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">adfMinMax</span><span class="w"> </span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Min=%.3fd, Max=%.3f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">adfMinMax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">adfMinMax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">GDALGetOverviewCount</span><span class="p">(</span><span class="n">hBand</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Band has %d overviews.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">GDALGetOverviewCount</span><span class="p">(</span><span class="n">hBand</span><span class="p">));</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">GDALGetRasterColorTable</span><span class="p">(</span><span class="w"> </span><span class="n">hBand</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Band has a color table with %d entries.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">GDALGetColorEntryCount</span><span class="p">(</span>
<span class="w">                </span><span class="n">GDALGetRasterColorTable</span><span class="p">(</span><span class="w"> </span><span class="n">hBand</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>Pythonの場合:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">band</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Band Type=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">GetDataTypeName</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">DataType</span><span class="p">)))</span>

<span class="nb">min</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">GetMinimum</span><span class="p">()</span>
<span class="nb">max</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">GetMaximum</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="nb">min</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">max</span><span class="p">:</span>
    <span class="p">(</span><span class="nb">min</span><span class="p">,</span><span class="nb">max</span><span class="p">)</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ComputeRasterMinMax</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Min=</span><span class="si">{:.3f}</span><span class="s2">, Max=</span><span class="si">{:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span><span class="nb">max</span><span class="p">))</span>

<span class="k">if</span> <span class="n">band</span><span class="o">.</span><span class="n">GetOverviewCount</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Band has </span><span class="si">{}</span><span class="s2"> overviews&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">GetOverviewCount</span><span class="p">()))</span>

<span class="k">if</span> <span class="n">band</span><span class="o">.</span><span class="n">GetRasterColorTable</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Band has a color table with </span><span class="si">{}</span><span class="s2"> entries&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">GetRasterColorTable</span><span class="p">()</span><span class="o">.</span><span class="n">GetCount</span><span class="p">()))</span>
</pre></div>
</div>
</section>
<section id="reading-raster-data">
<h2>ラスターデータの読み込み<a class="headerlink" href="#reading-raster-data" title="Link to this heading"></a></h2>
<p>ラスターデータを読み込む方法はいくつかありますが,最も一般的なのは <a class="reference internal" href="../api/gdalrasterband_cpp.html#_CPPv4N14GDALRasterBand8RasterIOE10GDALRWFlagiiiiPvii12GDALDataType8GSpacing8GSpacingP20GDALRasterIOExtraArg" title="GDALRasterBand::RasterIO"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALRasterBand::RasterIO()</span></code></a> メソッドを介してです.このメソッドは,データ型の変換,アップ/ダウンサンプリングおよびウィンドウ処理を自動的に処理します.以下のコードは,データの最初のスキャンラインを同じサイズのバッファに読み込み,その操作の一環として浮動小数点に変換します.</p>
<p>C++の場合:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="n">pafScanline</span><span class="p">;</span>
<span class="kt">int</span><span class="w">   </span><span class="n">nXSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poBand</span><span class="o">-&gt;</span><span class="n">GetXSize</span><span class="p">();</span>
<span class="n">pafScanline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">CPLMalloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="o">*</span><span class="n">nXSize</span><span class="p">);</span>
<span class="n">poBand</span><span class="o">-&gt;</span><span class="n">RasterIO</span><span class="p">(</span><span class="w"> </span><span class="n">GF_Read</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">nXSize</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                </span><span class="n">pafScanline</span><span class="p">,</span><span class="w"> </span><span class="n">nXSize</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">GDT_Float32</span><span class="p">,</span>
<span class="w">                </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>pafScanlineバッファは,使用しなくなったときにCPLFree()で解放する必要があります.</p>
<p>Cの場合:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="n">pafScanline</span><span class="p">;</span>
<span class="kt">int</span><span class="w">   </span><span class="n">nXSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALGetRasterBandXSize</span><span class="p">(</span><span class="w"> </span><span class="n">hBand</span><span class="w"> </span><span class="p">);</span>
<span class="n">pafScanline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">CPLMalloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="o">*</span><span class="n">nXSize</span><span class="p">);</span>
<span class="n">GDALRasterIO</span><span class="p">(</span><span class="w"> </span><span class="n">hBand</span><span class="p">,</span><span class="w"> </span><span class="n">GF_Read</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">nXSize</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="n">pafScanline</span><span class="p">,</span><span class="w"> </span><span class="n">nXSize</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">GDT_Float32</span><span class="p">,</span>
<span class="w">            </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>pafScanlineバッファは,使用しなくなったときにCPLFree()で解放する必要があります.</p>
<p>Pythonの場合:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">scanline</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">ReadRaster</span><span class="p">(</span><span class="n">xoff</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">yoff</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="n">xsize</span><span class="o">=</span><span class="n">band</span><span class="o">.</span><span class="n">XSize</span><span class="p">,</span> <span class="n">ysize</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                        <span class="n">buf_xsize</span><span class="o">=</span><span class="n">band</span><span class="o">.</span><span class="n">XSize</span><span class="p">,</span> <span class="n">buf_ysize</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                        <span class="n">buf_type</span><span class="o">=</span><span class="n">gdal</span><span class="o">.</span><span class="n">GDT_Float32</span><span class="p">)</span>
</pre></div>
</div>
<p>返されたスキャンラインは文字列型であり,xsize*4バイトの生のバイナリ浮動小数点データが含まれています.これは,標準ライブラリのstructモジュールを使用してPythonの値に変換できます:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">struct</span>
<span class="n">tuple_of_floats</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;f&#39;</span> <span class="o">*</span> <span class="n">b2</span><span class="o">.</span><span class="n">XSize</span><span class="p">,</span> <span class="n">scanline</span><span class="p">)</span>
</pre></div>
</div>
<p>RasterIO呼び出しは以下の引数を取ります.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">CPLErr</span><span class="w"> </span><span class="n">GDALRasterBand</span><span class="o">::</span><span class="n">RasterIO</span><span class="p">(</span><span class="w"> </span><span class="n">GDALRWFlag</span><span class="w"> </span><span class="n">eRWFlag</span><span class="p">,</span>
<span class="w">                                </span><span class="kt">int</span><span class="w"> </span><span class="n">nXOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nYOff</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nXSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nYSize</span><span class="p">,</span>
<span class="w">                                </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pData</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nBufXSize</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nBufYSize</span><span class="p">,</span>
<span class="w">                                </span><span class="n">GDALDataType</span><span class="w"> </span><span class="n">eBufType</span><span class="p">,</span>
<span class="w">                                </span><span class="kt">int</span><span class="w"> </span><span class="n">nPixelSpace</span><span class="p">,</span>
<span class="w">                                </span><span class="kt">int</span><span class="w"> </span><span class="n">nLineSpace</span><span class="w"> </span><span class="p">)</span>
</pre></div>
</div>
<p>eRWFlagの設定に基づいて読み込みまたは書き込みに使用する同じRasterIO()呼び出しが使用されることに注意してください(いずれかGF_ReadまたはGF_Write).nXOff, nYOff, nXSize, nYSize引数は,ディスク上のラスターデータのウィンドウを読み取る(または書き込む)ために使用されます.タイルの境界にある必要はありませんが,アクセスが効率的であるかもしれません.</p>
<p>pDataは,データが読み込まれるまたは書き込まれるメモリバッファです.実際の型は,eBufTypeとして渡されるものである必要があります.例えば,GDT_Float32またはGDT_Byteなどです. RasterIO() 呼び出しは,バッファのデータ型とバンドのデータ型の間の変換を処理します.浮動小数点データを整数に変換する場合,RasterIO()は切り捨てを行い,出力の許容範囲外のソース値を変換する場合,最も近い許容値が使用されます.これは,例えば,GDT_Byteバッファに読み込まれた16ビットデータは,255を超えるすべての値を255にマップし,データはスケーリングされません!</p>
<p>nBufXSizeとnBufYSizeの値は,バッファのサイズを示します.データを完全な解像度で読み込む場合,これはウィンドウサイズと同じになります.ただし,低解像度の概要を読み込む場合,これはディスク上のウィンドウよりも小さく設定することができます.この場合,RasterIO()は,適切な場合には概要を利用して,IOを効率的に行います.</p>
<p>通常はゼロであり,デフォルト値を使用することを示すnPixelSpaceとnLineSpaceです.ただし,他のピクセル間データを含むバッファに読み込むことを許可するために,メモリデータバッファへのアクセスを制御するために使用することができます.</p>
</section>
<section id="closing-the-dataset">
<h2>データセットを閉じる<a class="headerlink" href="#closing-the-dataset" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../api/gdalrasterband_cpp.html#_CPPv414GDALRasterBand" title="GDALRasterBand"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">GDALRasterBand</span></code></a> オブジェクトはデータセットによって所有されており,決してC++のdelete演算子で破棄してはいけません. <a class="reference internal" href="../api/gdaldataset_cpp.html#_CPPv411GDALDataset" title="GDALDataset"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">GDALDataset</span></code></a> は, <a class="reference internal" href="../api/raster_c_api.html#_CPPv49GDALClose12GDALDatasetH" title="GDALClose"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALClose()</span></code></a> を呼び出すことで閉じることができます(Windowsユーザーは,モジュール境界を越えてメモリを割り当ておよび解放する際の既知の問題のため,GDALDatasetに対してdelete演算子を使用することは推奨されません.FAQの関連トピックを参照してください).GDALCloseを呼び出すと,適切なクリーンアップと,保留中の書き込みのフラッシュが行われます.人気のあるフォーマットで開いたデータセットを更新モードで開いた場合にGDALCloseを呼び出し忘れると,その後開くことができなくなる可能性が高いです.</p>
</section>
<section id="techniques-for-creating-files">
<h2>ファイルを作成するためのテクニック<a class="headerlink" href="#techniques-for-creating-files" title="Link to this heading"></a></h2>
<p>GDALでサポートされているフォーマットで新しいファイルを作成することができます.フォーマットドライバが作成をサポートしている場合,ファイルを作成するための2つの一般的なテクニックがあります. CreateCopy() と Create() です. CreateCopyメソッドは,フォーマットドライバ上でCreateCopy()メソッドを呼び出し,コピーする必要があるソースデータセットを渡すことを含みます. Createメソッドは,ドライバ上でCreate()メソッドを呼び出し,すべてのメタデータとラスターデータを明示的に別々の呼び出しで書き込むことを含みます.新しいファイルを作成することをサポートするすべてのドライバは,CreateCopy()メソッドをサポートしていますが,Create()メソッドをサポートしているのはわずかです.</p>
<p>特定のフォーマットがCreateまたはCreateCopyをサポートしているかどうかを判断するには,フォーマットドライバオブジェクトのDCAP_CREATEおよびDCAP_CREATECOPYメタデータを確認することが可能です. <a class="reference internal" href="../api/gdaldriver_cpp.html#_CPPv4N17GDALDriverManager15GetDriverByNameEPKc" title="GDALDriverManager::GetDriverByName"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALDriverManager::GetDriverByName()</span></code></a> を呼び出す前に, <a class="reference internal" href="../api/raster_c_api.html#_CPPv415GDALAllRegisterv" title="GDALAllRegister"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALAllRegister()</span></code></a> が呼び出されていることを確認してください.この例では,ドライバを取得し,Create()および/またはCreateCopy()をサポートしているかどうかを判断します.</p>
<p>C++の場合:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;cpl_string.h&quot;</span>
<span class="p">...</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pszFormat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;GTiff&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">GDALDriver</span><span class="w"> </span><span class="o">*</span><span class="n">poDriver</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">papszMetadata</span><span class="p">;</span>
<span class="w">    </span><span class="n">poDriver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetGDALDriverManager</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="n">pszFormat</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDriver</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">papszMetadata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poDriver</span><span class="o">-&gt;</span><span class="n">GetMetadata</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">CSLFetchBoolean</span><span class="p">(</span><span class="w"> </span><span class="n">papszMetadata</span><span class="p">,</span><span class="w"> </span><span class="n">GDAL_DCAP_CREATE</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Driver %s supports Create() method.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pszFormat</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">CSLFetchBoolean</span><span class="p">(</span><span class="w"> </span><span class="n">papszMetadata</span><span class="p">,</span><span class="w"> </span><span class="n">GDAL_DCAP_CREATECOPY</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Driver %s supports CreateCopy() method.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pszFormat</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>Cの場合:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;cpl_string.h&quot;</span>
<span class="p">...</span>
<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pszFormat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;GTiff&quot;</span><span class="p">;</span>
<span class="n">GDALDriverH</span><span class="w"> </span><span class="n">hDriver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALGetDriverByName</span><span class="p">(</span><span class="w"> </span><span class="n">pszFormat</span><span class="w"> </span><span class="p">);</span>
<span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">papszMetadata</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hDriver</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="n">papszMetadata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALGetMetadata</span><span class="p">(</span><span class="w"> </span><span class="n">hDriver</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">CSLFetchBoolean</span><span class="p">(</span><span class="w"> </span><span class="n">papszMetadata</span><span class="p">,</span><span class="w"> </span><span class="n">GDAL_DCAP_CREATE</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Driver %s supports Create() method.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pszFormat</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">CSLFetchBoolean</span><span class="p">(</span><span class="w"> </span><span class="n">papszMetadata</span><span class="p">,</span><span class="w"> </span><span class="n">GDAL_DCAP_CREATECOPY</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Driver %s supports CreateCopy() method.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pszFormat</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>Pythonの場合:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fileformat</span> <span class="o">=</span> <span class="s2">&quot;GTiff&quot;</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="n">fileformat</span><span class="p">)</span>
<span class="n">metadata</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">GetMetadata</span><span class="p">()</span>
<span class="k">if</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">DCAP_CREATE</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;YES&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Driver </span><span class="si">{}</span><span class="s2"> supports Create() method.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fileformat</span><span class="p">))</span>

<span class="k">if</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">DCAP_CREATECOPY</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;YES&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Driver </span><span class="si">{}</span><span class="s2"> supports CreateCopy() method.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fileformat</span><span class="p">))</span>
</pre></div>
</div>
<p>多くのドライバは読み取り専用であり,Create()またはCreateCopy()をサポートしません.</p>
</section>
<section id="using-createcopy">
<h2>CreateCopy()の使用<a class="headerlink" href="#using-createcopy" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../api/gdaldriver_cpp.html#_CPPv4N10GDALDriver10CreateCopyEPKcP11GDALDataseti12CSLConstList16GDALProgressFuncPv" title="GDALDriver::CreateCopy"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALDriver::CreateCopy()</span></code></a> method can be used fairly simply as most information is collected from the source dataset. However, it includes options for passing format specific creation options, and for reporting progress to the user as a long dataset copy takes place. A simple copy from the a file named pszSrcFilename, to a new file named pszDstFilename using default options on a format whose driver was previously fetched might look like this:</p>
<p>C++の場合:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">GDALDataset</span><span class="w"> </span><span class="o">*</span><span class="n">poSrcDS</span><span class="w"> </span><span class="o">=</span>
<span class="p">(</span><span class="n">GDALDataset</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">GDALOpen</span><span class="p">(</span><span class="w"> </span><span class="n">pszSrcFilename</span><span class="p">,</span><span class="w"> </span><span class="n">GA_ReadOnly</span><span class="w"> </span><span class="p">);</span>
<span class="n">GDALDataset</span><span class="w"> </span><span class="o">*</span><span class="n">poDstDS</span><span class="p">;</span>
<span class="n">poDstDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poDriver</span><span class="o">-&gt;</span><span class="n">CreateCopy</span><span class="p">(</span><span class="w"> </span><span class="n">pszDstFilename</span><span class="p">,</span><span class="w"> </span><span class="n">poSrcDS</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="p">,</span>
<span class="w">                                </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="cm">/* Once we&#39;re done, close properly the dataset */</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDstDS</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">GDALClose</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">GDALDatasetH</span><span class="p">)</span><span class="w"> </span><span class="n">poDstDS</span><span class="w"> </span><span class="p">);</span>
<span class="n">GDALClose</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">GDALDatasetH</span><span class="p">)</span><span class="w"> </span><span class="n">poSrcDS</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>Cの場合:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">GDALDatasetH</span><span class="w"> </span><span class="n">hSrcDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALOpen</span><span class="p">(</span><span class="w"> </span><span class="n">pszSrcFilename</span><span class="p">,</span><span class="w"> </span><span class="n">GA_ReadOnly</span><span class="w"> </span><span class="p">);</span>
<span class="n">GDALDatasetH</span><span class="w"> </span><span class="n">hDstDS</span><span class="p">;</span>
<span class="n">hDstDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALCreateCopy</span><span class="p">(</span><span class="w"> </span><span class="n">hDriver</span><span class="p">,</span><span class="w"> </span><span class="n">pszDstFilename</span><span class="p">,</span><span class="w"> </span><span class="n">hSrcDS</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="p">,</span>
<span class="w">                        </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="cm">/* Once we&#39;re done, close properly the dataset */</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hDstDS</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">GDALClose</span><span class="p">(</span><span class="w"> </span><span class="n">hDstDS</span><span class="w"> </span><span class="p">);</span>
<span class="n">GDALClose</span><span class="p">(</span><span class="n">hSrcDS</span><span class="p">);</span>
</pre></div>
</div>
<p>Pythonの場合:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">src_ds</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">src_filename</span><span class="p">)</span>
<span class="n">dst_ds</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">CreateCopy</span><span class="p">(</span><span class="n">dst_filename</span><span class="p">,</span> <span class="n">src_ds</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># Once we&#39;re done, close properly the dataset</span>
<span class="n">dst_ds</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">src_ds</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
<p>CreateCopy()メソッドは書き込み可能なデータセットを返し,データセットを書き込みおよびディスクにフラッシュするために適切に閉じる必要があります. Pythonの場合,これは&quot;dst_ds&quot;がスコープ外になると自動的に発生します. CreateCopy()呼び出しの宛先ファイル名の直後に使用されるbStrictオプションのFALSE(または0)値は,宛先データセットが入力データセットと完全に一致するように作成できない場合でも,CreateCopy()呼び出しが致命的なエラーなしで続行することを示します.これは,出力フォーマットが入力データセットのピクセルデータ型をサポートしていない場合や,宛先がジオリファレンスの書き込みをサポートしていない場合などが考えられます.</p>
<p>より複雑な場合は,作成オプションを渡し,次のように事前定義された進行モニタを使用することができます:</p>
<p>C++の場合:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;cpl_string.h&quot;</span>
<span class="p">...</span>
<span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">papszOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="n">papszOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CSLSetNameValue</span><span class="p">(</span><span class="w"> </span><span class="n">papszOptions</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;TILED&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;YES&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="n">papszOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CSLSetNameValue</span><span class="p">(</span><span class="w"> </span><span class="n">papszOptions</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;COMPRESS&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PACKBITS&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="n">poDstDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poDriver</span><span class="o">-&gt;</span><span class="n">CreateCopy</span><span class="p">(</span><span class="w"> </span><span class="n">pszDstFilename</span><span class="p">,</span><span class="w"> </span><span class="n">poSrcDS</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="p">,</span>
<span class="w">                                </span><span class="n">papszOptions</span><span class="p">,</span><span class="w"> </span><span class="n">GDALTermProgress</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="cm">/* Once we&#39;re done, close properly the dataset */</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDstDS</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">GDALClose</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">GDALDatasetH</span><span class="p">)</span><span class="w"> </span><span class="n">poDstDS</span><span class="w"> </span><span class="p">);</span>
<span class="n">CSLDestroy</span><span class="p">(</span><span class="w"> </span><span class="n">papszOptions</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>Cの場合:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;cpl_string.h&quot;</span>
<span class="p">...</span>
<span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">papszOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="n">papszOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CSLSetNameValue</span><span class="p">(</span><span class="w"> </span><span class="n">papszOptions</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;TILED&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;YES&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="n">papszOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CSLSetNameValue</span><span class="p">(</span><span class="w"> </span><span class="n">papszOptions</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;COMPRESS&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PACKBITS&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="n">hDstDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALCreateCopy</span><span class="p">(</span><span class="w"> </span><span class="n">hDriver</span><span class="p">,</span><span class="w"> </span><span class="n">pszDstFilename</span><span class="p">,</span><span class="w"> </span><span class="n">hSrcDS</span><span class="p">,</span><span class="w"> </span><span class="n">FALSE</span><span class="p">,</span>
<span class="w">                        </span><span class="n">papszOptions</span><span class="p">,</span><span class="w"> </span><span class="n">GDALTermProgres</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="cm">/* Once we&#39;re done, close properly the dataset */</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hDstDS</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">GDALClose</span><span class="p">(</span><span class="w"> </span><span class="n">hDstDS</span><span class="w"> </span><span class="p">);</span>
<span class="n">CSLDestroy</span><span class="p">(</span><span class="w"> </span><span class="n">papszOptions</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>Pythonの場合:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">src_ds</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">src_filename</span><span class="p">)</span>
<span class="n">dst_ds</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">CreateCopy</span><span class="p">(</span><span class="n">dst_filename</span><span class="p">,</span> <span class="n">src_ds</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;TILED=YES&quot;</span><span class="p">,</span> <span class="s2">&quot;COMPRESS=PACKBITS&quot;</span><span class="p">])</span>
<span class="c1"># Once we&#39;re done, close properly the dataset</span>
<span class="n">dst_ds</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">src_ds</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</section>
<section id="using-create">
<h2>Create()の使用<a class="headerlink" href="#using-create" title="Link to this heading"></a></h2>
<p>既存のファイルを新しいファイルにエクスポートするだけでない状況では,通常は  <a class="reference internal" href="../api/gdaldriver_cpp.html#_CPPv4N10GDALDriver6CreateEPKciii12GDALDataType12CSLConstList" title="GDALDriver::Create"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALDriver::Create()</span></code></a> メソッドを使用する必要があります(ただし,仮想ファイルやインメモリファイルを使用することでいくつかの興味深いオプションが可能です).Create()メソッドは,CreateCopy()と同様のオプションリストを取りますが,画像サイズ,バンド数およびバンドタイプは明示的に指定する必要があります.</p>
<p>C++の場合:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">GDALDataset</span><span class="w"> </span><span class="o">*</span><span class="n">poDstDS</span><span class="p">;</span>
<span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">papszOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="n">poDstDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poDriver</span><span class="o">-&gt;</span><span class="n">Create</span><span class="p">(</span><span class="w"> </span><span class="n">pszDstFilename</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">GDT_Byte</span><span class="p">,</span>
<span class="w">                            </span><span class="n">papszOptions</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>Cの場合:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">GDALDatasetH</span><span class="w"> </span><span class="n">hDstDS</span><span class="p">;</span>
<span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">papszOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="n">hDstDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALCreate</span><span class="p">(</span><span class="w"> </span><span class="n">hDriver</span><span class="p">,</span><span class="w"> </span><span class="n">pszDstFilename</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">GDT_Byte</span><span class="p">,</span>
<span class="w">                    </span><span class="n">papszOptions</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>Pythonの場合:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dst_ds</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="n">dst_filename</span><span class="p">,</span> <span class="n">xsize</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">ysize</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span>
                    <span class="n">bands</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">eType</span><span class="o">=</span><span class="n">gdal</span><span class="o">.</span><span class="n">GDT_Byte</span><span class="p">)</span>
</pre></div>
</div>
<p>データセットが正常に作成されると,すべての適切なメタデータとラスターデータをファイルに書き込む必要があります.これは使用方法によって異なりますが,投影,ジオリファレンスおよびラスターデータを持つ単純なケースがここで説明されています.</p>
<p>C++の場合:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span><span class="w"> </span><span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">444720</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3751320</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">-30</span><span class="w"> </span><span class="p">};</span>
<span class="n">OGRSpatialReference</span><span class="w"> </span><span class="n">oSRS</span><span class="p">;</span>
<span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pszSRS_WKT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="n">GDALRasterBand</span><span class="w"> </span><span class="o">*</span><span class="n">poBand</span><span class="p">;</span>
<span class="n">GByte</span><span class="w"> </span><span class="n">abyRaster</span><span class="p">[</span><span class="mi">512</span><span class="o">*</span><span class="mi">512</span><span class="p">];</span>
<span class="n">poDstDS</span><span class="o">-&gt;</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="w"> </span><span class="n">adfGeoTransform</span><span class="w"> </span><span class="p">);</span>
<span class="n">oSRS</span><span class="p">.</span><span class="n">SetUTM</span><span class="p">(</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="n">TRUE</span><span class="w"> </span><span class="p">);</span>
<span class="n">oSRS</span><span class="p">.</span><span class="n">SetWellKnownGeogCS</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;NAD27&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="n">oSRS</span><span class="p">.</span><span class="n">exportToWkt</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pszSRS_WKT</span><span class="w"> </span><span class="p">);</span>
<span class="n">poDstDS</span><span class="o">-&gt;</span><span class="n">SetProjection</span><span class="p">(</span><span class="w"> </span><span class="n">pszSRS_WKT</span><span class="w"> </span><span class="p">);</span>
<span class="n">CPLFree</span><span class="p">(</span><span class="w"> </span><span class="n">pszSRS_WKT</span><span class="w"> </span><span class="p">);</span>
<span class="n">poBand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poDstDS</span><span class="o">-&gt;</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">poBand</span><span class="o">-&gt;</span><span class="n">RasterIO</span><span class="p">(</span><span class="w"> </span><span class="n">GF_Write</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span>
<span class="w">                </span><span class="n">abyRaster</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="n">GDT_Byte</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">);</span>
<span class="cm">/* Once we&#39;re done, close properly the dataset */</span>
<span class="n">GDALClose</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">GDALDatasetH</span><span class="p">)</span><span class="w"> </span><span class="n">poDstDS</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>Cの場合:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span><span class="w"> </span><span class="n">adfGeoTransform</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">444720</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3751320</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">-30</span><span class="w"> </span><span class="p">};</span>
<span class="n">OGRSpatialReferenceH</span><span class="w"> </span><span class="n">hSRS</span><span class="p">;</span>
<span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pszSRS_WKT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="n">GDALRasterBandH</span><span class="w"> </span><span class="n">hBand</span><span class="p">;</span>
<span class="n">GByte</span><span class="w"> </span><span class="n">abyRaster</span><span class="p">[</span><span class="mi">512</span><span class="o">*</span><span class="mi">512</span><span class="p">];</span>
<span class="n">GDALSetGeoTransform</span><span class="p">(</span><span class="w"> </span><span class="n">hDstDS</span><span class="p">,</span><span class="w"> </span><span class="n">adfGeoTransform</span><span class="w"> </span><span class="p">);</span>
<span class="n">hSRS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OSRNewSpatialReference</span><span class="p">(</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="n">OSRSetUTM</span><span class="p">(</span><span class="w"> </span><span class="n">hSRS</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="n">TRUE</span><span class="w"> </span><span class="p">);</span>
<span class="n">OSRSetWellKnownGeogCS</span><span class="p">(</span><span class="w"> </span><span class="n">hSRS</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;NAD27&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="n">OSRExportToWkt</span><span class="p">(</span><span class="w"> </span><span class="n">hSRS</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pszSRS_WKT</span><span class="w"> </span><span class="p">);</span>
<span class="n">OSRDestroySpatialReference</span><span class="p">(</span><span class="w"> </span><span class="n">hSRS</span><span class="w"> </span><span class="p">);</span>
<span class="n">GDALSetProjection</span><span class="p">(</span><span class="w"> </span><span class="n">hDstDS</span><span class="p">,</span><span class="w"> </span><span class="n">pszSRS_WKT</span><span class="w"> </span><span class="p">);</span>
<span class="n">CPLFree</span><span class="p">(</span><span class="w"> </span><span class="n">pszSRS_WKT</span><span class="w"> </span><span class="p">);</span>
<span class="n">hBand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALGetRasterBand</span><span class="p">(</span><span class="w"> </span><span class="n">hDstDS</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="n">GDALRasterIO</span><span class="p">(</span><span class="w"> </span><span class="n">hBand</span><span class="p">,</span><span class="w"> </span><span class="n">GF_Write</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span>
<span class="w">            </span><span class="n">abyRaster</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w"> </span><span class="n">GDT_Byte</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">);</span>
<span class="cm">/* Once we&#39;re done, close properly the dataset */</span>
<span class="n">GDALClose</span><span class="p">(</span><span class="w"> </span><span class="n">hDstDS</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>Pythonの場合:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">osgeo</span> <span class="kn">import</span> <span class="n">osr</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="n">dst_ds</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">([</span><span class="mi">444720</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3751320</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span><span class="p">])</span>
<span class="n">srs</span> <span class="o">=</span> <span class="n">osr</span><span class="o">.</span><span class="n">SpatialReference</span><span class="p">()</span>
<span class="n">srs</span><span class="o">.</span><span class="n">SetUTM</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">srs</span><span class="o">.</span><span class="n">SetWellKnownGeogCS</span><span class="p">(</span><span class="s2">&quot;NAD27&quot;</span><span class="p">)</span>
<span class="n">dst_ds</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">srs</span><span class="o">.</span><span class="n">ExportToWkt</span><span class="p">())</span>
<span class="n">raster</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="n">dst_ds</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">WriteArray</span><span class="p">(</span><span class="n">raster</span><span class="p">)</span>
<span class="c1"># Once we&#39;re done, close properly the dataset</span>
<span class="n">dst_ds</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="raster_driver_tut.html" class="btn btn-neutral float-right" title="Raster driver implementation tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="チュートリアル" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2024 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
  </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>