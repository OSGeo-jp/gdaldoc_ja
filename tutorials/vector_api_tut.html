<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vector API tutorial &mdash; GDAL  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../_static/css/gdal.css?v=e152ac3b" />

  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="canonical" href="https://gdal.org/tutorials/vector_api_tut.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=c033477b"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/translations.js?v=4dbe4bdc"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="Vector driver implementation tutorial" href="vector_driver_tut.html" />
    <link rel="prev" title="Multidimensional raster API tutorial" href="multidimensional_api_tut.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../index.html">
            
              <img src="../_static/gdalicon.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../download.html">ダウンロード</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programs/index.html">プログラム</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drivers/raster/index.html">Raster drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drivers/vector/index.html">Vector drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">ユーザー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">チュートリアル</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#raster">ラスター</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#multidimensional-raster">多次元ラスター</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#vector">ベクター</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Vector API tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#reading-from-ogr">Reading From OGR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reading-from-ogr-using-the-arrow-c-stream-data-interface">Reading From OGR using the Arrow C Stream data interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#writing-to-ogr">Writing To OGR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#writing-to-ogr-using-the-arrow-c-data-interface">Writing to OGR using the Arrow C Data interface</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="vector_driver_tut.html">Vector driver implementation tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="vector_python_driver.html">Vector driver in Python implementation tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#geographic-network-model">空間ネットワークモデル</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#projections-and-spatial-reference-systems-tutorial-osr-ogrspatialreference">投影法と空間参照システムチュートリアル (OSR - OGRSpatialReference)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sponsors/index.html">Sponsors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">How to contribute?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html"> GDAL  ドキュメント </a> &raquo;</li>
      
          <li><a href="index.html">チュートリアル</a> &raquo;</li>
      
      <li>Vector API tutorial</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit/master/doc/source/tutorials/vector_api_tut.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="vector_driver_tut.html" class="btn btn-neutral float-right" title="Vector driver implementation tutorial" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="multidimensional_api_tut.html" class="btn btn-neutral float-left" title="Multidimensional raster API tutorial" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="vector-api-tutorial">
<span id="vector-api-tut"></span><h1>Vector API tutorial<a class="headerlink" href="#vector-api-tutorial" title="Link to this heading"></a></h1>
<p>This document is intended to document using the OGR C++ classes to read
and write data from a file.  It is strongly advised that the reader first
review the <a class="reference internal" href="../user/vector_data_model.html#vector-data-model"><span class="std std-ref">Vector Data Model</span></a> document describing
the key classes and their roles in OGR.</p>
<p>It also includes code snippets for the corresponding functions in C and Python.</p>
<section id="reading-from-ogr">
<h2>Reading From OGR<a class="headerlink" href="#reading-from-ogr" title="Link to this heading"></a></h2>
<p>For purposes of demonstrating reading with OGR, we will construct a small
utility for dumping point layers from an OGR data source to stdout in
comma-delimited format.</p>
<p>Initially it is necessary to register all the format drivers that are desired.
This is normally accomplished by calling <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALAllRegister()</span></code> which registers
all format drivers built into GDAL/OGR.</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ogrsf_frmts.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>

<span class="p">{</span>
<span class="w">    </span><span class="n">GDALAllRegister</span><span class="p">();</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;gdal.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>

<span class="p">{</span>
<span class="w">    </span><span class="n">GDALAllRegister</span><span class="p">();</span>
</pre></div>
</div>
<p>Next we need to open the input OGR datasource.  Datasources can be files,
RDBMSes, directories full of files, or even remote web services depending on
the driver being used.  However, the datasource name is always a single
string.  In this case we are hardcoded to open a particular shapefile.
The second argument (GDAL_OF_VECTOR) tells the <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGROpen()</span></code> method
that we want a vector driver to be use and that don't require update access.
On failure NULL is returned, and
we report an error.</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">GDALDataset</span><span class="w">       </span><span class="o">*</span><span class="n">poDS</span><span class="p">;</span>

<span class="n">poDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">GDALDataset</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">GDALOpenEx</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;point.shp&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">GDAL_OF_VECTOR</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDS</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Open failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">GDALDatasetH</span><span class="w"> </span><span class="n">hDS</span><span class="p">;</span>

<span class="n">hDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALOpenEx</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;point.shp&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">GDAL_OF_VECTOR</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hDS</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Open failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A GDALDataset can potentially have many layers associated with it.  The
number of layers available can be queried with <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALDataset::GetLayerCount()</span></code>
and individual layers fetched by index using <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALDataset::GetLayer()</span></code>.
However, we will just fetch the layer by name.</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OGRLayer</span><span class="w">  </span><span class="o">*</span><span class="n">poLayer</span><span class="p">;</span>

<span class="n">poLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poDS</span><span class="o">-&gt;</span><span class="n">GetLayerByName</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;point&quot;</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">OGRLayerH</span><span class="w"> </span><span class="n">hLayer</span><span class="p">;</span>

<span class="n">hLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALDatasetGetLayerByName</span><span class="p">(</span><span class="w"> </span><span class="n">hDS</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;point&quot;</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>Now we want to start reading features from the layer.  Before we start we
could assign an attribute or spatial filter to the layer to restrict the set
of feature we get back, but for now we are interested in getting all features.</p>
<p>With GDAL 2.3 and C++11:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">poFeature</span><span class="o">:</span><span class="w"> </span><span class="n">poLayer</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
</pre></div>
</div>
<p>With GDAL 2.3 and C:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">OGR_FOR_EACH_FEATURE_BEGIN</span><span class="p">(</span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">hLayer</span><span class="p">)</span>
<span class="p">{</span>
</pre></div>
</div>
<p>If using older GDAL versions, while it isn't strictly necessary in this
circumstance since we are starting fresh with the layer, it is often wise
to call <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRLayer::ResetReading()</span></code> to ensure we are starting at the beginning of
the layer.  We iterate through all the features in the layer using
OGRLayer::GetNextFeature().  It will return NULL when we run out of features.</p>
<p>With GDAL &lt; 2.3 and C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OGRFeature</span><span class="w"> </span><span class="o">*</span><span class="n">poFeature</span><span class="p">;</span>

<span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">ResetReading</span><span class="p">();</span>
<span class="k">while</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">poFeature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">GetNextFeature</span><span class="p">())</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
</pre></div>
</div>
<p>With GDAL &lt; 2.3 and C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">OGRFeatureH</span><span class="w"> </span><span class="n">hFeature</span><span class="p">;</span>

<span class="n">OGR_L_ResetReading</span><span class="p">(</span><span class="n">hLayer</span><span class="p">);</span>
<span class="k">while</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">hFeature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_L_GetNextFeature</span><span class="p">(</span><span class="n">hLayer</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
</pre></div>
</div>
<p>In order to dump all the attribute fields of the feature, it is helpful
to get the <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">OGRFeatureDefn</span></code>.  This is an object, associated with the layer,
containing the definitions of all the fields.  We loop over all the fields,
and fetch and report the attributes based on their type.</p>
<p>With GDAL 2.3 and C++11:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">oField</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">poFeature</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">IsUnset</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;(unset),&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">IsNull</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;(null),&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">switch</span><span class="p">(</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">GetType</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OFTInteger</span><span class="p">:</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%d,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">GetInteger</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OFTInteger64</span><span class="p">:</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="n">CPL_FRMT_GIB</span><span class="w"> </span><span class="s">&quot;,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">GetInteger64</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OFTReal</span><span class="p">:</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%.3f,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">GetDouble</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OFTString</span><span class="p">:</span>
<span class="w">            </span><span class="c1">// GetString() returns a C string</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">GetString</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">default</span><span class="o">:</span>
<span class="w">            </span><span class="c1">// Note: we use GetAsString() and not GetString(), since</span>
<span class="w">            </span><span class="c1">// the later assumes the field type to be OFTString while the</span>
<span class="w">            </span><span class="c1">// former will do a conversion from the original type to string.</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">GetAsString</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With GDAL &lt; 2.3 and C++ :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">OGRFeatureDefn</span><span class="w"> </span><span class="o">*</span><span class="n">poFDefn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">GetLayerDefn</span><span class="p">();</span>
<span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">poFDefn</span><span class="o">-&gt;</span><span class="n">GetFieldCount</span><span class="p">();</span><span class="w"> </span><span class="n">iField</span><span class="o">++</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">IsFieldSet</span><span class="p">(</span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;(unset),&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">IsFieldNull</span><span class="p">(</span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;(null),&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">OGRFieldDefn</span><span class="w"> </span><span class="o">*</span><span class="n">poFieldDefn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poFDefn</span><span class="o">-&gt;</span><span class="n">GetFieldDefn</span><span class="p">(</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="p">);</span>

<span class="w">    </span><span class="k">switch</span><span class="p">(</span><span class="w"> </span><span class="n">poFieldDefn</span><span class="o">-&gt;</span><span class="n">GetType</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OFTInteger</span><span class="p">:</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%d,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetFieldAsInteger</span><span class="p">(</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OFTInteger64</span><span class="p">:</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="n">CPL_FRMT_GIB</span><span class="w"> </span><span class="s">&quot;,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetFieldAsInteger64</span><span class="p">(</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OFTReal</span><span class="p">:</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%.3f,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetFieldAsDouble</span><span class="p">(</span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OFTString</span><span class="p">:</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetFieldAsString</span><span class="p">(</span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">default</span><span class="o">:</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetFieldAsString</span><span class="p">(</span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">OGRFeatureDefnH</span><span class="w"> </span><span class="n">hFDefn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_L_GetLayerDefn</span><span class="p">(</span><span class="n">hLayer</span><span class="p">);</span>
<span class="kt">int</span><span class="w"> </span><span class="n">iField</span><span class="p">;</span>

<span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">OGR_FD_GetFieldCount</span><span class="p">(</span><span class="n">hFDefn</span><span class="p">);</span><span class="w"> </span><span class="n">iField</span><span class="o">++</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">OGRFieldDefnH</span><span class="w"> </span><span class="n">hFieldDefn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_FD_GetFieldDefn</span><span class="p">(</span><span class="w"> </span><span class="n">hFDefn</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">OGR_F_IsFieldSet</span><span class="p">(</span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;(unset),&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_F_IsFieldNull</span><span class="p">(</span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;(null),&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">switch</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_Fld_GetType</span><span class="p">(</span><span class="n">hFieldDefn</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OFTInteger</span><span class="p">:</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%d,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_F_GetFieldAsInteger</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OFTInteger64</span><span class="p">:</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="n">CPL_FRMT_GIB</span><span class="w"> </span><span class="s">&quot;,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_F_GetFieldAsInteger64</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OFTReal</span><span class="p">:</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%.3f,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_F_GetFieldAsDouble</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">OFTString</span><span class="p">:</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_F_GetFieldAsString</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">default</span><span class="o">:</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_F_GetFieldAsString</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There are a few more field types than those explicitly handled above, but
a reasonable representation of them can be fetched with the
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRFeature::GetFieldAsString()</span></code> method.  In fact we could shorten the above
by using GetFieldAsString() for all the types.</p>
<p>Next we want to extract the geometry from the feature, and write out the point
geometry x and y.   Geometries are returned as a generic <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">OGRGeometry</span></code> pointer.
We then determine the specific geometry type, and if it is a point, we
cast it to point and operate on it.  If it is something else we write
placeholders.</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OGRGeometry</span><span class="w"> </span><span class="o">*</span><span class="n">poGeometry</span><span class="p">;</span>

<span class="n">poGeometry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetGeometryRef</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poGeometry</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span>
<span class="w">        </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">wkbFlatten</span><span class="p">(</span><span class="n">poGeometry</span><span class="o">-&gt;</span><span class="n">getGeometryType</span><span class="p">())</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">wkbPoint</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#if GDAL_VERSION_NUM &gt;= GDAL_COMPUTE_VERSION(2,3,0)</span>
<span class="w">    </span><span class="n">OGRPoint</span><span class="w"> </span><span class="o">*</span><span class="n">poPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poGeometry</span><span class="o">-&gt;</span><span class="n">toPoint</span><span class="p">();</span>
<span class="cp">#else</span>
<span class="w">    </span><span class="n">OGRPoint</span><span class="w"> </span><span class="o">*</span><span class="n">poPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">OGRPoint</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">poGeometry</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%.3f,%3.f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poPoint</span><span class="o">-&gt;</span><span class="n">getX</span><span class="p">(),</span><span class="w"> </span><span class="n">poPoint</span><span class="o">-&gt;</span><span class="n">getY</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;no point geometry</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">OGRGeometryH</span><span class="w"> </span><span class="n">hGeometry</span><span class="p">;</span>

<span class="n">hGeometry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_F_GetGeometryRef</span><span class="p">(</span><span class="n">hFeature</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hGeometry</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span>
<span class="w">        </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">wkbFlatten</span><span class="p">(</span><span class="n">OGR_G_GetGeometryType</span><span class="p">(</span><span class="n">hGeometry</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">wkbPoint</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%.3f,%3.f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_G_GetX</span><span class="p">(</span><span class="n">hGeometry</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">OGR_G_GetY</span><span class="p">(</span><span class="n">hGeometry</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;no point geometry</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">wkbFlatten()</span></code> macro is used above to convert the type for a wkbPoint25D
(a point with a z coordinate) into the base 2D geometry type code (wkbPoint).
For each 2D geometry type there is a corresponding 2.5D type code.  The 2D
and 2.5D geometry cases are handled by the same C++ class, so our code will
handle 2D or 3D cases properly.</p>
<p>Several geometry fields can be associated to a feature.</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OGRGeometry</span><span class="w"> </span><span class="o">*</span><span class="n">poGeometry</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">iGeomField</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">nGeomFieldCount</span><span class="p">;</span>

<span class="n">nGeomFieldCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetGeomFieldCount</span><span class="p">();</span>
<span class="k">for</span><span class="p">(</span><span class="n">iGeomField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">iGeomField</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">nGeomFieldCount</span><span class="p">;</span><span class="w"> </span><span class="n">iGeomField</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">poGeometry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetGeomFieldRef</span><span class="p">(</span><span class="n">iGeomField</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poGeometry</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span>
<span class="w">            </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">wkbFlatten</span><span class="p">(</span><span class="n">poGeometry</span><span class="o">-&gt;</span><span class="n">getGeometryType</span><span class="p">())</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">wkbPoint</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="cp">#if GDAL_VERSION_NUM &gt;= GDAL_COMPUTE_VERSION(2,3,0)</span>
<span class="w">        </span><span class="n">OGRPoint</span><span class="w"> </span><span class="o">*</span><span class="n">poPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poGeometry</span><span class="o">-&gt;</span><span class="n">toPoint</span><span class="p">();</span>
<span class="cp">#else</span>
<span class="w">        </span><span class="n">OGRPoint</span><span class="w"> </span><span class="o">*</span><span class="n">poPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">OGRPoint</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">poGeometry</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%.3f,%3.f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poPoint</span><span class="o">-&gt;</span><span class="n">getX</span><span class="p">(),</span><span class="w"> </span><span class="n">poPoint</span><span class="o">-&gt;</span><span class="n">getY</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;no point geometry</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">OGRGeometryH</span><span class="w"> </span><span class="n">hGeometry</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">iGeomField</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">nGeomFieldCount</span><span class="p">;</span>

<span class="n">nGeomFieldCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_F_GetGeomFieldCount</span><span class="p">(</span><span class="n">hFeature</span><span class="p">);</span>
<span class="k">for</span><span class="p">(</span><span class="n">iGeomField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">iGeomField</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">nGeomFieldCount</span><span class="p">;</span><span class="w"> </span><span class="n">iGeomField</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">hGeometry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_F_GetGeomFieldRef</span><span class="p">(</span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iGeomField</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hGeometry</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span>
<span class="w">            </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">wkbFlatten</span><span class="p">(</span><span class="n">OGR_G_GetGeometryType</span><span class="p">(</span><span class="n">hGeometry</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">wkbPoint</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%.3f,%3.f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_G_GetX</span><span class="p">(</span><span class="n">hGeometry</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
<span class="w">                </span><span class="n">OGR_G_GetY</span><span class="p">(</span><span class="n">hGeometry</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;no point geometry</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nGeomFieldCount</span> <span class="o">=</span> <span class="n">feat</span><span class="o">.</span><span class="n">GetGeomFieldCount</span><span class="p">()</span>
<span class="k">for</span> <span class="n">iGeomField</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nGeomFieldCount</span><span class="p">):</span>
    <span class="n">geom</span> <span class="o">=</span> <span class="n">feat</span><span class="o">.</span><span class="n">GetGeomFieldRef</span><span class="p">(</span><span class="n">iGeomField</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">geom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">geom</span><span class="o">.</span><span class="n">GetGeometryType</span><span class="p">()</span> <span class="o">==</span> <span class="n">ogr</span><span class="o">.</span><span class="n">wkbPoint</span><span class="p">:</span>
        <span class="nb">print</span> <span class="s2">&quot;</span><span class="si">%.3f</span><span class="s2">, </span><span class="si">%.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">geom</span><span class="o">.</span><span class="n">GetX</span><span class="p">(),</span> <span class="n">geom</span><span class="o">.</span><span class="n">GetY</span><span class="p">()</span> <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span> <span class="s2">&quot;no point geometry</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Note that <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRFeature::GetGeometryRef()</span></code> and <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRFeature::GetGeomFieldRef()</span></code>
return a pointer to
the internal geometry owned by the OGRFeature.  There we don't actually
delete the return geometry.</p>
<p>With GDAL 2.3 and C++11, the looping over features is simply terminated by
a closing curly bracket.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="p">}</span>
</pre></div>
</div>
<p>With GDAL 2.3 and C, the looping over features is simply terminated by
the following.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="p">}</span>
<span class="n">OGR_FOR_EACH_FEATURE_END</span><span class="p">(</span><span class="n">hFeature</span><span class="p">)</span>
</pre></div>
</div>
<p>For GDAL &lt; 2.3, as the <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRLayer::GetNextFeature()</span></code> method
returns a copy of the feature that is now owned by us.  So at the end of
use we must free the feature.  We could just &quot;delete&quot; it, but this can cause
problems in windows builds where the GDAL DLL has a different &quot;heap&quot; from the
main program.  To be on the safe side we use a GDAL function to delete the
feature.</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">OGRFeature</span><span class="o">::</span><span class="n">DestroyFeature</span><span class="p">(</span><span class="w"> </span><span class="n">poFeature</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">OGR_F_Destroy</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The OGRLayer returned by <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALDataset::GetLayerByName()</span></code> is also a reference
to an internal layer owned by the GDALDataset so we don't need to delete
it.  But we do need to delete the datasource in order to close the input file.
Once again we do this with a custom delete method to avoid special win32
heap issues.</p>
<p>In C/C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">GDALClose</span><span class="p">(</span><span class="w"> </span><span class="n">poDS</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>All together our program looks like this.</p>
<p>With GDAL 2.3 and C++11 :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ogrsf_frmts.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>

<span class="p">{</span>
<span class="w">    </span><span class="n">GDALAllRegister</span><span class="p">();</span>

<span class="w">    </span><span class="n">GDALDatasetUniquePtr</span><span class="w"> </span><span class="n">poDS</span><span class="p">(</span><span class="n">GDALDataset</span><span class="o">::</span><span class="n">Open</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;point.shp&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">GDAL_OF_VECTOR</span><span class="p">));</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDS</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Open failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">OGRLayer</span><span class="o">*</span><span class="w"> </span><span class="n">poLayer</span><span class="o">:</span><span class="w"> </span><span class="n">poDS</span><span class="o">-&gt;</span><span class="n">GetLayers</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">poFeature</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">poLayer</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">oField</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">poFeature</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">IsUnset</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;(unset),&quot;</span><span class="p">);</span>
<span class="w">                    </span><span class="k">continue</span><span class="p">;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">IsNull</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;(null),&quot;</span><span class="p">);</span>
<span class="w">                    </span><span class="k">continue</span><span class="p">;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="k">switch</span><span class="p">(</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">GetType</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="k">case</span><span class="w"> </span><span class="no">OFTInteger</span><span class="p">:</span>
<span class="w">                        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%d,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">GetInteger</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">                        </span><span class="k">break</span><span class="p">;</span>
<span class="w">                    </span><span class="k">case</span><span class="w"> </span><span class="no">OFTInteger64</span><span class="p">:</span>
<span class="w">                        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="n">CPL_FRMT_GIB</span><span class="w"> </span><span class="s">&quot;,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">GetInteger64</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">                        </span><span class="k">break</span><span class="p">;</span>
<span class="w">                    </span><span class="k">case</span><span class="w"> </span><span class="no">OFTReal</span><span class="p">:</span>
<span class="w">                        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%.3f,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">GetDouble</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">                        </span><span class="k">break</span><span class="p">;</span>
<span class="w">                    </span><span class="k">case</span><span class="w"> </span><span class="no">OFTString</span><span class="p">:</span>
<span class="w">                        </span><span class="c1">// GetString() returns a C string</span>
<span class="w">                        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">GetString</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">                        </span><span class="k">break</span><span class="p">;</span>
<span class="w">                    </span><span class="k">default</span><span class="o">:</span>
<span class="w">                        </span><span class="c1">// Note: we use GetAsString() and not GetString(), since</span>
<span class="w">                        </span><span class="c1">// the later assumes the field type to be OFTString while the</span>
<span class="w">                        </span><span class="c1">// former will do a conversion from the original type to string.</span>
<span class="w">                        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">oField</span><span class="p">.</span><span class="n">GetAsString</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">                        </span><span class="k">break</span><span class="p">;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="k">const</span><span class="w"> </span><span class="n">OGRGeometry</span><span class="w"> </span><span class="o">*</span><span class="n">poGeometry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetGeometryRef</span><span class="p">();</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poGeometry</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span>
<span class="w">                    </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">wkbFlatten</span><span class="p">(</span><span class="n">poGeometry</span><span class="o">-&gt;</span><span class="n">getGeometryType</span><span class="p">())</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">wkbPoint</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="k">const</span><span class="w"> </span><span class="n">OGRPoint</span><span class="w"> </span><span class="o">*</span><span class="n">poPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poGeometry</span><span class="o">-&gt;</span><span class="n">toPoint</span><span class="p">();</span>

<span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%.3f,%3.f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poPoint</span><span class="o">-&gt;</span><span class="n">getX</span><span class="p">(),</span><span class="w"> </span><span class="n">poPoint</span><span class="o">-&gt;</span><span class="n">getY</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">else</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;no point geometry</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ogrsf_frmts.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>

<span class="p">{</span>
<span class="w">    </span><span class="n">GDALAllRegister</span><span class="p">();</span>

<span class="w">    </span><span class="n">GDALDataset</span><span class="w"> </span><span class="o">*</span><span class="n">poDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">GDALDataset</span><span class="o">*&gt;</span><span class="p">(</span>
<span class="w">        </span><span class="n">GDALOpenEx</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;point.shp&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">GDAL_OF_VECTOR</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">));</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDS</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Open failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">OGRLayer</span><span class="w">  </span><span class="o">*</span><span class="n">poLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poDS</span><span class="o">-&gt;</span><span class="n">GetLayerByName</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;point&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">OGRFeatureDefn</span><span class="w"> </span><span class="o">*</span><span class="n">poFDefn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">GetLayerDefn</span><span class="p">();</span>

<span class="w">    </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">ResetReading</span><span class="p">();</span>
<span class="w">    </span><span class="n">OGRFeature</span><span class="w"> </span><span class="o">*</span><span class="n">poFeature</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">poFeature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">GetNextFeature</span><span class="p">())</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">poFDefn</span><span class="o">-&gt;</span><span class="n">GetFieldCount</span><span class="p">();</span><span class="w"> </span><span class="n">iField</span><span class="o">++</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">IsFieldSet</span><span class="p">(</span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;(unset),&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="k">continue</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">IsFieldNull</span><span class="p">(</span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;(null),&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="k">continue</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="n">OGRFieldDefn</span><span class="w"> </span><span class="o">*</span><span class="n">poFieldDefn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poFDefn</span><span class="o">-&gt;</span><span class="n">GetFieldDefn</span><span class="p">(</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="p">);</span>

<span class="w">            </span><span class="k">switch</span><span class="p">(</span><span class="w"> </span><span class="n">poFieldDefn</span><span class="o">-&gt;</span><span class="n">GetType</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="no">OFTInteger</span><span class="p">:</span>
<span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%d,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetFieldAsInteger</span><span class="p">(</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">                    </span><span class="k">break</span><span class="p">;</span>
<span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="no">OFTInteger64</span><span class="p">:</span>
<span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="n">CPL_FRMT_GIB</span><span class="w"> </span><span class="s">&quot;,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetFieldAsInteger64</span><span class="p">(</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">                    </span><span class="k">break</span><span class="p">;</span>
<span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="no">OFTReal</span><span class="p">:</span>
<span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%.3f,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetFieldAsDouble</span><span class="p">(</span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">                    </span><span class="k">break</span><span class="p">;</span>
<span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="no">OFTString</span><span class="p">:</span>
<span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetFieldAsString</span><span class="p">(</span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">                    </span><span class="k">break</span><span class="p">;</span>
<span class="w">                </span><span class="k">default</span><span class="o">:</span>
<span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetFieldAsString</span><span class="p">(</span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">                    </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">OGRGeometry</span><span class="w"> </span><span class="o">*</span><span class="n">poGeometry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">GetGeometryRef</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poGeometry</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span>
<span class="w">                </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">wkbFlatten</span><span class="p">(</span><span class="n">poGeometry</span><span class="o">-&gt;</span><span class="n">getGeometryType</span><span class="p">())</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">wkbPoint</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">OGRPoint</span><span class="w"> </span><span class="o">*</span><span class="n">poPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">OGRPoint</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">poGeometry</span><span class="p">;</span>

<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%.3f,%3.f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poPoint</span><span class="o">-&gt;</span><span class="n">getX</span><span class="p">(),</span><span class="w"> </span><span class="n">poPoint</span><span class="o">-&gt;</span><span class="n">getY</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;no point geometry</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">OGRFeature</span><span class="o">::</span><span class="n">DestroyFeature</span><span class="p">(</span><span class="w"> </span><span class="n">poFeature</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">GDALClose</span><span class="p">(</span><span class="w"> </span><span class="n">poDS</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;gdal.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>

<span class="p">{</span>
<span class="w">    </span><span class="n">GDALAllRegister</span><span class="p">();</span>

<span class="w">    </span><span class="n">GDALDatasetH</span><span class="w"> </span><span class="n">hDS</span><span class="p">;</span>
<span class="w">    </span><span class="n">OGRLayerH</span><span class="w"> </span><span class="n">hLayer</span><span class="p">;</span>
<span class="w">    </span><span class="n">OGRFeatureH</span><span class="w"> </span><span class="n">hFeature</span><span class="p">;</span>
<span class="w">    </span><span class="n">OGRFeatureDefnH</span><span class="w"> </span><span class="n">hFDefn</span><span class="p">;</span>

<span class="w">    </span><span class="n">hDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALOpenEx</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;point.shp&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">GDAL_OF_VECTOR</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hDS</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Open failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">hLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALDatasetGetLayerByName</span><span class="p">(</span><span class="w"> </span><span class="n">hDS</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;point&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">hFDefn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_L_GetLayerDefn</span><span class="p">(</span><span class="n">hLayer</span><span class="p">);</span>

<span class="w">    </span><span class="n">OGR_L_ResetReading</span><span class="p">(</span><span class="n">hLayer</span><span class="p">);</span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">hFeature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_L_GetNextFeature</span><span class="p">(</span><span class="n">hLayer</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">iField</span><span class="p">;</span>
<span class="w">        </span><span class="n">OGRGeometryH</span><span class="w"> </span><span class="n">hGeometry</span><span class="p">;</span>

<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">OGR_FD_GetFieldCount</span><span class="p">(</span><span class="n">hFDefn</span><span class="p">);</span><span class="w"> </span><span class="n">iField</span><span class="o">++</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">OGRFieldDefnH</span><span class="w"> </span><span class="n">hFieldDefn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_FD_GetFieldDefn</span><span class="p">(</span><span class="w"> </span><span class="n">hFDefn</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="p">);</span>

<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">OGR_F_IsFieldSet</span><span class="p">(</span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;(unset),&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="k">continue</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_F_IsFieldNull</span><span class="p">(</span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;(null),&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="k">continue</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="k">switch</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_Fld_GetType</span><span class="p">(</span><span class="n">hFieldDefn</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="no">OFTInteger</span><span class="p">:</span>
<span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%d,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_F_GetFieldAsInteger</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">                    </span><span class="k">break</span><span class="p">;</span>
<span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="no">OFTInteger64</span><span class="p">:</span>
<span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="n">CPL_FRMT_GIB</span><span class="w"> </span><span class="s">&quot;,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_F_GetFieldAsInteger64</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">                    </span><span class="k">break</span><span class="p">;</span>
<span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="no">OFTReal</span><span class="p">:</span>
<span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%.3f,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_F_GetFieldAsDouble</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">                    </span><span class="k">break</span><span class="p">;</span>
<span class="w">                </span><span class="k">case</span><span class="w"> </span><span class="no">OFTString</span><span class="p">:</span>
<span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_F_GetFieldAsString</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">                    </span><span class="k">break</span><span class="p">;</span>
<span class="w">                </span><span class="k">default</span><span class="o">:</span>
<span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s,&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_F_GetFieldAsString</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">iField</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">                    </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">hGeometry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_F_GetGeometryRef</span><span class="p">(</span><span class="n">hFeature</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hGeometry</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span>
<span class="w">            </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">wkbFlatten</span><span class="p">(</span><span class="n">OGR_G_GetGeometryType</span><span class="p">(</span><span class="n">hGeometry</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">wkbPoint</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%.3f,%3.f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_G_GetX</span><span class="p">(</span><span class="n">hGeometry</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">OGR_G_GetY</span><span class="p">(</span><span class="n">hGeometry</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;no point geometry</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">OGR_F_Destroy</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">GDALClose</span><span class="p">(</span><span class="w"> </span><span class="n">hDS</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">osgeo</span> <span class="kn">import</span> <span class="n">gdal</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">OpenEx</span><span class="p">(</span> <span class="s2">&quot;point.shp&quot;</span><span class="p">,</span> <span class="n">gdal</span><span class="o">.</span><span class="n">OF_VECTOR</span> <span class="p">)</span>
<span class="k">if</span> <span class="n">ds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s2">&quot;Open failed.</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>

<span class="n">lyr</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GetLayerByName</span><span class="p">(</span> <span class="s2">&quot;point&quot;</span> <span class="p">)</span>

<span class="n">lyr</span><span class="o">.</span><span class="n">ResetReading</span><span class="p">()</span>

<span class="k">for</span> <span class="n">feat</span> <span class="ow">in</span> <span class="n">lyr</span><span class="p">:</span>

    <span class="n">feat_defn</span> <span class="o">=</span> <span class="n">lyr</span><span class="o">.</span><span class="n">GetLayerDefn</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">feat_defn</span><span class="o">.</span><span class="n">GetFieldCount</span><span class="p">()):</span>
        <span class="n">field_defn</span> <span class="o">=</span> <span class="n">feat_defn</span><span class="o">.</span><span class="n">GetFieldDefn</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="c1"># Tests below can be simplified with just :</span>
        <span class="c1"># print feat.GetField(i)</span>
        <span class="k">if</span> <span class="n">field_defn</span><span class="o">.</span><span class="n">GetType</span><span class="p">()</span> <span class="o">==</span> <span class="n">ogr</span><span class="o">.</span><span class="n">OFTInteger</span> <span class="ow">or</span> <span class="n">field_defn</span><span class="o">.</span><span class="n">GetType</span><span class="p">()</span> <span class="o">==</span> <span class="n">ogr</span><span class="o">.</span><span class="n">OFTInteger64</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">feat</span><span class="o">.</span><span class="n">GetFieldAsInteger64</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">field_defn</span><span class="o">.</span><span class="n">GetType</span><span class="p">()</span> <span class="o">==</span> <span class="n">ogr</span><span class="o">.</span><span class="n">OFTReal</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s2">&quot;</span><span class="si">%.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">feat</span><span class="o">.</span><span class="n">GetFieldAsDouble</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">field_defn</span><span class="o">.</span><span class="n">GetType</span><span class="p">()</span> <span class="o">==</span> <span class="n">ogr</span><span class="o">.</span><span class="n">OFTString</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">feat</span><span class="o">.</span><span class="n">GetFieldAsString</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">feat</span><span class="o">.</span><span class="n">GetFieldAsString</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="n">geom</span> <span class="o">=</span> <span class="n">feat</span><span class="o">.</span><span class="n">GetGeometryRef</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">geom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">geom</span><span class="o">.</span><span class="n">GetGeometryType</span><span class="p">()</span> <span class="o">==</span> <span class="n">ogr</span><span class="o">.</span><span class="n">wkbPoint</span><span class="p">:</span>
        <span class="nb">print</span> <span class="s2">&quot;</span><span class="si">%.3f</span><span class="s2">, </span><span class="si">%.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">geom</span><span class="o">.</span><span class="n">GetX</span><span class="p">(),</span> <span class="n">geom</span><span class="o">.</span><span class="n">GetY</span><span class="p">()</span> <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span> <span class="s2">&quot;no point geometry</span><span class="se">\n</span><span class="s2">&quot;</span>

<span class="n">ds</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</section>
<section id="reading-from-ogr-using-the-arrow-c-stream-data-interface">
<span id="vector-api-tut-arrow-stream"></span><h2>Reading From OGR using the Arrow C Stream data interface<a class="headerlink" href="#reading-from-ogr-using-the-arrow-c-stream-data-interface" title="Link to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.6.</span></p>
</div>
<p>Instead of retrieving features one at a time, it is also possible to retrieve
them by batches, with a column-oriented memory layout, using the
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRLayer::GetArrowStream()</span></code> method. Note that this method is more
difficult to use than the traditional <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRLayer::GetNextFeature()</span></code> approach,
and is only advised when compatibility with the
<a class="reference external" href="https://arrow.apache.org/docs/format/CStreamInterface.html">Apache Arrow C Stream interface</a>
is needed, or when column-oriented consumption of layers is required.</p>
<p>Pending using an helper library, consumption of the Arrow C Stream interface
requires reading of the following documents:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://arrow.apache.org/docs/format/CStreamInterface.html">Arrow C Stream interface</a></p></li>
<li><p><a class="reference external" href="https://arrow.apache.org/docs/format/CDataInterface.html">Arrow C data interface</a></p></li>
<li><p><a class="reference external" href="https://arrow.apache.org/docs/format/Columnar.html">Arrow Columnar Format</a>.</p></li>
</ul>
<p>The Arrow C Stream interface interface consists of a set of C structures, ArrowArrayStream, that provides
two main callbacks to get:</p>
<ul class="simple">
<li><p>a ArrowSchema with the get_schema() callback. A ArrowSchema describes a set of
field descriptions (name, type, metadata). All OGR data types have a corresponding
Arrow data type.</p></li>
<li><p>a sequence of ArrowArray with the get_next() callback. A ArrowArray captures
a set of values for a specific column/field in a subset of features.
This is the equivalent of a
<a class="reference external" href="https://arrow.apache.org/docs/python/pandas.html#series">Series</a> in a Pandas DataFrame.
This is a potentially hiearchical structure that can aggregate
sub arrays, and in OGR usage, the main array will be a StructArray which is
the collection of OGR attribute and geometry fields.
The layout of buffers and children arrays per data type is detailed in the
<a class="reference external" href="https://arrow.apache.org/docs/format/Columnar.html">Arrow Columnar Format</a>.</p></li>
</ul>
<p>If a layer consists of 4 features with 2 fields (one of integer type, one of
floating-point type), the representation as a ArrowArray is <em>conceptually</em> the
following one:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">array</span><span class="p">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">buffers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">};</span>
<span class="n">array</span><span class="p">.</span><span class="n">children</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">buffers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">1.2</span><span class="p">,</span><span class="w"> </span><span class="mf">2.3</span><span class="p">,</span><span class="w"> </span><span class="mf">3.4</span><span class="p">,</span><span class="w"> </span><span class="mf">4.5</span><span class="w"> </span><span class="p">};</span>
</pre></div>
</div>
<p>The content of a whole layer can be seen as a sequence of record batches, each
record batches being an ArrowArray of a subset of features. Instead of iterating
over individual features, one iterates over a batch of several features at
once.</p>
<p>The ArrowArrayStream, ArrowSchema, ArrowArray structures are defined in a
ogr_recordbatch.h public header file, directly derived from
<a class="reference external" href="https://github.com/apache/arrow/blob/main/cpp/src/arrow/c/abi.h">https://github.com/apache/arrow/blob/main/cpp/src/arrow/c/abi.h</a>
to get API/ABI compatibility with Apache Arrow C++. This header file must be
explicitly included when the related array batch API is used.</p>
<p>The GetArrowStream() method has the following signature:</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">virtual</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">OGRLayer::GetArrowStream</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">ArrowArrayStream</span><span class="o">*</span><span class="w"> </span><span class="n">out_stream</span><span class="p">,</span>
<span class="w">                                      </span><span class="n">CSLConstList</span><span class="w"> </span><span class="n">papszOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>It is also available in the C API as <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGR_L_GetArrowStream()</span></code>.</p>
<p>out_stream is a pointer to a ArrowArrayStream structure, that can be in a uninitialized
state (the method will ignore any initial content).</p>
<p>On successful return, and when the stream interfaces is no longer needed, it must must
be freed with out_stream-&gt;release(out_stream).</p>
<p>There are extra precautions to take into account in a OGR context. Unless
otherwise specified by a particular driver implementation, the ArrowArrayStream
structure, and the ArrowSchema or ArrowArray objects its callbacks have returned,
should no longer be used (except for potentially being released) after the
OGRLayer from which it was initialized has been destroyed (typically at dataset
closing). Furthermore, unless otherwise specified by a particular driver
implementation, only one ArrowArrayStream can be active at a time on
a given layer (that is the last active one must be explicitly released before
a next one is asked). Changing filter state, ignored columns, modifying the schema
or using ResetReading()/GetNextFeature() while using a ArrowArrayStream is
strongly discouraged and may lead to unexpected results. As a rule of thumb,
no OGRLayer methods that affect the state of a layer should be called on a
layer, while an ArrowArrayStream on it is active.</p>
<p>The papszOptions that may be provided is a NULL terminated list of key=value
strings, that may be driver specific.</p>
<p>OGRLayer has a base implementation of GetArrowStream() that is such:</p>
<ul>
<li><p>The get_schema() callback returns a schema whose top-level object returned is
of type Struct, and whose children consist of the FID column, all OGR attribute
fields and geometry fields to Arrow fields.
The FID column may be omitted by providing the INCLUDE_FID=NO option.</p>
<p>When get_schema() returns 0, and the schema is no longer needed, it must
be released with the following procedure, to take into account that it might
have been released by other code, as documented in the Arrow C data
interface:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">out_schema</span><span class="o">-&gt;</span><span class="n">release</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">out_schema</span><span class="o">-&gt;</span><span class="n">release</span><span class="p">(</span><span class="n">out_schema</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>The get_next() callback retrieve the next record batch over the layer.</p>
<p>out_array is a pointer to a ArrowArray structure, that can be in a uninitialized
state (the method will ignore any initial content).</p>
<p>The default implementation uses GetNextFeature() internally to retrieve batches
of up to 65,536 features (configurable with the MAX_FEATURES_IN_BATCH=num option).
The starting address of buffers allocated by the
default implementation is aligned on 64-byte boundaries.</p>
<p>The default implementation outputs geometries as WKB in a binary field,
whose corresponding entry in the schema is marked with the metadata item
<code class="docutils literal notranslate"><span class="pre">ARROW:extension:name</span></code> set to <code class="docutils literal notranslate"><span class="pre">ogc.wkb</span></code>. Specialized implementations may output
by default other formats (particularly the Arrow driver that can return geometries
encoded according to the GeoArrow specification (using a list of coordinates).
The GEOMETRY_ENCODING=WKB option can be passed to force the use of WKB (through
the default implementation)</p>
<p>The method may take into account ignored fields set with SetIgnoredFields() (the
default implementation does), and should take into account filters set with
SetSpatialFilter() and SetAttributeFilter(). Note however that specialized implementations
may fallback to the default (slower) implementation when filters are set.</p>
<p>Mixing calls to GetNextFeature() and get_next() is not recommended, as
the behavior will be unspecified (but it should not crash).</p>
<p>When get_next() returns 0, and the array is no longer needed, it must
be released with the following procedure, to take into account that it might
have been released by other code, as documented in the Arrow C data
interface:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">out_array</span><span class="o">-&gt;</span><span class="n">release</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="n">out_array</span><span class="o">-&gt;</span><span class="n">release</span><span class="p">(</span><span class="n">out_array</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>Drivers that have a specialized implementation advertise the
new OLCFastGetArrowStream layer capability.</p>
<p>Using directly (as a producer or a consumer) a ArrowArray is admittedly not
trivial, and requires good intimacy with the Arrow C data interface and columnar
array specifications, to know, in which buffer of an array, data is to be read,
which data type void* buffers should be cast to, how to use buffers that contain
null/not_null information, how to use offset buffers for data types of type List, etc.
The study of the gdal_array._RecordBatchAsNumpy() method of the SWIG Python
bindings (<a href="#id2"><span class="problematic" id="id3">:source_file:`swig/include/gdal_array.i`</span></a>)
can give a good hint of how to use an ArrowArray object, in conjunction
with the associated ArrowSchema.</p>
<p>The below example illustrates how to read the content of a layer that consists
of a integer field and a geometry field:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;gdal_priv.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ogr_api.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ogrsf_frmts.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ogr_recordbatch.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cassert&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">GDALAllRegister</span><span class="p">();</span>
<span class="w">    </span><span class="n">GDALDataset</span><span class="o">*</span><span class="w"> </span><span class="n">poDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALDataset</span><span class="o">::</span><span class="n">Open</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDS</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">CPLError</span><span class="p">(</span><span class="n">CE_Failure</span><span class="p">,</span><span class="w"> </span><span class="n">CPLE_AppDefined</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Open() failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">OGRLayer</span><span class="o">*</span><span class="w"> </span><span class="n">poLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poDS</span><span class="o">-&gt;</span><span class="n">GetLayer</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">OGRLayerH</span><span class="w"> </span><span class="n">hLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGRLayer</span><span class="o">::</span><span class="n">ToHandle</span><span class="p">(</span><span class="n">poLayer</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Get the Arrow stream</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">ArrowArrayStream</span><span class="w"> </span><span class="n">stream</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">OGR_L_GetArrowStream</span><span class="p">(</span><span class="n">hLayer</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="k">nullptr</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">CPLError</span><span class="p">(</span><span class="n">CE_Failure</span><span class="p">,</span><span class="w"> </span><span class="n">CPLE_AppDefined</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;OGR_L_GetArrowStream() failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">delete</span><span class="w"> </span><span class="n">poDS</span><span class="p">;</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Get the schema</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">ArrowSchema</span><span class="w"> </span><span class="n">schema</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">stream</span><span class="p">.</span><span class="n">get_schema</span><span class="p">(</span><span class="o">&amp;</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">schema</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">CPLError</span><span class="p">(</span><span class="n">CE_Failure</span><span class="p">,</span><span class="w"> </span><span class="n">CPLE_AppDefined</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;get_schema() failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">stream</span><span class="p">.</span><span class="n">release</span><span class="p">(</span><span class="o">&amp;</span><span class="n">stream</span><span class="p">);</span>
<span class="w">        </span><span class="k">delete</span><span class="w"> </span><span class="n">poDS</span><span class="p">;</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Check that the returned schema consists of one int64 field (for FID),</span>
<span class="w">    </span><span class="c1">// one int32 field and one binary/wkb field</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">schema</span><span class="p">.</span><span class="n">n_children</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">||</span>
<span class="w">        </span><span class="n">strcmp</span><span class="p">(</span><span class="n">schema</span><span class="p">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">format</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;l&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="c1">// int64 -&gt; FID</span>
<span class="w">        </span><span class="n">strcmp</span><span class="p">(</span><span class="n">schema</span><span class="p">.</span><span class="n">children</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">format</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;i&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="c1">// int32</span>
<span class="w">        </span><span class="n">strcmp</span><span class="p">(</span><span class="n">schema</span><span class="p">.</span><span class="n">children</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">format</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;z&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w">  </span><span class="c1">// binary for WKB</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">CPLError</span><span class="p">(</span><span class="n">CE_Failure</span><span class="p">,</span><span class="w"> </span><span class="n">CPLE_AppDefined</span><span class="p">,</span>
<span class="w">                 </span><span class="s">&quot;Layer has not the expected schema required by this example.&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">schema</span><span class="p">.</span><span class="n">release</span><span class="p">(</span><span class="o">&amp;</span><span class="n">schema</span><span class="p">);</span>
<span class="w">        </span><span class="n">stream</span><span class="p">.</span><span class="n">release</span><span class="p">(</span><span class="o">&amp;</span><span class="n">stream</span><span class="p">);</span>
<span class="w">        </span><span class="k">delete</span><span class="w"> </span><span class="n">poDS</span><span class="p">;</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">schema</span><span class="p">.</span><span class="n">release</span><span class="p">(</span><span class="o">&amp;</span><span class="n">schema</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Iterate over batches</span>
<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">struct</span><span class="w"> </span><span class="nc">ArrowArray</span><span class="w"> </span><span class="n">array</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">stream</span><span class="p">.</span><span class="n">get_next</span><span class="p">(</span><span class="o">&amp;</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">array</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">||</span>
<span class="w">            </span><span class="n">array</span><span class="p">.</span><span class="n">release</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">assert</span><span class="p">(</span><span class="n">array</span><span class="p">.</span><span class="n">n_children</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Cast the array-&gt;children[].buffers[] to the appropriate data types</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">int_child</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="n">children</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="w">        </span><span class="n">assert</span><span class="p">(</span><span class="n">int_child</span><span class="o">-&gt;</span><span class="n">n_buffers</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="o">*</span><span class="w"> </span><span class="n">int_field_not_null</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">int_child</span><span class="o">-&gt;</span><span class="n">buffers</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="kt">int32_t</span><span class="o">*</span><span class="w"> </span><span class="n">int_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">int32_t</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">int_child</span><span class="o">-&gt;</span><span class="n">buffers</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">wkb_child</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="n">children</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="w">        </span><span class="n">assert</span><span class="p">(</span><span class="n">wkb_child</span><span class="o">-&gt;</span><span class="n">n_buffers</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="o">*</span><span class="w"> </span><span class="n">wkb_field_not_null</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">wkb_child</span><span class="o">-&gt;</span><span class="n">buffers</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="kt">int32_t</span><span class="o">*</span><span class="w"> </span><span class="n">wkb_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">int32_t</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">wkb_child</span><span class="o">-&gt;</span><span class="n">buffers</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="o">*</span><span class="w"> </span><span class="n">wkb_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">wkb_child</span><span class="o">-&gt;</span><span class="n">buffers</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>

<span class="w">        </span><span class="c1">// Lambda to check if a field is set for a given feature index</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">IsSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="o">*</span><span class="w"> </span><span class="n">buffer_not_null</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">buffer_not_null</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">buffer_not_null</span><span class="p">[</span><span class="n">i</span><span class="o">/</span><span class="mi">8</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="mi">8</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">        </span><span class="c1">// Iterate through features of a batch</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">IsSet</span><span class="p">(</span><span class="n">int_field_not_null</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;int_field[%lld] = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">int_field</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">            </span><span class="k">else</span>
<span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;int_field[%lld] = null</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>

<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">IsSet</span><span class="p">(</span><span class="n">wkb_field_not_null</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">wkb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wkb_field</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">wkb_offset</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">                </span><span class="k">const</span><span class="w"> </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wkb_offset</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wkb_offset</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">                </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">wkt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="w">                </span><span class="n">OGRGeometry</span><span class="o">*</span><span class="w"> </span><span class="n">geom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="w">                </span><span class="n">OGRGeometryFactory</span><span class="o">::</span><span class="n">createFromWkb</span><span class="p">(</span><span class="n">wkb</span><span class="p">,</span><span class="w"> </span><span class="k">nullptr</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">geom</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="p">);</span>
<span class="w">                </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">geom</span><span class="w"> </span><span class="p">)</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="n">geom</span><span class="o">-&gt;</span><span class="n">exportToWkt</span><span class="p">(</span><span class="o">&amp;</span><span class="n">wkt</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;wkb_field[%lld] = %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">wkt</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">wkt</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;invalid geometry&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="n">CPLFree</span><span class="p">(</span><span class="n">wkt</span><span class="p">);</span>
<span class="w">                </span><span class="k">delete</span><span class="w"> </span><span class="n">geom</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">else</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;wkb_field[%lld] = null</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Release memory taken by the batch</span>
<span class="w">        </span><span class="n">array</span><span class="p">.</span><span class="n">release</span><span class="p">(</span><span class="o">&amp;</span><span class="n">array</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Release stream and dataset</span>
<span class="w">    </span><span class="n">stream</span><span class="p">.</span><span class="n">release</span><span class="p">(</span><span class="o">&amp;</span><span class="n">stream</span><span class="p">);</span>
<span class="w">    </span><span class="k">delete</span><span class="w"> </span><span class="n">poDS</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To write features by batches using an ArrowArray, consult <a class="reference internal" href="#vector-api-tut-arrow-write"><span class="std std-ref">Writing to OGR using the Arrow C Data interface</span></a>.</p>
</section>
<section id="writing-to-ogr">
<h2>Writing To OGR<a class="headerlink" href="#writing-to-ogr" title="Link to this heading"></a></h2>
<p>As an example of writing through OGR, we will do roughly the opposite of the
above.  A short program that reads comma separated values from input text
will be written to a point shapefile via OGR.</p>
<p>As usual, we start by registering all the drivers, and then fetch the
Shapefile driver as we will need it to create our output file.</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ogrsf_frmts.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pszDriverName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ESRI Shapefile&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">GDALDriver</span><span class="w"> </span><span class="o">*</span><span class="n">poDriver</span><span class="p">;</span>

<span class="w">    </span><span class="n">GDALAllRegister</span><span class="p">();</span>

<span class="w">    </span><span class="n">poDriver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetGDALDriverManager</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="n">pszDriverName</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDriver</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s driver not available.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pszDriverName</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ogr_api.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pszDriverName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ESRI Shapefile&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">GDALDriver</span><span class="w"> </span><span class="o">*</span><span class="n">poDriver</span><span class="p">;</span>

<span class="w">    </span><span class="n">GDALAllRegister</span><span class="p">();</span>

<span class="w">    </span><span class="n">poDriver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">GDALDriver</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">GDALGetDriverByName</span><span class="p">(</span><span class="n">pszDriverName</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDriver</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s driver not available.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pszDriverName</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
<p>Next we create the datasource.  The ESRI Shapefile driver allows us to create
a directory full of shapefiles, or a single shapefile as a datasource.  In
this case we will explicitly create a single file by including the extension
in the name.  Other drivers behave differently.
The second, third, fourth and fifth argument are related to raster dimensions
(in case the driver has raster capabilities). The last argument to
the call is a list of option values, but we will just be using defaults in
this case.  Details of the options supported are also format specific.</p>
<p>In C ++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">GDALDataset</span><span class="w"> </span><span class="o">*</span><span class="n">poDS</span><span class="p">;</span>

<span class="n">poDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poDriver</span><span class="o">-&gt;</span><span class="n">Create</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;point_out.shp&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">GDT_Unknown</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDS</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Creation of output file failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">GDALDatasetH</span><span class="w"> </span><span class="n">hDS</span><span class="p">;</span>

<span class="n">hDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALCreate</span><span class="p">(</span><span class="w"> </span><span class="n">hDriver</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;point_out.shp&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">GDT_Unknown</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hDS</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Creation of output file failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now we create the output layer.  In this case since the datasource is a
single file, we can only have one layer.  We pass wkbPoint to specify the
type of geometry supported by this layer.  In this case we aren't passing
any coordinate system information or other special layer creation options.</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OGRLayer</span><span class="w"> </span><span class="o">*</span><span class="n">poLayer</span><span class="p">;</span>

<span class="n">poLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poDS</span><span class="o">-&gt;</span><span class="n">CreateLayer</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;point_out&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">wkbPoint</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poLayer</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Layer creation failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">OGRLayerH</span><span class="w"> </span><span class="n">hLayer</span><span class="p">;</span>

<span class="n">hLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALDatasetCreateLayer</span><span class="p">(</span><span class="w"> </span><span class="n">hDS</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;point_out&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">wkbPoint</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hLayer</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Layer creation failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now that the layer exists, we need to create any attribute fields that should
appear on the layer.  Fields must be added to the layer before any features
are written.  To create a field we initialize an <code class="xref cpp cpp-union docutils literal notranslate"><span class="pre">OGRField</span></code> object with the
information about the field.  In the case of Shapefiles, the field width and
precision is significant in the creation of the output .dbf file, so we
set it specifically, though generally the defaults are OK.  For this example
we will just have one attribute, a name string associated with the x,y point.</p>
<p>Note that the template OGRField we pass to <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRLayer::CreateField()</span></code> is copied internally.
We retain ownership of the object.</p>
<p>In C++:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OGRFieldDefn</span><span class="w"> </span><span class="n">oField</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OFTString</span><span class="w"> </span><span class="p">);</span>

<span class="n">oField</span><span class="p">.</span><span class="n">SetWidth</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">CreateField</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">oField</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Creating Name field failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In C:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">OGRFieldDefnH</span><span class="w"> </span><span class="n">hFieldDefn</span><span class="p">;</span>

<span class="n">hFieldDefn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_Fld_Create</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OFTString</span><span class="w"> </span><span class="p">);</span>

<span class="n">OGR_Fld_SetWidth</span><span class="p">(</span><span class="w"> </span><span class="n">hFieldDefn</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_L_CreateField</span><span class="p">(</span><span class="w"> </span><span class="n">hLayer</span><span class="p">,</span><span class="w"> </span><span class="n">hFieldDefn</span><span class="p">,</span><span class="w"> </span><span class="n">TRUE</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Creating Name field failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>

<span class="n">OGR_Fld_Destroy</span><span class="p">(</span><span class="n">hFieldDefn</span><span class="p">);</span>
</pre></div>
</div>
<p>The following snipping loops reading lines of the form &quot;x,y,name&quot; from stdin,
and parsing them.</p>
<p>In C++ and in C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="kt">char</span><span class="w"> </span><span class="n">szName</span><span class="p">[</span><span class="mi">33</span><span class="p">];</span>

<span class="k">while</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">feof</span><span class="p">(</span><span class="n">stdin</span><span class="p">)</span>
<span class="w">       </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">fscanf</span><span class="p">(</span><span class="w"> </span><span class="n">stdin</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%lf,%lf,%32s&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">szName</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
</pre></div>
</div>
<p>To write a feature to disk, we must create a local OGRFeature, set attributes
and attach geometry before trying to write it to the layer.  It is
imperative that this feature be instantiated from the OGRFeatureDefn
associated with the layer it will be written to.</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OGRFeature</span><span class="w"> </span><span class="o">*</span><span class="n">poFeature</span><span class="p">;</span>

<span class="n">poFeature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGRFeature</span><span class="o">::</span><span class="n">CreateFeature</span><span class="p">(</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">GetLayerDefn</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">SetField</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">szName</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">OGRFeatureH</span><span class="w"> </span><span class="n">hFeature</span><span class="p">;</span>

<span class="n">hFeature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_F_Create</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_L_GetLayerDefn</span><span class="p">(</span><span class="w"> </span><span class="n">hLayer</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="n">OGR_F_SetFieldString</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_F_GetFieldIndex</span><span class="p">(</span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Name&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">szName</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>We create a local geometry object, and assign its copy (indirectly) to the feature.
The <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRFeature::SetGeometryDirectly()</span></code> differs from <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRFeature::SetGeometry()</span></code>
in that the direct method gives ownership of the geometry to the feature.
This is generally more efficient as it avoids an extra deep object copy
of the geometry.</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OGRPoint</span><span class="w"> </span><span class="n">pt</span><span class="p">;</span>
<span class="n">pt</span><span class="p">.</span><span class="n">setX</span><span class="p">(</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">);</span>
<span class="n">pt</span><span class="p">.</span><span class="n">setY</span><span class="p">(</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="p">);</span>

<span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">SetGeometry</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pt</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">OGRGeometryH</span><span class="w"> </span><span class="n">hPt</span><span class="p">;</span>
<span class="n">hPt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_G_CreateGeometry</span><span class="p">(</span><span class="n">wkbPoint</span><span class="p">);</span>
<span class="n">OGR_G_SetPoint_2D</span><span class="p">(</span><span class="n">hPt</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>

<span class="n">OGR_F_SetGeometry</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">hPt</span><span class="w"> </span><span class="p">);</span>
<span class="n">OGR_G_DestroyGeometry</span><span class="p">(</span><span class="n">hPt</span><span class="p">);</span>
</pre></div>
</div>
<p>Now we create a feature in the file.  The <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRLayer::CreateFeature()</span></code> does not
take ownership of our feature so we clean it up when done with it.</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w">     </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">CreateFeature</span><span class="p">(</span><span class="w"> </span><span class="n">poFeature</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="w">     </span><span class="p">{</span>
<span class="w">         </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Failed to create feature in shapefile.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">     </span><span class="p">}</span>

<span class="w">     </span><span class="n">OGRFeature</span><span class="o">::</span><span class="n">DestroyFeature</span><span class="p">(</span><span class="w"> </span><span class="n">poFeature</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="w">     </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_L_CreateFeature</span><span class="p">(</span><span class="w"> </span><span class="n">hLayer</span><span class="p">,</span><span class="w"> </span><span class="n">hFeature</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="w">     </span><span class="p">{</span>
<span class="w">         </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Failed to create feature in shapefile.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">     </span><span class="p">}</span>

<span class="w">     </span><span class="n">OGR_F_Destroy</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Finally we need to close down the datasource in order to ensure headers
are written out in an orderly way and all resources are recovered.</p>
<p>In C/C++ :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">GDALClose</span><span class="p">(</span><span class="w"> </span><span class="n">poDS</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The same program all in one block looks like this:</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ogrsf_frmts.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pszDriverName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ESRI Shapefile&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">GDALDriver</span><span class="w"> </span><span class="o">*</span><span class="n">poDriver</span><span class="p">;</span>

<span class="w">    </span><span class="n">GDALAllRegister</span><span class="p">();</span>

<span class="w">    </span><span class="n">poDriver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetGDALDriverManager</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="n">pszDriverName</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDriver</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s driver not available.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pszDriverName</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">GDALDataset</span><span class="w"> </span><span class="o">*</span><span class="n">poDS</span><span class="p">;</span>

<span class="w">    </span><span class="n">poDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poDriver</span><span class="o">-&gt;</span><span class="n">Create</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;point_out.shp&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">GDT_Unknown</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poDS</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Creation of output file failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">OGRLayer</span><span class="w"> </span><span class="o">*</span><span class="n">poLayer</span><span class="p">;</span>

<span class="w">    </span><span class="n">poLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">poDS</span><span class="o">-&gt;</span><span class="n">CreateLayer</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;point_out&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">wkbPoint</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poLayer</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Layer creation failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">OGRFieldDefn</span><span class="w"> </span><span class="n">oField</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OFTString</span><span class="w"> </span><span class="p">);</span>

<span class="w">    </span><span class="n">oField</span><span class="p">.</span><span class="n">SetWidth</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">CreateField</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">oField</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Creating Name field failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">szName</span><span class="p">[</span><span class="mi">33</span><span class="p">];</span>

<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">feof</span><span class="p">(</span><span class="n">stdin</span><span class="p">)</span>
<span class="w">        </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">fscanf</span><span class="p">(</span><span class="w"> </span><span class="n">stdin</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%lf,%lf,%32s&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">szName</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">OGRFeature</span><span class="w"> </span><span class="o">*</span><span class="n">poFeature</span><span class="p">;</span>

<span class="w">        </span><span class="n">poFeature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGRFeature</span><span class="o">::</span><span class="n">CreateFeature</span><span class="p">(</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">GetLayerDefn</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">SetField</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">szName</span><span class="w"> </span><span class="p">);</span>

<span class="w">        </span><span class="n">OGRPoint</span><span class="w"> </span><span class="n">pt</span><span class="p">;</span>

<span class="w">        </span><span class="n">pt</span><span class="p">.</span><span class="n">setX</span><span class="p">(</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">pt</span><span class="p">.</span><span class="n">setY</span><span class="p">(</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="p">);</span>

<span class="w">        </span><span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">SetGeometry</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pt</span><span class="w"> </span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">CreateFeature</span><span class="p">(</span><span class="w"> </span><span class="n">poFeature</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Failed to create feature in shapefile.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">            </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">OGRFeature</span><span class="o">::</span><span class="n">DestroyFeature</span><span class="p">(</span><span class="w"> </span><span class="n">poFeature</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">GDALClose</span><span class="p">(</span><span class="w"> </span><span class="n">poDS</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;gdal.h&quot;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">pszDriverName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ESRI Shapefile&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">GDALDriverH</span><span class="w"> </span><span class="n">hDriver</span><span class="p">;</span>
<span class="w">    </span><span class="n">GDALDatasetH</span><span class="w"> </span><span class="n">hDS</span><span class="p">;</span>
<span class="w">    </span><span class="n">OGRLayerH</span><span class="w"> </span><span class="n">hLayer</span><span class="p">;</span>
<span class="w">    </span><span class="n">OGRFieldDefnH</span><span class="w"> </span><span class="n">hFieldDefn</span><span class="p">;</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">szName</span><span class="p">[</span><span class="mi">33</span><span class="p">];</span>

<span class="w">    </span><span class="n">GDALAllRegister</span><span class="p">();</span>

<span class="w">    </span><span class="n">hDriver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALGetDriverByName</span><span class="p">(</span><span class="w"> </span><span class="n">pszDriverName</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hDriver</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;%s driver not available.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pszDriverName</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">hDS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALCreate</span><span class="p">(</span><span class="w"> </span><span class="n">hDriver</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;point_out.shp&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">GDT_Unknown</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hDS</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Creation of output file failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">hLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GDALDatasetCreateLayer</span><span class="p">(</span><span class="w"> </span><span class="n">hDS</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;point_out&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">wkbPoint</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">hLayer</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Layer creation failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">hFieldDefn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_Fld_Create</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">OFTString</span><span class="w"> </span><span class="p">);</span>

<span class="w">    </span><span class="n">OGR_Fld_SetWidth</span><span class="p">(</span><span class="w"> </span><span class="n">hFieldDefn</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_L_CreateField</span><span class="p">(</span><span class="w"> </span><span class="n">hLayer</span><span class="p">,</span><span class="w"> </span><span class="n">hFieldDefn</span><span class="p">,</span><span class="w"> </span><span class="n">TRUE</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Creating Name field failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">OGR_Fld_Destroy</span><span class="p">(</span><span class="n">hFieldDefn</span><span class="p">);</span>

<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">feof</span><span class="p">(</span><span class="n">stdin</span><span class="p">)</span>
<span class="w">        </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">fscanf</span><span class="p">(</span><span class="w"> </span><span class="n">stdin</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%lf,%lf,%32s&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">szName</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">OGRFeatureH</span><span class="w"> </span><span class="n">hFeature</span><span class="p">;</span>
<span class="w">        </span><span class="n">OGRGeometryH</span><span class="w"> </span><span class="n">hPt</span><span class="p">;</span>

<span class="w">        </span><span class="n">hFeature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_F_Create</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_L_GetLayerDefn</span><span class="p">(</span><span class="w"> </span><span class="n">hLayer</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">OGR_F_SetFieldString</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">OGR_F_GetFieldIndex</span><span class="p">(</span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Name&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">szName</span><span class="w"> </span><span class="p">);</span>

<span class="w">        </span><span class="n">hPt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_G_CreateGeometry</span><span class="p">(</span><span class="n">wkbPoint</span><span class="p">);</span>
<span class="w">        </span><span class="n">OGR_G_SetPoint_2D</span><span class="p">(</span><span class="n">hPt</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>

<span class="w">        </span><span class="n">OGR_F_SetGeometry</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="n">hPt</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">OGR_G_DestroyGeometry</span><span class="p">(</span><span class="n">hPt</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_L_CreateFeature</span><span class="p">(</span><span class="w"> </span><span class="n">hLayer</span><span class="p">,</span><span class="w"> </span><span class="n">hFeature</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Failed to create feature in shapefile.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">OGR_F_Destroy</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">GDALClose</span><span class="p">(</span><span class="w"> </span><span class="n">hDS</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In Python :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">osgeo</span> <span class="kn">import</span> <span class="n">gdal</span>
<span class="kn">from</span> <span class="nn">osgeo</span> <span class="kn">import</span> <span class="n">ogr</span>
<span class="kn">import</span> <span class="nn">string</span>

<span class="n">driverName</span> <span class="o">=</span> <span class="s2">&quot;ESRI Shapefile&quot;</span>
<span class="n">drv</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span> <span class="n">driverName</span> <span class="p">)</span>
<span class="k">if</span> <span class="n">drv</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> driver not available.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">driverName</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">drv</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span> <span class="s2">&quot;point_out.shp&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GDT_Unknown</span> <span class="p">)</span>
<span class="k">if</span> <span class="n">ds</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s2">&quot;Creation of output file failed.</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>

<span class="n">lyr</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">CreateLayer</span><span class="p">(</span> <span class="s2">&quot;point_out&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ogr</span><span class="o">.</span><span class="n">wkbPoint</span> <span class="p">)</span>
<span class="k">if</span> <span class="n">lyr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s2">&quot;Layer creation failed.</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>

<span class="n">field_defn</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">FieldDefn</span><span class="p">(</span> <span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="n">ogr</span><span class="o">.</span><span class="n">OFTString</span> <span class="p">)</span>
<span class="n">field_defn</span><span class="o">.</span><span class="n">SetWidth</span><span class="p">(</span> <span class="mi">32</span> <span class="p">)</span>

<span class="k">if</span> <span class="n">lyr</span><span class="o">.</span><span class="n">CreateField</span> <span class="p">(</span> <span class="n">field_defn</span> <span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s2">&quot;Creating Name field failed.</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>

<span class="c1"># Expected format of user input: x y name</span>
<span class="n">linestring</span> <span class="o">=</span> <span class="n">raw_input</span><span class="p">()</span>
<span class="n">linelist</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">linestring</span><span class="p">)</span>

<span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">linelist</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">linelist</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">linelist</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">linelist</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

    <span class="n">feat</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span> <span class="n">lyr</span><span class="o">.</span><span class="n">GetLayerDefn</span><span class="p">())</span>
    <span class="n">feat</span><span class="o">.</span><span class="n">SetField</span><span class="p">(</span> <span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="n">name</span> <span class="p">)</span>

    <span class="n">pt</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">ogr</span><span class="o">.</span><span class="n">wkbPoint</span><span class="p">)</span>
    <span class="n">pt</span><span class="o">.</span><span class="n">SetPoint_2D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="n">feat</span><span class="o">.</span><span class="n">SetGeometry</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">lyr</span><span class="o">.</span><span class="n">CreateFeature</span><span class="p">(</span><span class="n">feat</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span> <span class="s2">&quot;Failed to create feature in shapefile.</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>

    <span class="n">feat</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>

    <span class="n">linestring</span> <span class="o">=</span> <span class="n">raw_input</span><span class="p">()</span>
    <span class="n">linelist</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">linestring</span><span class="p">)</span>

<span class="n">ds</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
<p>Several geometry fields can be associated to a feature. This capability
is just available for a few file formats, such as PostGIS.</p>
<p>To create such datasources, geometry fields must be first created.
Spatial reference system objects can be associated to each geometry field.</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OGRGeomFieldDefn</span><span class="w"> </span><span class="n">oPointField</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;PointField&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">wkbPoint</span><span class="w"> </span><span class="p">);</span>
<span class="n">OGRSpatialReference</span><span class="o">*</span><span class="w"> </span><span class="n">poSRS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OGRSpatialReference</span><span class="p">();</span>
<span class="n">poSRS</span><span class="o">-&gt;</span><span class="n">importFromEPSG</span><span class="p">(</span><span class="mi">4326</span><span class="p">);</span>
<span class="n">oPointField</span><span class="p">.</span><span class="n">SetSpatialRef</span><span class="p">(</span><span class="n">poSRS</span><span class="p">);</span>
<span class="n">poSRS</span><span class="o">-&gt;</span><span class="n">Release</span><span class="p">();</span>

<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">CreateGeomField</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">oPointField</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Creating field PointField failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>

<span class="n">OGRGeomFieldDefn</span><span class="w"> </span><span class="n">oFieldPoint2</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;PointField2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">wkbPoint</span><span class="w"> </span><span class="p">);</span>
<span class="n">poSRS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OGRSpatialReference</span><span class="p">();</span>
<span class="n">poSRS</span><span class="o">-&gt;</span><span class="n">importFromEPSG</span><span class="p">(</span><span class="mi">32631</span><span class="p">);</span>
<span class="n">oPointField2</span><span class="p">.</span><span class="n">SetSpatialRef</span><span class="p">(</span><span class="n">poSRS</span><span class="p">);</span>
<span class="n">poSRS</span><span class="o">-&gt;</span><span class="n">Release</span><span class="p">();</span>

<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">CreateGeomField</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">oPointField2</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Creating field PointField2 failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">OGRGeomFieldDefnH</span><span class="w"> </span><span class="n">hPointField</span><span class="p">;</span>
<span class="n">OGRGeomFieldDefnH</span><span class="w"> </span><span class="n">hPointField2</span><span class="p">;</span>
<span class="n">OGRSpatialReferenceH</span><span class="w"> </span><span class="n">hSRS</span><span class="p">;</span>

<span class="n">hPointField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_GFld_Create</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;PointField&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">wkbPoint</span><span class="w"> </span><span class="p">);</span>
<span class="n">hSRS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OSRNewSpatialReference</span><span class="p">(</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">);</span>
<span class="n">OSRImportFromEPSG</span><span class="p">(</span><span class="n">hSRS</span><span class="p">,</span><span class="w"> </span><span class="mi">4326</span><span class="p">);</span>
<span class="n">OGR_GFld_SetSpatialRef</span><span class="p">(</span><span class="n">hPointField</span><span class="p">,</span><span class="w"> </span><span class="n">hSRS</span><span class="p">);</span>
<span class="n">OSRRelease</span><span class="p">(</span><span class="n">hSRS</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_L_CreateGeomField</span><span class="p">(</span><span class="w"> </span><span class="n">hLayer</span><span class="p">,</span><span class="w"> </span><span class="n">hPointField</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Creating field PointField failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>

<span class="n">OGR_GFld_Destroy</span><span class="p">(</span><span class="w"> </span><span class="n">hPointField</span><span class="w"> </span><span class="p">);</span>

<span class="n">hPointField2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_GFld_Create</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;PointField2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">wkbPoint</span><span class="w"> </span><span class="p">);</span>
<span class="n">OSRImportFromEPSG</span><span class="p">(</span><span class="n">hSRS</span><span class="p">,</span><span class="w"> </span><span class="mi">32631</span><span class="p">);</span>
<span class="n">OGR_GFld_SetSpatialRef</span><span class="p">(</span><span class="n">hPointField2</span><span class="p">,</span><span class="w"> </span><span class="n">hSRS</span><span class="p">);</span>
<span class="n">OSRRelease</span><span class="p">(</span><span class="n">hSRS</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_L_CreateGeomField</span><span class="p">(</span><span class="w"> </span><span class="n">hLayer</span><span class="p">,</span><span class="w"> </span><span class="n">hPointField2</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Creating field PointField2 failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>

<span class="n">OGR_GFld_Destroy</span><span class="p">(</span><span class="w"> </span><span class="n">hPointField2</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>To write a feature to disk, we must create a local OGRFeature, set attributes
and attach geometries before trying to write it to the layer.  It is
imperative that this feature be instantiated from the OGRFeatureDefn
associated with the layer it will be written to.</p>
<p>In C++ :</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">OGRFeature</span><span class="w"> </span><span class="o">*</span><span class="n">poFeature</span><span class="p">;</span>
<span class="n">OGRGeometry</span><span class="w"> </span><span class="o">*</span><span class="n">poGeometry</span><span class="p">;</span>
<span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">pszWKT</span><span class="p">;</span>

<span class="n">poFeature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGRFeature</span><span class="o">::</span><span class="n">CreateFeature</span><span class="p">(</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">GetLayerDefn</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>

<span class="n">pszWKT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s">&quot;POINT (2 49)&quot;</span><span class="p">;</span>
<span class="n">OGRGeometryFactory</span><span class="o">::</span><span class="n">createFromWkt</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pszWKT</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">poGeometry</span><span class="w"> </span><span class="p">);</span>
<span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">SetGeomFieldDirectly</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;PointField&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poGeometry</span><span class="w"> </span><span class="p">);</span>

<span class="n">pszWKT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s">&quot;POINT (500000 4500000)&quot;</span><span class="p">;</span>
<span class="n">OGRGeometryFactory</span><span class="o">::</span><span class="n">createFromWkt</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pszWKT</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">poGeometry</span><span class="w"> </span><span class="p">);</span>
<span class="n">poFeature</span><span class="o">-&gt;</span><span class="n">SetGeomFieldDirectly</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;PointField2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">poGeometry</span><span class="w"> </span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">poLayer</span><span class="o">-&gt;</span><span class="n">CreateFeature</span><span class="p">(</span><span class="w"> </span><span class="n">poFeature</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Failed to create feature.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>

<span class="n">OGRFeature</span><span class="o">::</span><span class="n">DestroyFeature</span><span class="p">(</span><span class="w"> </span><span class="n">poFeature</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>In C :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">OGRFeatureH</span><span class="w"> </span><span class="n">hFeature</span><span class="p">;</span>
<span class="n">OGRGeometryH</span><span class="w"> </span><span class="n">hGeometry</span><span class="p">;</span>
<span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">pszWKT</span><span class="p">;</span>

<span class="n">poFeature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OGR_F_Create</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_L_GetLayerDefn</span><span class="p">(</span><span class="n">hLayer</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>

<span class="n">pszWKT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s">&quot;POINT (2 49)&quot;</span><span class="p">;</span>
<span class="n">OGR_G_CreateFromWkt</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pszWKT</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">hGeometry</span><span class="w"> </span><span class="p">);</span>
<span class="n">OGR_F_SetGeomFieldDirectly</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span>
<span class="w">    </span><span class="n">OGR_F_GetGeomFieldIndex</span><span class="p">(</span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PointField&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">hGeometry</span><span class="w"> </span><span class="p">);</span>

<span class="n">pszWKT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s">&quot;POINT (500000 4500000)&quot;</span><span class="p">;</span>
<span class="n">OGR_G_CreateFromWkt</span><span class="p">(</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pszWKT</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">hGeometry</span><span class="w"> </span><span class="p">);</span>
<span class="n">OGR_F_SetGeomFieldDirectly</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="p">,</span>
<span class="w">    </span><span class="n">OGR_F_GetGeomFieldIndex</span><span class="p">(</span><span class="n">hFeature</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PointField2&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">hGeometry</span><span class="w"> </span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">OGR_L_CreateFeature</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">OGRERR_NONE</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;Failed to create feature.</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"> </span><span class="p">);</span>
<span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>

<span class="n">OGR_F_Destroy</span><span class="p">(</span><span class="w"> </span><span class="n">hFeature</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<p>In Python :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">feat</span> <span class="o">=</span> <span class="n">ogr</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span> <span class="n">lyr</span><span class="o">.</span><span class="n">GetLayerDefn</span><span class="p">()</span> <span class="p">)</span>

<span class="n">feat</span><span class="o">.</span><span class="n">SetGeomFieldDirectly</span><span class="p">(</span> <span class="s2">&quot;PointField&quot;</span><span class="p">,</span>
    <span class="n">ogr</span><span class="o">.</span><span class="n">CreateGeometryFromWkt</span><span class="p">(</span> <span class="s2">&quot;POINT (2 49)&quot;</span> <span class="p">)</span> <span class="p">)</span>
<span class="n">feat</span><span class="o">.</span><span class="n">SetGeomFieldDirectly</span><span class="p">(</span> <span class="s2">&quot;PointField2&quot;</span><span class="p">,</span>
    <span class="n">ogr</span><span class="o">.</span><span class="n">CreateGeometryFromWkt</span><span class="p">(</span> <span class="s2">&quot;POINT (500000 4500000)&quot;</span> <span class="p">)</span> <span class="p">)</span>

<span class="k">if</span> <span class="n">lyr</span><span class="o">.</span><span class="n">CreateFeature</span><span class="p">(</span> <span class="n">feat</span> <span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span> <span class="s2">&quot;Failed to create feature.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">);</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span> <span class="mi">1</span> <span class="p">);</span>
</pre></div>
</div>
</section>
<section id="writing-to-ogr-using-the-arrow-c-data-interface">
<span id="vector-api-tut-arrow-write"></span><h2>Writing to OGR using the Arrow C Data interface<a class="headerlink" href="#writing-to-ogr-using-the-arrow-c-data-interface" title="Link to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.8.</span></p>
</div>
<p>Instead of writing features one at a time, it is also possible to write
them by batches, with a column-oriented memory layout, using the
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRLayer::WriteArrowBatch()</span></code> method. Note that this method is more
difficult to use than the traditional <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRLayer::CreateFeature()</span></code> approach,
and is only advised when compatibility with the
<a class="reference external" href="https://arrow.apache.org/docs/format/CDataInterface.html">Apache Arrow C Data interface</a>
is needed, or when column-oriented writing of layers is required.</p>
<p>Pending using an helper library, generation of the Arrow C Data interface
requires reading of the following documents:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://arrow.apache.org/docs/format/CDataInterface.html">Arrow C data interface</a></p></li>
<li><p><a class="reference external" href="https://arrow.apache.org/docs/format/Columnar.html">Arrow Columnar Format</a>.</p></li>
</ul>
<p>Consult <a class="reference internal" href="#vector-api-tut-arrow-stream"><span class="std std-ref">Reading From OGR using the Arrow C Stream data interface</span></a> for introduction to the ArrowSchema and ArrowArray
basic types involved for batch writing.</p>
<p>The WriteArrowBatch() method has the following signature:</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cm">/** Writes a batch of rows from an ArrowArray.</span>
<span class="cm"> *</span>
<span class="cm"> * @param schema Schema of array</span>
<span class="cm"> * @param array Array of type struct. It may be released (array-&gt;release==NULL)</span>
<span class="cm"> *              after calling this method.</span>
<span class="cm"> * @param papszOptions Options. Null terminated list, or nullptr.</span>
<span class="cm"> * @return true in case of success</span>
<span class="cm"> */</span>
<span class="k">virtual</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">OGRLayer::WriteArrowBatch</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">ArrowSchema</span><span class="w"> </span><span class="o">*</span><span class="n">schema</span><span class="p">,</span>
<span class="w">                                       </span><span class="k">struct</span><span class="w"> </span><span class="nc">ArrowArray</span><span class="w"> </span><span class="o">*</span><span class="n">array</span><span class="p">,</span>
<span class="w">                                       </span><span class="n">CSLConstList</span><span class="w"> </span><span class="n">papszOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>It is also available in the C API as <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGR_L_WriteArrowBatch()</span></code>.</p>
<p>This is semantically close to calling <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRLayer::CreateFeature()</span></code>
with multiple features at once.</p>
<p>The ArrowArray must be of type struct (format=+s), and its children generally
map to a OGR attribute or geometry field (unless they are struct themselves).</p>
<p>Method <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRLayer::IsArrowSchemaSupported()</span></code> can be called to determine
if the schema will be supported by WriteArrowBatch().</p>
<p>OGR fields for the corresponding children arrays must exist and be of a
compatible type. For attribute fields, they should be created with
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">OGRLayer::CreateFieldFromArrowSchema()</span></code>.</p>
<p>Arrays for geometry columns should be of binary or large binary type and
contain WKB geometry.</p>
<p>Note that the passed array may be set to a released state
(array-&gt;release==NULL) after this call (not by the base implementation,
but in specialized ones such as Parquet or Arrow for example)</p>
<p>Supported options of the base implementation are:</p>
<ul class="simple">
<li><p>FID=name. Name of the FID column in the array. If not provided,
GetFIDColumn() is used to determine it. The special name
OGRLayer::DEFAULT_ARROW_FID_NAME is also recognized if neither FID nor
GetFIDColumn() are set.
The corresponding ArrowArray must be of type int32 (i) or int64 (l).
On input, values of the FID column are used to create the feature.
On output, the values of the FID column may be set with the FID of the
created feature (if the array is not released).</p></li>
<li><p>GEOMETRY_NAME=name. Name of the geometry column. If not provided,
GetGeometryColumn() is used. The special name
OGRLayer::DEFAULT_ARROW_GEOMETRY_NAME is also recognized if neither
GEOMETRY_NAME nor GetGeometryColumn() are set.
Geometry columns are also identified if they have
ARROW:extension:name=ogc.wkb as a field metadata.
The corresponding ArrowArray must be of type binary (w) or large
binary (W).</p></li>
</ul>
<p>Drivers that have a specialized implementation (such as <a class="reference internal" href="../drivers/vector/parquet.html#vector-parquet"><span class="std std-ref">(Geo)Parquet</span></a>
and <a class="reference internal" href="../drivers/vector/arrow.html#vector-arrow"><span class="std std-ref">(Geo)Arrow IPC File Format / Stream</span></a>) advertise the OLCFastWriteArrowBatch layer capability.</p>
<p>The following example in Python demonstrates how to copy a layer from one format to
another one (assuming it has at most a single geometry column):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">copy_layer</span><span class="p">(</span><span class="n">src_lyr</span><span class="p">,</span> <span class="n">out_filename</span><span class="p">,</span> <span class="n">out_format</span><span class="p">,</span> <span class="n">lcos</span> <span class="o">=</span> <span class="p">{}):</span>
    <span class="n">stream</span> <span class="o">=</span> <span class="n">src_lyr</span><span class="o">.</span><span class="n">GetArrowStream</span><span class="p">()</span>
    <span class="n">schema</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">GetSchema</span><span class="p">()</span>

    <span class="c1"># If the source layer has a FID column and the output driver supports</span>
    <span class="c1"># a FID layer creation option, set it to the source FID column name.</span>
    <span class="k">if</span> <span class="n">src_lyr</span><span class="o">.</span><span class="n">GetFIDColumn</span><span class="p">():</span>
        <span class="n">creationOptions</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="n">out_format</span><span class="p">)</span><span class="o">.</span><span class="n">GetMetadataItem</span><span class="p">(</span>
            <span class="s2">&quot;DS_LAYER_CREATIONOPTIONLIST&quot;</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">creationOptions</span> <span class="ow">and</span> <span class="s1">&#39;&quot;FID&quot;&#39;</span> <span class="ow">in</span> <span class="n">creationOptions</span><span class="p">:</span>
            <span class="n">lcos</span><span class="p">[</span><span class="s2">&quot;FID&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">src_lyr</span><span class="o">.</span><span class="n">GetFIDColumn</span><span class="p">()</span>

    <span class="k">with</span> <span class="n">ogr</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="n">out_format</span><span class="p">)</span><span class="o">.</span><span class="n">CreateDataSource</span><span class="p">(</span><span class="n">out_filename</span><span class="p">)</span> <span class="k">as</span> <span class="n">out_ds</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">src_lyr</span><span class="o">.</span><span class="n">GetLayerDefn</span><span class="p">()</span><span class="o">.</span><span class="n">GetGeomFieldCount</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">out_lyr</span> <span class="o">=</span> <span class="n">out_ds</span><span class="o">.</span><span class="n">CreateLayer</span><span class="p">(</span>
                <span class="n">src_lyr</span><span class="o">.</span><span class="n">GetName</span><span class="p">(),</span> <span class="n">geom_type</span><span class="o">=</span><span class="n">ogr</span><span class="o">.</span><span class="n">wkbNone</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">lcos</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">src_lyr</span><span class="o">.</span><span class="n">GetLayerDefn</span><span class="p">()</span><span class="o">.</span><span class="n">GetGeomFieldCount</span><span class="p">()):</span>
                <span class="n">out_lyr</span><span class="o">.</span><span class="n">CreateGeomField</span><span class="p">(</span><span class="n">src_lyr</span><span class="o">.</span><span class="n">GetLayerDefn</span><span class="p">()</span><span class="o">.</span><span class="n">GetGeomFieldDefn</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out_lyr</span> <span class="o">=</span> <span class="n">out_ds</span><span class="o">.</span><span class="n">CreateLayer</span><span class="p">(</span>
                <span class="n">src_lyr</span><span class="o">.</span><span class="n">GetName</span><span class="p">(),</span>
                <span class="n">geom_type</span><span class="o">=</span><span class="n">src_lyr</span><span class="o">.</span><span class="n">GetGeomType</span><span class="p">(),</span>
                <span class="n">srs</span><span class="o">=</span><span class="n">src_lyr</span><span class="o">.</span><span class="n">GetSpatialRef</span><span class="p">(),</span>
                <span class="n">options</span><span class="o">=</span><span class="n">lcos</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">success</span><span class="p">,</span> <span class="n">error_msg</span> <span class="o">=</span> <span class="n">out_lyr</span><span class="o">.</span><span class="n">IsArrowSchemaSupported</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">success</span><span class="p">,</span> <span class="n">error_msg</span>

        <span class="n">src_geom_field_names</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">src_lyr</span><span class="o">.</span><span class="n">GetLayerDefn</span><span class="p">()</span><span class="o">.</span><span class="n">GetGeomFieldDefn</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">GetName</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">src_lyr</span><span class="o">.</span><span class="n">GetLayerDefn</span><span class="p">()</span><span class="o">.</span><span class="n">GetGeomFieldCount</span><span class="p">())</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">GetChildrenCount</span><span class="p">()):</span>
            <span class="c1"># GetArrowStream() may return &quot;OGC_FID&quot; for a unnamed source FID</span>
            <span class="c1"># column and &quot;wkb_geometry&quot; for a unnamed source geometry column.</span>
            <span class="c1"># Also test GetFIDColumn() and src_geom_field_names if they are</span>
            <span class="c1"># named.</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">schema</span><span class="o">.</span><span class="n">GetChild</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">GetName</span><span class="p">()</span>
                <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;OGC_FID&quot;</span><span class="p">,</span> <span class="s2">&quot;wkb_geometry&quot;</span><span class="p">,</span> <span class="n">src_lyr</span><span class="o">.</span><span class="n">GetFIDColumn</span><span class="p">())</span>
                <span class="ow">and</span> <span class="n">schema</span><span class="o">.</span><span class="n">GetChild</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">GetName</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">src_geom_field_names</span>
            <span class="p">):</span>
                <span class="n">out_lyr</span><span class="o">.</span><span class="n">CreateFieldFromArrowSchema</span><span class="p">(</span><span class="n">schema</span><span class="o">.</span><span class="n">GetChild</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

        <span class="n">write_options</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">src_lyr</span><span class="o">.</span><span class="n">GetFIDColumn</span><span class="p">():</span>
            <span class="n">write_options</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;FID=&quot;</span> <span class="o">+</span> <span class="n">src_lyr</span><span class="o">.</span><span class="n">GetFIDColumn</span><span class="p">())</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">src_lyr</span><span class="o">.</span><span class="n">GetLayerDefn</span><span class="p">()</span><span class="o">.</span><span class="n">GetGeomFieldCount</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span>
            <span class="ow">and</span> <span class="n">src_lyr</span><span class="o">.</span><span class="n">GetGeometryColumn</span><span class="p">()</span>
        <span class="p">):</span>
            <span class="n">write_options</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;GEOMETRY_NAME=&quot;</span> <span class="o">+</span> <span class="n">src_lyr</span><span class="o">.</span><span class="n">GetGeometryColumn</span><span class="p">())</span>

        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">array</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">GetNextRecordBatch</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">array</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">out_lyr</span><span class="o">.</span><span class="n">WriteArrowBatch</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="n">write_options</span><span class="p">)</span>
</pre></div>
</div>
<p>For the Python bindings, in addition to the above ogr.Layer.IsArrowSchemaSupported(),
ogr.Layer.CreateFieldFromArrowSchema() and ogr.Layer.WriteArrowBatch() methods,
3 similar methods exist using the <a class="reference external" href="https://arrow.apache.org/docs/python/index.html">PyArrow</a>
data types:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Layer</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">IsPyArrowSchemaSupported</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pa_schema</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns whether the passed pyarrow Schema is supported by the layer, as a tuple (success: bool, errorMsg: str).</span>

<span class="sd">    def CreateFieldFromPyArrowSchema(self, pa_schema, options=[]):</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="n">Create</span> <span class="n">a</span> <span class="n">field</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">passed</span> <span class="n">pyarrow</span> <span class="n">Schema</span><span class="o">.</span><span class="s2">&quot;&quot;&quot;</span>

<span class="s2">    def WritePyArrow(self, pa_batch, options=[]):</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="n">Write</span> <span class="n">the</span> <span class="n">content</span> <span class="n">of</span> <span class="n">the</span> <span class="n">passed</span> <span class="n">PyArrow</span> <span class="n">batch</span> <span class="p">(</span><span class="n">either</span> <span class="n">a</span> <span class="n">pyarrow</span><span class="o">.</span><span class="n">Table</span><span class="p">,</span> <span class="n">a</span> <span class="n">pyarrow</span><span class="o">.</span><span class="n">RecordBatch</span> <span class="ow">or</span> <span class="n">a</span> <span class="n">pyarrow</span><span class="o">.</span><span class="n">StructArray</span><span class="p">)</span> <span class="n">into</span> <span class="n">the</span> <span class="n">layer</span><span class="o">.</span><span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="vector_driver_tut.html" class="btn btn-neutral float-right" title="Vector driver implementation tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="multidimensional_api_tut.html" class="btn btn-neutral float-left" title="Multidimensional raster API tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2024 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
  </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>