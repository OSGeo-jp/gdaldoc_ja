<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GDAL仮想ファイルシステム(圧縮、ネットワークホスト、など...): /vsimem, /vsizip, /vsitar, /vsicurl, ... &mdash; GDAL  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../_static/css/gdal.css?v=e152ac3b" />

  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="canonical" href="https://gdal.org/user/virtual_file_systems.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=c033477b"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/translations.js?v=91613774"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="Feature Style Specification" href="ogr_feature_style.html" />
    <link rel="prev" title="SQL SQLite方言" href="sql_sqlite_dialect.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../index.html">
            
              <img src="../_static/gdalicon.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../download.html">ダウンロード</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programs/index.html">プログラム</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drivers/raster/index.html">ラスタードライバー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drivers/vector/index.html">ベクタードライバー</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ユーザー</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="raster_data_model.html">ラスターデータモデル</a></li>
<li class="toctree-l2"><a class="reference internal" href="multidim_raster_data_model.html">多次元ラスターデータモデル</a></li>
<li class="toctree-l2"><a class="reference internal" href="vector_data_model.html">ベクターデーターモデル</a></li>
<li class="toctree-l2"><a class="reference internal" href="gnm_data_model.html">地理ネットワークデータモデル</a></li>
<li class="toctree-l2"><a class="reference internal" href="multithreading.html">マルチスレッディング</a></li>
<li class="toctree-l2"><a class="reference internal" href="ogr_sql_sqlite_dialect.html">OGR SQL方言とSQLITE SQL方言</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">GDAL仮想ファイルシステム</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">はじめに</a></li>
<li class="toctree-l3"><a class="reference internal" href="#chaining">連鎖</a></li>
<li class="toctree-l3"><a class="reference internal" href="#drivers-supporting-virtual-file-systems">仮想ファイルシステムをサポートするドライバ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsizip-zip-archives">/vsizip/ (.zip アーカイブ)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#read-capabilities">読み取り機能</a></li>
<li class="toctree-l4"><a class="reference internal" href="#write-capabilities">書き込み機能</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sozip-seek-optimized-zip">SOZip (Seek-Optimized ZIP)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vsigzip-gzipped-file">/vsigzip/ (gzipped ファイル)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsitar-tar-tgz-archives">/vsitar/ (.tar, .tgz アーカイブ)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsi7z-7z-archives">/vsi7z/ (.7z アーカイブ)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsirar-rar-archives">/vsirar/ (.rar アーカイブ)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#network-based-file-systems">ネットワークベースのファイルシステム</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#how-to-set-credentials">資格情報の設定方法は？</a></li>
<li class="toctree-l4"><a class="reference internal" href="#network-cloud-friendliness-and-file-formats">ネットワーク/クラウド対応性とファイルフォーマット</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsicurl-http-https-ftp-files-random-access">/vsicurl/ (http/https/ftp ファイル: ランダムアクセス)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsicurl-streaming-http-https-ftp-files-streaming">/vsicurl_streaming/ (http/https/ftp ファイル: ストリーミング)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsis3-aws-s3-files">/vsis3/ (AWS S3 ファイル)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsis3-and-aws-instance-metadata-service-imds">/vsis3/ とAWSインスタンスメタデータサービス(IMDS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-vsis3-with-minio">/vsis3/ のMinioでの設定</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsis3-streaming-aws-s3-files-streaming">/vsis3_streaming/ (AWS S3 files: streaming)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsigs-google-cloud-storage-files">/vsigs/ (Google Cloud Storage ファイル)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsigs-streaming-google-cloud-storage-files-streaming">/vsigs_streaming/ (Google Cloud Storage ファイル: ストリーミング)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsiaz-microsoft-azure-blob-files">/vsiaz/ (Microsoft Azure Blob ファイル)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsiaz-streaming-microsoft-azure-blob-files-streaming">/vsiaz_streaming/ (Microsoft Azure Blob ファイル: ストリーミング)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsiadls-microsoft-azure-data-lake-storage-gen2">/vsiadls/ (Microsoft Azure Data Lake Storage Gen2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsioss-alibaba-cloud-oss-files">/vsioss/ (Alibaba Cloud OSS ファイル)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsioss-streaming-alibaba-cloud-oss-files-streaming">/vsioss_streaming/ (Alibaba Cloud OSS ファイル: ストリーミング)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsiswift-openstack-swift-object-storage">/vsiswift/ (OpenStack Swift Object Storage)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsiswift-streaming-openstack-swift-object-storage-streaming">/vsiswift_streaming/ (OpenStack Swift Object Storage: ストリーミング)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsihdfs-hadoop-file-system">/vsihdfs/ (Hadoop ファイルシステム)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsiwebhdfs-web-hadoop-file-system-rest-api">/vsiwebhdfs/ (Web Hadoop ファイルシステム REST API)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vsistdin-standard-input-streaming">/vsistdin/ (標準入力ストリーミング)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsistdout-standard-output-streaming">/vsistdout/ (標準出力ストリーミング)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsimem-in-memory-files">/vsimem/ (インメモリファイル)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsisubfile-portions-of-files">/vsisubfile/ (ファイルの一部)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsisparse-sparse-files">/vsisparse/ (スパースファイル)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsicached-file-caching">/vsicached/ (ファイルキャッシュ)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsicrypt-encrypted-files">/vsicrypt/ (暗号化ファイル)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ogr_feature_style.html">Feature Style Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="coordinate_epoch.html">Coordinate epoch support</a></li>
<li class="toctree-l2"><a class="reference internal" href="configoptions.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="gdal_python_utilities.html">GDAL Python Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">チュートリアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">開発</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">コミュニティ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sponsors/index.html">スポンサー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">どのように貢献できますか?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">ライセンス</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html"> GDAL  ドキュメント </a> &raquo;</li>
      
          <li><a href="index.html">ユーザー向けドキュメント</a> &raquo;</li>
      
      <li>GDAL仮想ファイルシステム(圧縮、ネットワークホスト、など...): /vsimem, /vsizip, /vsitar, /vsicurl, ...</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit/master/doc/source/user/virtual_file_systems.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="ogr_feature_style.html" class="btn btn-neutral float-right" title="Feature Style Specification" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sql_sqlite_dialect.html" class="btn btn-neutral float-left" title="SQL SQLite方言" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gdal-virtual-file-systems-compressed-network-hosted-etc-vsimem-vsizip-vsitar-vsicurl">
<span id="virtual-file-systems"></span><h1>GDAL仮想ファイルシステム(圧縮、ネットワークホスト、など...): /vsimem, /vsizip, /vsitar, /vsicurl, ...<a class="headerlink" href="#gdal-virtual-file-systems-compressed-network-hosted-etc-vsimem-vsizip-vsitar-vsicurl" title="Link to this heading"></a></h1>
<section id="introduction">
<h2>はじめに<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>GDALは&quot;標準&quot;ファイルシステム上にあるファイルにアクセスできます.つまり,Unix系システムの / 階層やWindowsの C:, D:などのドライブです.しかし,ほとんどのGDALラスターおよびベクタードライバはGDAL固有の抽象化を使用してファイルにアクセスします.これにより,メモリ内ファイル,圧縮ファイル(.zip, .gz, .tar, .tar.gzアーカイブ),暗号化ファイル,標準入力および出力(STDIN, STDOUT),ネットワーク上のファイル(公開アクセス可能なもの,または商用クラウドストレージサービスのプライベートバケット内のもの)など,標準でない種類のファイルにアクセスできます.</p>
<p>各特殊ファイルシステムにはプレフィックスがあり,ファイルを名前付ける一般的な構文は/vsiPREFIX/...です.</p>
<p>例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdalinfo</span> <span class="o">/</span><span class="n">vsizip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">zip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span>
</pre></div>
</div>
</section>
<section id="chaining">
<h2>連鎖<a class="headerlink" href="#chaining" title="Link to this heading"></a></h2>
<p>複数のファイルシステムハンドラを連鎖させることができます.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ogrinfo a shapefile in a zip file on the internet:</span>

<span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="o">-</span><span class="n">al</span> <span class="o">-</span><span class="n">so</span> <span class="o">/</span><span class="n">vsizip</span><span class="o">//</span><span class="n">vsicurl</span><span class="o">/</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">OSGeo</span><span class="o">/</span><span class="n">gdal</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">autotest</span><span class="o">/</span><span class="n">ogr</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">shp</span><span class="o">/</span><span class="n">poly</span><span class="o">.</span><span class="n">zip</span>

<span class="c1"># ogrinfo a shapefile in a zip file on an ftp:</span>

<span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="o">-</span><span class="n">al</span> <span class="o">-</span><span class="n">so</span> <span class="o">/</span><span class="n">vsizip</span><span class="o">//</span><span class="n">vsicurl</span><span class="o">/</span><span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">user</span><span class="p">:</span><span class="n">password</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">foldername</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">zip</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">shp</span>
</pre></div>
</div>
<p>(/vsizip/vsicurl/... と一つのスラッシュで書いてもよいです. (ただし,ドキュメントを書く際は引き続き二つ使用してください.))</p>
</section>
<section id="drivers-supporting-virtual-file-systems">
<h2>仮想ファイルシステムをサポートするドライバ<a class="headerlink" href="#drivers-supporting-virtual-file-systems" title="Link to this heading"></a></h2>
<p>仮想ファイルシステムは,現在のほとんどのファイルベースのドライバである&quot;大規模ファイルAPI&quot;をサポートするGDALまたはOGRドライバでのみ使用できます.これらのフォーマットの完全なリストは, <code class="docutils literal notranslate"><span class="pre">gdalinfo</span> <span class="pre">--formats</span></code> または <code class="docutils literal notranslate"><span class="pre">ogrinfo</span> <span class="pre">--formats</span></code> を実行するときに'v'でマークされたドライバを見ることで取得できます.</p>
<p>注目すべき例外はHDF4ドライバです.</p>
</section>
<section id="vsizip-zip-archives">
<span id="vsizip"></span><h2>/vsizip/ (.zip アーカイブ)<a class="headerlink" href="#vsizip-zip-archives" title="Link to this heading"></a></h2>
<section id="read-capabilities">
<h3>読み取り機能<a class="headerlink" href="#read-capabilities" title="Link to this heading"></a></h3>
<p>/vsizip/ は,事前に解凍せずにZIPアーカイブを読み取ることができるファイルハンドラです.</p>
<p>ZIPファイル内のファイルを指すには,ファイル名は <code class="file docutils literal notranslate"><span class="pre">/vsizip/path/to/the/file.zip/path/inside/the/zip/file</span></code> の形式である必要があります.ここで <code class="file docutils literal notranslate"><span class="pre">path/to/the/file.zip</span></code> は相対または絶対であり, <code class="file docutils literal notranslate"><span class="pre">path/inside/the/zip/file</span></code> はアーカイブ内のファイルへの相対パスです.</p>
<p>.zipをディレクトリとして使用するには, <code class="file docutils literal notranslate"><span class="pre">/vsizip/path/to/the/file.zip</span></code> または <code class="file docutils literal notranslate"><span class="pre">/vsizip/path/to/the/file.zip/subdir</span></code> を使用できます.ディレクトリリストは <a class="reference internal" href="../api/cpl.html#_CPPv410VSIReadDirPKc" title="VSIReadDir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIReadDir()</span></code></a> で利用できます. <a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> (&quot;/vsizip/...&quot;) 呼び出しはファイルの解凍されたサイズを返します. ZIPファイル内のディレクトリは通常のファイルシステムと同様に,通常のファイルと区別することができます.ディレクトリリストとファイル統計の取得は高速な操作です.</p>
<p>注: .zipファイルがそのルートにある単一のファイルを含む特定の場合には, <code class="file docutils literal notranslate"><span class="pre">/vsizip/path/to/the/file.zip</span></code> とだけ記述するだけで動作します.</p>
<p>/zip/ ハンドラに固有の次の設定オプションがあります:</p>
<ul class="simple">
<li><p id="config-CPL_SOZIP_ENABLED"><strong>CPL_SOZIP_ENABLED=[YES/NO/AUTO]: </strong> (GDAL &gt;= 3.7)  Defaults to <code class="docutils literal notranslate"><span class="pre">AUTO</span></code>. Determines whether the SOZip optimization should be enabled. If <code class="docutils literal notranslate"><span class="pre">AUTO</span></code>,
SOZip will be enabled for uncompressed files larger than
<a class="reference internal" href="#config-CPL_SOZIP_MIN_FILE_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_SOZIP_MIN_FILE_SIZE</span></code></a>.</p>
</li>
<li><p id="config-CPL_SOZIP_MIN_FILE_SIZE"><strong>CPL_SOZIP_MIN_FILE_SIZE=value: </strong> (GDAL &gt;= 3.7)  Defaults to <code class="docutils literal notranslate"><span class="pre">1M</span></code>. Determines the minimum file size for SOZip to be automatically enabled.</p>
</li>
</ul>
<p>例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">vsizip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">zip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span>  <span class="p">(</span><span class="n">relative</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="o">.</span><span class="n">zip</span><span class="p">)</span>
<span class="o">/</span><span class="n">vsizip</span><span class="o">//</span><span class="n">home</span><span class="o">/</span><span class="n">even</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">zip</span><span class="o">/</span><span class="n">subdir</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span>  <span class="p">(</span><span class="n">absolute</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="o">.</span><span class="n">zip</span><span class="p">)</span>
<span class="o">/</span><span class="n">vsizip</span><span class="o">/</span><span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">even</span>\<span class="n">my</span><span class="o">.</span><span class="n">zip</span>\<span class="n">subdir</span>\<span class="n">my</span><span class="o">.</span><span class="n">tif</span>
<span class="o">/</span><span class="n">vsizip</span><span class="o">/</span><span class="p">{</span><span class="o">/</span><span class="n">vsizip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">zip</span><span class="o">/</span><span class="n">subdir</span><span class="o">/</span><span class="n">subzip</span><span class="o">.</span><span class="n">zip</span><span class="p">}</span><span class="o">/</span><span class="n">subdir_in_subzip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">shp</span>  <span class="p">(</span><span class="n">alternate</span> <span class="n">syntax</span> <span class="k">for</span> <span class="n">a</span> <span class="n">nested</span> <span class="o">.</span><span class="n">zip</span><span class="p">)</span>
</pre></div>
</div>
<p>.kmz, .ods, .xlsx 拡張子もzip互換アーカイブの有効な拡張子として検出されます.</p>
<p>GDAL 2.2以降,連鎖を可能にし,.zip拡張子に依存しないようにするための代替構文が利用可能です.例えば, <code class="docutils literal notranslate"><span class="pre">/vsizip/{/path/to/the/archive}/path/inside/the/zip/file</span></code>. <code class="file docutils literal notranslate"><span class="pre">/path/to/the/archive</span></code>  はこの代替構文を使用することもできます.</p>
</section>
<section id="write-capabilities">
<h3>書き込み機能<a class="headerlink" href="#write-capabilities" title="Link to this heading"></a></h3>
<p>書き込み機能も利用できます.新しいzipファイルを作成し,既存の(または作成したばかりの)zipファイルに新しいファイルを追加することができます.</p>
<p>新しいzipファイルの作成:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fmain</span> <span class="o">=</span> <span class="n">VSIFOpenL</span><span class="p">(</span><span class="s2">&quot;/vsizip/my.zip&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">);</span>
<span class="n">subfile</span> <span class="o">=</span> <span class="n">VSIFOpenL</span><span class="p">(</span><span class="s2">&quot;/vsizip/my.zip/subfile&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">);</span>
<span class="n">VSIFWriteL</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="s2">&quot;Hello world&quot;</span><span class="p">),</span> <span class="n">subfile</span><span class="p">);</span>
<span class="n">VSIFCloseL</span><span class="p">(</span><span class="n">subfile</span><span class="p">);</span>
<span class="n">VSIFCloseL</span><span class="p">(</span><span class="n">fmain</span><span class="p">);</span>
</pre></div>
</div>
<p>既存のzipに新しいファイルを追加:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">newfile</span> <span class="o">=</span> <span class="n">VSIFOpenL</span><span class="p">(</span><span class="s2">&quot;/vsizip/my.zip/newfile&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">);</span>
<span class="n">VSIFWriteL</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="s2">&quot;Hello world&quot;</span><span class="p">),</span> <span class="n">newfile</span><span class="p">);</span>
<span class="n">VSIFCloseL</span><span class="p">(</span><span class="n">newfile</span><span class="p">);</span>
</pre></div>
</div>
<p>GDAL 2.4以降, <a class="reference internal" href="configoptions.html#config-GDAL_NUM_THREADS"><code class="docutils literal notranslate"><span class="pre">GDAL_NUM_THREADS</span></code></a> 設定オプションを整数または <code class="docutils literal notranslate"><span class="pre">ALL_CPUS</span></code> に設定することで,単一ファイルのマルチスレッド圧縮を有効にすることができます.これはpigzユーティリティの独立モードに類似しています.デフォルトでは,入力ストリームは1MBのチャンクに分割されます(チャンクサイズは <a class="reference internal" href="configoptions.html#config-CPL_VSIL_DEFLATE_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_DEFLATE_CHUNK_SIZE</span></code></a> 設定オプションで調整でき, &quot;x K&quot; または &quot;x M&quot; のような値が使用できます),そして各チャンクは独立して圧縮されます(そして9バイトのマーカー 0x00 0x00 0xFF 0xFF 0x00 0x00 0x00 0xFF 0xFF で終了し,ストリームと辞書の完全なフラッシュを示し,各チャンクの独立したデコードを可能にします).これは圧縮率をわずかに低下させるため,非常に小さなチャンクサイズは避けるべきです. GDAL 3.7以降,この技術は <a class="reference internal" href="#sozip-intro"><span class="std std-ref">SOZip (Seek-Optimized ZIP)</span></a> に従って .zip ファイルを生成するために再利用されます.</p>
<p>読み取りおよび書き込み操作を交互に行うことはできません.新しいzipは,読み取りモードで再オープンする前に閉じる必要があります.</p>
</section>
<section id="sozip-seek-optimized-zip">
<span id="sozip-intro"></span><h3>SOZip (Seek-Optimized ZIP)<a class="headerlink" href="#sozip-seek-optimized-zip" title="Link to this heading"></a></h3>
<p>GDAL (&gt;= 3.7) は <a class="reference external" href="https://sozip.org">SOZip (Seek-Optimized ZIP)</a> プロファイルに従う .zip ファイルの完全な読み取りおよび書き込みサポートを持っています.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/vsizip/</span></code> 仮想ファイルシステムは,圧縮されたSOZip対応ファイル内での高速なランダムアクセスを実行するためにSOZipインデックスを使用します.</p></li>
<li><p><a class="reference internal" href="../drivers/vector/shapefile.html#vector-shapefile"><span class="std std-ref">ESRI Shapefile / DBF</span></a> および <a class="reference internal" href="../drivers/vector/gpkg.html#vector-gpkg"><span class="std std-ref">GPKG -- GeoPackage vector</span></a> ドライバは直接SOZip対応の .shz/.shp.zip または .gpkg.zip ファイルを生成できます.</p></li>
<li><p>新しいまたは既存のZIPファイルにファイルを圧縮して追加できる <a class="reference internal" href="../api/cpl.html#_CPPv415CPLAddFileInZipPvPKcPKcP8VSILFILE12CSLConstList16GDALProgressFuncPv" title="CPLAddFileInZip"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CPLAddFileInZip()</span></code></a> C 関数は,SOZip最適化を有効にします(つまり,圧縮するファイルが1MBより大きい場合).SOZip最適化は, <a class="reference internal" href="#config-CPL_SOZIP_ENABLED"><code class="docutils literal notranslate"><span class="pre">CPL_SOZIP_ENABLED</span></code></a> 設定オプションをYESに設定することで強制できます.または,NOに設定することで完全に無効にできます.</p></li>
<li><p><a class="reference internal" href="../api/cpl.html#_CPPv418VSIGetFileMetadataPKcPKc12CSLConstList" title="VSIGetFileMetadata"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIGetFileMetadata()</span></code></a> メソッドは, <code class="file docutils literal notranslate"><span class="pre">/vsizip/path/to/the/file.zip/path/inside/the/zip/file</span></code> の形式のファイル名とドメイン = &quot;ZIP&quot; を指定して呼び出すことで,そのファイルにSOZipインデックスが利用可能かどうかの情報を取得できます.</p></li>
<li><p><a class="reference internal" href="../programs/sozip.html#sozip"><span class="std std-ref">sozip</span></a> 新しいコマンドラインユーティリティは,SOZip最適化されたZIPファイルを作成したり,既存のZIPファイルにファイルを追加したり, ZIPファイルの内容をリストしたり,SOZip最適化の状態を表示したり,SOZipファイルを検証したりするために使用できます.</p></li>
</ul>
</section>
</section>
<section id="vsigzip-gzipped-file">
<span id="vsigzip"></span><h2>/vsigzip/ (gzipped ファイル)<a class="headerlink" href="#vsigzip-gzipped-file" title="Link to this heading"></a></h2>
<p>/vsigzip/ は,事前に解凍せずにGZip (.gz) ファイルを読み取ることができるファイルハンドラです.</p>
<p>GDALによって解凍された形式でgzippedファイルを表示するには, <code class="file docutils literal notranslate"><span class="pre">/vsigzip/path/to/the/file.gz</span></code> 構文を使用する必要があります.ここで <code class="file docutils literal notranslate"><span class="pre">path/to/the/file.gz</span></code> は相対または絶対です.</p>
<p>/vsigzip/ ハンドラに固有の次の設定オプションがあります:</p>
<ul class="simple">
<li><p id="config-CPL_VSIL_GZIP_WRITE_PROPERTIES"><strong>CPL_VSIL_GZIP_WRITE_PROPERTIES=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">YES</span></code>. If <code class="docutils literal notranslate"><span class="pre">YES</span></code>, when the file is located in a writable location, a file with
extension .gz.properties is created with an indication of the
uncompressed file size.</p>
</li>
</ul>
<p>例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">vsigzip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">gz</span> <span class="c1"># (relative path to the .gz)</span>
<span class="o">/</span><span class="n">vsigzip</span><span class="o">//</span><span class="n">home</span><span class="o">/</span><span class="n">even</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">gz</span> <span class="c1"># (absolute path to the .gz)</span>
<span class="o">/</span><span class="n">vsigzip</span><span class="o">/</span><span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">even</span>\<span class="n">my</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<p><a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> は解凍されたファイルサイズを返しますが,これは大きなファイルでは遅い操作である可能性があり,ファイル全体を解凍する必要があるためです.ファイルの末尾やランダムな場所にシークすることも同様に遅いです.このプロセスを高速化するために,メモリ内で&quot;スナップショット&quot;が内部的に作成され,すでに解凍されたファイルの一部により速い方法でシークできるようになります.このスナップショットのメカニズムは/vsizip/ファイルにも適用されます.</p>
<p>書き込み機能も利用できますが,読み取りおよび書き込み操作を交互に行うことはできません.</p>
<p>GDAL 2.4以降, <a class="reference internal" href="configoptions.html#config-GDAL_NUM_THREADS"><code class="docutils literal notranslate"><span class="pre">GDAL_NUM_THREADS</span></code></a> 設定オプションを整数または <code class="docutils literal notranslate"><span class="pre">ALL_CPUS</span></code> に設定することで,単一ファイルのマルチスレッド圧縮を有効にすることができます.これはpigzユーティリティの独立モードに類似しています.デフォルトでは,入力ストリームは1MBのチャンクに分割されます(チャンクサイズは <a class="reference internal" href="configoptions.html#config-CPL_VSIL_DEFLATE_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_DEFLATE_CHUNK_SIZE</span></code></a> 設定オプションで調整でき, &quot;x K&quot; または &quot;x M&quot; のような値が使用できます),そして各チャンクは独立して圧縮されます(そして9バイトのマーカー 0x00 0x00 0xFF 0xFF 0x00 0x00 0x00 0xFF 0xFF で終了し,ストリームと辞書の完全なフラッシュを示し,各チャンクの独立したデコードを可能にします).これは圧縮率をわずかに低下させるため,非常に小さなチャンクサイズは避けるべきです.</p>
</section>
<section id="vsitar-tar-tgz-archives">
<span id="vsitar"></span><h2>/vsitar/ (.tar, .tgz アーカイブ)<a class="headerlink" href="#vsitar-tar-tgz-archives" title="Link to this heading"></a></h2>
<p>/vsitar/ は,事前に解凍せずに通常の非圧縮 .tar または圧縮 .tgz または .tar.gz アーカイブを読み取ることができるファイルハンドラです.</p>
<p>.tar, .tgz, .tar.gz ファイル内のファイルを指すには,ファイル名は <code class="file docutils literal notranslate"><span class="pre">/vsitar/path/to/the/file.tar/path/inside/the/tar/file</span></code> の形式である必要があります.ここで <code class="file docutils literal notranslate"><span class="pre">path/to/the/file.tar</span></code> は相対または絶対であり, <code class="file docutils literal notranslate"><span class="pre">path/inside/the/tar/file</span></code> はアーカイブ内のファイルへの相対パスです.</p>
<p>.tarをディレクトリとして使用するには, <code class="file docutils literal notranslate"><span class="pre">/vsizip/path/to/the/file.tar</span></code> または <code class="file docutils literal notranslate"><span class="pre">/vsitar/path/to/the/file.tar/subdir</span></code> を使用できます.ディレクトリリストは <a class="reference internal" href="../api/cpl.html#_CPPv410VSIReadDirPKc" title="VSIReadDir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIReadDir()</span></code></a> で利用できます. <a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> (&quot;/vsitar/...&quot;) 呼び出しはファイルの解凍されたサイズを返します. TARファイル内のディレクトリは通常のファイルと同様に,VSI_ISDIR(stat.st_mode) マクロで区別できます.ディレクトリリストとファイル統計の取得は高速な操作です.</p>
<p>注: .tarファイルがそのルートにある単一のファイルを含む特定の場合には, <code class="file docutils literal notranslate"><span class="pre">/vsitar/path/to/the/file.tar</span></code> とだけ記述するだけで動作します.</p>
<p>例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">vsitar</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tar</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span> <span class="c1"># (relative path to the .tar)</span>
<span class="o">/</span><span class="n">vsitar</span><span class="o">//</span><span class="n">home</span><span class="o">/</span><span class="n">even</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tar</span><span class="o">/</span><span class="n">subdir</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span> <span class="c1"># (absolute path to the .tar)</span>
<span class="o">/</span><span class="n">vsitar</span><span class="o">/</span><span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">even</span>\<span class="n">my</span><span class="o">.</span><span class="n">tar</span>\<span class="n">subdir</span>\<span class="n">my</span><span class="o">.</span><span class="n">tif</span>
</pre></div>
</div>
<p>GDAL 2.2以降,連鎖を可能にし,.tar拡張子に依存しないようにするための代替構文が利用可能です.例えば, <code class="docutils literal notranslate"><span class="pre">/vsitar/{/path/to/the/archive}/path/inside/the/tar/file</span></code>. <code class="file docutils literal notranslate"><span class="pre">/path/to/the/archive</span></code>  はこの代替構文を使用することもできます.</p>
</section>
<section id="vsi7z-7z-archives">
<span id="vsi7z"></span><h2>/vsi7z/ (.7z アーカイブ)<a class="headerlink" href="#vsi7z-7z-archives" title="Link to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.7.</span></p>
</div>
<p>/vsi7z/ は,事前に解凍せずに7zアーカイブを読み取ることができるファイルハンドラです.このファイルシステムは読み取り専用です.ディレクトリリストと <a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> は,上記のファイルシステムと同様に利用できます.</p>
<p>これには,`libarchive &lt;<a class="reference external" href="https://libarchive.org/">https://libarchive.org/</a>&gt;`__ に対してGDALがビルドされていることが必要です(および実用的な使用のためにlibarchiveがLZMAサポートを持っていることが必要です).</p>
<p>7zファイル内のファイルを指すには,ファイル名は <code class="file docutils literal notranslate"><span class="pre">/vsi7z/path/to/the/file.7z/path/inside/the/7z/file</span></code> の形式である必要があります.ここで <code class="file docutils literal notranslate"><span class="pre">path/to/the/file.7z</span></code>  は相対または絶対であり, <code class="file docutils literal notranslate"><span class="pre">path/inside/the/7z/file</span></code> はアーカイブ内のファイルへの相対パスです.</p>
<p>この仮想ファイルシステムによって認識されるデフォルトの拡張子は次のとおりです: <code class="docutils literal notranslate"><span class="pre">7z</span></code>, <code class="docutils literal notranslate"><span class="pre">lpk</span></code> (Esri ArcGIS Layer Package), <code class="docutils literal notranslate"><span class="pre">lpkx</span></code>, <code class="docutils literal notranslate"><span class="pre">mpk</span></code> (Esri ArcGIS Map Package), <code class="docutils literal notranslate"><span class="pre">mpkx</span></code> および <code class="docutils literal notranslate"><span class="pre">ppkx</span></code> (Esri ArcGIS Pro Project Package).</p>
<p>これらの拡張子に依存せずに連鎖を可能にし,代替構文が利用可能です.例えば, <code class="docutils literal notranslate"><span class="pre">/vsi7z/{/path/to/the/archive}/path/inside/the/archive</span></code>. <code class="file docutils literal notranslate"><span class="pre">/path/to/the/archive</span></code>  はこの代替構文を使用することもできます.</p>
<p>大きな圧縮ファイル内でのランダムシークは,後方シークが必要な場合に効率的ではありません(解凍はファイルの先頭から再開されます).パフォーマンスは,連続した読み取りで最も良くなります.</p>
</section>
<section id="vsirar-rar-archives">
<span id="vsirar"></span><h2>/vsirar/ (.rar アーカイブ)<a class="headerlink" href="#vsirar-rar-archives" title="Link to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.7.</span></p>
</div>
<p>/vsirar/ は,事前に解凍せずに <a class="reference external" href="https://en.wikipedia.org/wiki/RAR_(file_format)">RAR</a> アーカイブを読み取ることができるファイルハンドラです.このファイルシステムは読み取り専用です.ディレクトリリストと <a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> は,上記のファイルシステムと同様に利用できます.</p>
<p>これには,`libarchive &lt;<a class="reference external" href="https://libarchive.org/">https://libarchive.org/</a>&gt;`__ に対してGDALがビルドされていることが必要です(および実用的な使用のためにlibarchiveがLZMAサポートを持っていることが必要です).</p>
<p>RARファイル内のファイルを指すには,ファイル名は <code class="file docutils literal notranslate"><span class="pre">/vsirar/path/to/the/file.rar/path/inside/the/rar/file</span></code> の形式である必要があります.ここで <code class="file docutils literal notranslate"><span class="pre">path/to/the/file.rar</span></code>  は相対または絶対であり, <code class="file docutils literal notranslate"><span class="pre">path/inside/the/rar/file</span></code> はアーカイブ内のファイルへの相対パスです.</p>
<p>この仮想ファイルシステムによって認識されるデフォルトの拡張子は次のとおりです: <code class="docutils literal notranslate"><span class="pre">rar</span></code></p>
<p>これらの拡張子に依存せずに連鎖を可能にし,代替構文が利用可能です.例えば, <code class="docutils literal notranslate"><span class="pre">/vsirar/{/path/to/the/archive}/path/inside/the/archive</span></code>. <code class="file docutils literal notranslate"><span class="pre">/path/to/the/archive</span></code>  はこの代替構文を使用することもできます.</p>
<p>大きな圧縮ファイル内でのランダムシークは,後方シークが必要な場合に効率的ではありません(解凍はファイルの先頭から再開されます).パフォーマンスは,連続した読み取りで最も良くなります.</p>
</section>
<section id="network-based-file-systems">
<span id="id1"></span><h2>ネットワークベースのファイルシステム<a class="headerlink" href="#network-based-file-systems" title="Link to this heading"></a></h2>
<p>特定の署名認証スキームを必要としないオンラインリソース用の一般的な <a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> ファイルシステムハンドラが存在します.これは, <a class="reference internal" href="#vsis3"><span class="std std-ref">/vsis3/</span></a>,  <a class="reference internal" href="#vsigs"><span class="std std-ref">/vsigs/</span></a>, <a class="reference internal" href="#vsiaz"><span class="std std-ref">/vsiaz/</span></a>, <a class="reference internal" href="#vsioss"><span class="std std-ref">/vsioss/</span></a> または <a class="reference internal" href="#vsiswift"><span class="std std-ref">/vsiswift/</span></a> のような商用クラウドストレージサービス用のサブファイルシステムに特化しています.</p>
<p>ファイル全体をストリーミング方式で読み取ることが可能な場合,効率を上げるために, <a class="reference internal" href="#vsicurl-streaming"><span class="std std-ref">/vsicurl_streaming/</span></a> および上記のクラウドストレージサービス用のその他のバリアントを使用することをお勧めします.</p>
<section id="how-to-set-credentials">
<h3>資格情報の設定方法は？<a class="headerlink" href="#how-to-set-credentials" title="Link to this heading"></a></h3>
<p>クラウドストレージサービスでは,資格情報の設定が必要です.それらのうちのいくつかについては,設定ファイル(~/.aws/config, ~/.boto, ..) または環境変数/設定オプションを通じて提供できます.</p>
<p>GDAL 3.6以降, <a class="reference internal" href="../api/cpl.html#_CPPv424VSISetPathSpecificOptionPKcPKcPKc" title="VSISetPathSpecificOption"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetPathSpecificOption()</span></code></a> を使用して,ファイルパスのレベルで設定オプションを設定できます.これにより,同じ仮想ファイルシステムを使用しても異なる資格情報(例: バケット &quot;/vsis3/foo&quot; と &quot;/vsis3/bar&quot; の異なる資格情報)を使用する場合に簡単になります.</p>
<p>GDAL 3.5以降,資格情報(またはパス固有のオプション)は, <a class="reference internal" href="../api/cpl.html#_CPPv428CPLLoadConfigOptionsFromFilePKci" title="CPLLoadConfigOptionsFromFile"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CPLLoadConfigOptionsFromFile()</span></code></a> で明示的にロードされる特定の設定ファイル,または <a class="reference internal" href="../api/cpl.html#_CPPv439CPLLoadConfigOptionsFromPredefinedFilesv" title="CPLLoadConfigOptionsFromPredefinedFiles"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CPLLoadConfigOptionsFromPredefinedFiles()</span></code></a> によって自動的にロードされるデフォルトの設定ファイルのいずれかに, <a class="reference internal" href="configoptions.html#gdal-configuration-file"><span class="std std-ref">GDAL設定ファイル</span></a> で指定できます.</p>
<p>それらは <code class="docutils literal notranslate"><span class="pre">[credentials]</span></code> セクションの下に配置する必要があり,各パスプレフィックスについては,その名前が <code class="docutils literal notranslate"><span class="pre">[.</span></code> で始まる相対的なサブセクションの下に配置する必要があります(例: <code class="docutils literal notranslate"><span class="pre">[.some_arbitrary_name]</span></code>),そして最初のキーは <code class="docutils literal notranslate"><span class="pre">path</span></code> です.` .. code-block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">credentials</span><span class="p">]</span>

<span class="p">[</span><span class="o">.</span><span class="n">private_bucket</span><span class="p">]</span>
<span class="n">path</span><span class="o">=/</span><span class="n">vsis3</span><span class="o">/</span><span class="n">my_private_bucket</span>
<span class="n">AWS_SECRET_ACCESS_KEY</span><span class="o">=...</span>
<span class="n">AWS_ACCESS_KEY_ID</span><span class="o">=...</span>

<span class="p">[</span><span class="o">.</span><span class="n">sentinel_s2_l1c</span><span class="p">]</span>
<span class="n">path</span><span class="o">=/</span><span class="n">vsis3</span><span class="o">/</span><span class="n">sentinel</span><span class="o">-</span><span class="n">s2</span><span class="o">-</span><span class="n">l1c</span>
<span class="n">AWS_REQUEST_PAYER</span><span class="o">=</span><span class="n">requester</span>
</pre></div>
</div>
</section>
<section id="network-cloud-friendliness-and-file-formats">
<h3>ネットワーク/クラウド対応性とファイルフォーマット<a class="headerlink" href="#network-cloud-friendliness-and-file-formats" title="Link to this heading"></a></h3>
<p>ほとんどのGDALラスターおよびベクトルファイルシステムは, /vsicurl/ およびその他の派生仮想ファイルシステムを使用してリモートでアクセスできますが,パフォーマンスはフォーマットに大きく依存し,特定のフォーマットでも特定のデータ配置に依存します.パフォーマンスはまた,ファイルへの特定のアクセスパターンにも依存します.</p>
<p>ラスターファイルのインタラクティブな可視化のためには,ファイルは理想的には次の特性を持つべきです:</p>
<ul class="simple">
<li><p>正方形のタイルでタイリングされているべきです</p></li>
<li><p>ファイル内にタイルの位置のインデックスがあるべきです</p></li>
<li><p>オーバービュー/ピラミッドがあるべきです</p></li>
</ul>
<section id="tiff-geotiff">
<h4>TIFF/GeoTIFF<a class="headerlink" href="#tiff-geotiff" title="Link to this heading"></a></h4>
<p><a class="reference internal" href="../drivers/raster/cog.html#raster-cog"><span class="std std-ref">COG -- Cloud Optimized GeoTIFF generator</span></a> ドライバによって生成されたクラウド最適化GeoTIFFファイルは,ネットワークアクセスに適しています.より一般的には,オーバービューを持つタイルGeoTIFFファイルが適しています.</p>
</section>
<section id="jpeg2000">
<h4>JPEG2000<a class="headerlink" href="#jpeg2000" title="Link to this heading"></a></h4>
<p>JPEG2000は,その目的に適したレイアウトを使用し,最適化されたJPEG200ライブラリを使用している場合を除いて,一般的にネットワークアクセスには適していません.</p>
<p>JPEG2000ファイルには,さまざまな種類があります: シングルタイル vs タイル,異なる進行順序(これはシングルタイルアクセスに特に重要です),およびオプションのマーカーがあります</p>
<p>OpenJPEGライブラリ(<a class="reference internal" href="../drivers/raster/jp2openjpeg.html#raster-jp2openjpeg"><span class="std std-ref">JP2OpenJPEG -- JPEG2000 driver based on OpenJPEG library</span></a> ドライバを介して使用可能)は,書かれた時点で,ピクセルクエリの関心領域に参加する各タイルパートを全体で取り込む必要があります(したがって,シングルタイルファイルの場合,ファイル全体を取り込む必要があります).また,タイルインデックスの相当物であるTLM (Tile-Part length) マーカーを使用しません,またはタイル内のパケットのインデックスであるPLT (Packed Length, tile-part header) を使用しません. Kakaduライブラリ(<a class="reference internal" href="../drivers/raster/jp2kak.html#raster-jp2kak"><span class="std std-ref">JP2KAK -- JPEG 2000 (based on Kakadu SDK)</span></a> ドライバを介して使用可能)は,これらのマーカーを使用して取り込むバイト数を制限できます(ただし,シングルタイルラスタの場合,パフォーマンスがまだ低下する可能性があります).</p>
<p><a class="reference external" href="https://raw.githubusercontent.com/OSGeo/gdal/master/swig/python/gdal-utils/osgeo_utils/samples/dump_jp2.py">dump_jp2.py</a> Pythonスクリプトを使用して,指定されたJPEG200ファイルの特性を確認できます.出力で調査するのに興味のあるフィールドは次のとおりです:</p>
<ul class="simple">
<li><p>タイルサイズ(<code class="docutils literal notranslate"><span class="pre">SIZ</span></code> マーカーの <code class="docutils literal notranslate"><span class="pre">XTsiz</span></code> および <code class="docutils literal notranslate"><span class="pre">YTsiz</span></code> フィールドで指定される)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TLM</span></code> マーカーの存在</p></li>
<li><p>the presence of <code class="docutils literal notranslate"><span class="pre">PLT</span></code> markers</p></li>
</ul>
</section>
</section>
<section id="vsicurl-http-https-ftp-files-random-access">
<span id="vsicurl"></span><h3>/vsicurl/ (http/https/ftp ファイル: ランダムアクセス)<a class="headerlink" href="#vsicurl-http-https-ftp-files-random-access" title="Link to this heading"></a></h3>
<p>/vsicurl/ は,事前にファイル全体をダウンロードすることなく,HTTP/FTPウェブプロトコルを介して利用可能なファイルのランダム読み取りを可能にするファイルシステムハンドラです.これには,libcurlを利用してGDALがビルドされている必要があります.</p>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsicurl/http[s]://path/to/remote/resource</span></code> または <code class="file docutils literal notranslate"><span class="pre">/vsicurl/ftp://path/to/remote/resource</span></code> の形式であり, <code class="file docutils literal notranslate"><span class="pre">path/to/remote/resource</span></code> はリモートリソースのURLです.</p>
<p><strong class="program">ogrinfo</strong> を使用してインターネット上のシェープファイルを読み取る例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="o">-</span><span class="n">al</span> <span class="o">-</span><span class="n">so</span> <span class="o">/</span><span class="n">vsicurl</span><span class="o">/</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">OSGeo</span><span class="o">/</span><span class="n">gdal</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">autotest</span><span class="o">/</span><span class="n">ogr</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">poly</span><span class="o">.</span><span class="n">shp</span>
</pre></div>
</div>
<p>GDAL 2.3以降,オプションは,次の構文でファイル名に渡すことができます: <code class="docutils literal notranslate"><span class="pre">/vsicurl?[option_i=val_i&amp;]*url=http://...</span></code> ここで,各オプション名と値(&quot;url&quot;の値を含む)はURLエンコードされています.現在サポートされているオプションは次のとおりです:</p>
<ul class="simple">
<li><p>use_head=yes/no: HTTP HEADリクエストを送信できるかどうか.デフォルトはYES.このオプションを設定すると, <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_USE_HEAD"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_USE_HEAD</span></code></a> 設定オプションの動作が上書きされます.</p></li>
<li><p>max_retry=number: デフォルトは0.このオプションを設定すると, <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_MAX_RETRY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_MAX_RETRY</span></code></a> 設定オプションの動作が上書きされます.</p></li>
<li><p>retry_delay=number_in_seconds: デフォルトは30.このオプションを設定すると, <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_RETRY_DELAY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_RETRY_DELAY</span></code></a> 設定オプションの動作が上書きされます.</p></li>
<li><p>retry_codes=``ALL`` またはカンマ区切りのHTTPエラーコードのリスト.このオプションを設定すると, <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_RETRY_CODES"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_RETRY_CODES</span></code></a> 設定オプションの動作が上書きされます. (GDAL &gt;= 3.10)</p></li>
<li><p>list_dir=yes/no: ファイルが存在するディレクトリのファイルリストを読み取る試みを行うかどうか.デフォルトはYESです.</p></li>
<li><p>useragent=value: HTTP UserAgent header</p></li>
<li><p>referer=value: HTTP Referer header</p></li>
<li><p>cookie=value: HTTP Cookie header</p></li>
<li><p>header_file=value: 1つまたは複数の &quot;Header: Value&quot; 行を含むファイル名</p></li>
<li><p>unsafessl=yes/no</p></li>
<li><p>low_speed_time=value</p></li>
<li><p>low_speed_limit=value</p></li>
<li><p>proxy=value</p></li>
<li><p>proxyauth=value</p></li>
<li><p>proxyuserpwd=value</p></li>
<li><p>pc_url_signing=yes/no: Microsoft Planetary Computer の URL署名メカニズム(<a class="reference external" href="https://planetarycomputer.microsoft.com/docs/concepts/sas/">https://planetarycomputer.microsoft.com/docs/concepts/sas/</a>) を使用するかどうか. (GDAL &gt;= 3.5.2). GDAL 3.9以降,これは <code class="docutils literal notranslate"><span class="pre">VSICURL_PC_URL_SIGNING</span></code> というパス固有のオプション( cf <a class="reference internal" href="../api/cpl.html#_CPPv424VSISetPathSpecificOptionPKcPKcPKc" title="VSISetPathSpecificOption"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetPathSpecificOption()</span></code></a>) を <code class="docutils literal notranslate"><span class="pre">YES</span></code> に設定することでも設定できます.</p></li>
<li><p>pc_collection=name: Planetary Computer URL署名のデータセットのコレクション名. pc_url_signing=yes の場合のみ使用されます. (GDAL &gt;= 3.5.2)</p></li>
</ul>
<p>部分ダウンロード(サーバーがランダム読み取りをサポートしている必要があります)は,デフォルトで16 KBの粒度で行われます.GDAL 2.3以降,チャンクサイズは,バイト単位の値で <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_CHUNK_SIZE</span></code></a> 設定オプションで設定できます.ドライバが連続読み取りを検出すると,ダウンロードパフォーマンスを向上させるために,チャンクサイズを <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_CHUNK_SIZE</span></code></a> の128倍(デフォルトで2 MB)まで徐々に増やします.</p>
<p>さらに,すべてのダウンロードコンテンツ間で共有される16 MBのグローバル最近使用されたキャッシュが使用され,ファイルハンドルが閉じられ再オープンされると,プロセスの寿命中または <a class="reference internal" href="../api/cpl.html#_CPPv417VSICurlClearCachev" title="VSICurlClearCache"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSICurlClearCache()</span></code></a> が呼び出されるまで,キャッシュ内のコンテンツが再利用される可能性があります. GDAL 2.3以降,このグローバルLRUキャッシュのサイズは,設定オプション <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_CACHE_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_CACHE_SIZE</span></code></a> (バイト単位) を設定することで変更できます.</p>
<p>連続読み取りを最適化するために <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_CHUNK_SIZE</span></code></a> の値を増やす場合, <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_CACHE_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_CACHE_SIZE</span></code></a> の値も <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_CHUNK_SIZE</span></code></a> の値の128倍に増やすことをお勧めします.</p>
<p>GDAL 2.3以降, <a class="reference internal" href="configoptions.html#config-GDAL_INGESTED_BYTES_AT_OPEN"><code class="docutils literal notranslate"><span class="pre">GDAL_INGESTED_BYTES_AT_OPEN</span></code></a> 設定オプションを設定して,ファイルを開いたときにGET呼び出しで読み取るバイト数を強制することができます(Cloud optimized geotiff の大きなヘッダーを読む際にパフォーマンスを向上させるのに役立ちます).</p>
<p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_PROXY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_PROXY</span></code></a> (HTTPおよびHTTPSプロトコルの両方), <a class="reference internal" href="configoptions.html#config-GDAL_HTTPS_PROXY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTPS_PROXY</span></code></a> (HTTPSプロトコルのみ), <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_PROXYUSERPWD"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_PROXYUSERPWD</span></code></a> および <a class="reference internal" href="configoptions.html#config-GDAL_PROXY_AUTH"><code class="docutils literal notranslate"><span class="pre">GDAL_PROXY_AUTH</span></code></a> 設定オプションを使用して,プロキシサーバを定義できます.使用する構文は, Curl <code class="docutils literal notranslate"><span class="pre">CURLOPT_PROXY</span></code>, <code class="docutils literal notranslate"><span class="pre">CURLOPT_PROXYUSERPWD</span></code> および <code class="docutils literal notranslate"><span class="pre">CURLOPT_PROXYAUTH</span></code> オプションの構文です.</p>
<p>GDAL 2.1.3以降, <a class="reference internal" href="configoptions.html#config-CURL_CA_BUNDLE"><code class="docutils literal notranslate"><span class="pre">CURL_CA_BUNDLE</span></code></a> または <a class="reference internal" href="configoptions.html#config-SSL_CERT_FILE"><code class="docutils literal notranslate"><span class="pre">SSL_CERT_FILE</span></code></a> 設定オプションを使用して,認証局(CA)バンドルファイルのパスを設定できます(指定されていない場合, curl はシステムの場所にファイルを使用します).</p>
<p>GDAL 2.3以降,追加のHTTPヘッダーを送信するために, <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_HEADER_FILE"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_HEADER_FILE</span></code></a> 設定オプションを設定して,&quot;key: value&quot; HTTPヘッダーを含むテキストファイルのファイル名を指定できます.</p>
<p>代替として,GDAL 3.6以降, <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_HEADERS"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_HEADERS</span></code></a> 設定オプションを使用してヘッダーを指定することもできます. <a class="reference internal" href="configoptions.html#config-CPL_CURL_VERBOSE"><code class="docutils literal notranslate"><span class="pre">CPL_CURL_VERBOSE=YES</span></code></a> は, <code class="docutils literal notranslate"><span class="pre">--debug</span></code> と組み合わせて,それらを表示することができます.</p>
<p>GDAL 2.3以降, <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_MAX_RETRY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_MAX_RETRY</span></code></a> (試行回数) および <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_RETRY_DELAY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_RETRY_DELAY</span></code></a> (秒単位) 設定オプションを設定することで,HTTPエラー429, 502, 503または504の場合にリクエストの再試行が行われます.</p>
<p>GDAL 3.6以降,以下の設定オプションでTCP keep-alive機能を制御できます(詳細な説明については,https://daniel.haxx.se/blog/2020/02/10/curl-ootw-keepalive-time/ を参照してください):</p>
<ul class="simple">
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_TCP_KEEPALIVE"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_TCP_KEEPALIVE</span></code></a> = YES/NO. TCP keep-alive を有効にするかどうか.デフォルトはNOです</p></li>
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_TCP_KEEPIDLE"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_TCP_KEEPIDLE</span></code></a> = integer, 秒単位. Keep-alive アイドル時間. デフォルトは60です.GDAL_HTTP_TCP_KEEPALIVE=YES の場合のみ考慮されます.</p></li>
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_TCP_KEEPINTVL"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_TCP_KEEPINTVL</span></code></a> = integer, 秒単位. Keep-alive プローブ間の間隔時間. デフォルトは60です.GDAL_HTTP_TCP_KEEPALIVE=YES の場合のみ考慮されます.</p></li>
</ul>
<p>GDAL 3.7以降,以下の設定オプションでSSLクライアント証明書のサポートを制御できます:</p>
<ul class="simple">
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_SSLCERT"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_SSLCERT</span></code></a> = filename. SSLクライアント証明書のファイル名. Cf <a class="reference external" href="https://curl.se/libcurl/c/CURLOPT_SSLCERT.html">https://curl.se/libcurl/c/CURLOPT_SSLCERT.html</a></p></li>
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_SSLCERTTYPE"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_SSLCERTTYPE</span></code></a> = string. SSL証明書の形式: &quot;PEM&quot; または &quot;DER&quot;. Cf <a class="reference external" href="https://curl.se/libcurl/c/CURLOPT_SSLCERTTYPE.html">https://curl.se/libcurl/c/CURLOPT_SSLCERTTYPE.html</a></p></li>
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_SSLKEY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_SSLKEY</span></code></a> = filename. TLSおよびSSLクライアント証明書のプライベートキーファイル. Cf <a class="reference external" href="https://curl.se/libcurl/c/CURLOPT_SSLKEY.html">https://curl.se/libcurl/c/CURLOPT_SSLKEY.html</a></p></li>
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_KEYPASSWD"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_KEYPASSWD</span></code></a> = string. プライベートキーのパスフレーズ. Cf <a class="reference external" href="https://curl.se/libcurl/c/CURLOPT_KEYPASSWD.html">https://curl.se/libcurl/c/CURLOPT_KEYPASSWD.html</a></p></li>
</ul>
<p>一般的には,設定オプションを介して利用可能な <a class="reference internal" href="../api/cpl.html#_CPPv412CPLHTTPFetchPKc12CSLConstList" title="CPLHTTPFetch"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CPLHTTPFetch()</span></code></a> のオプションが利用可能です.GDAL 3.7以降,上記の設定オプションは, <a class="reference internal" href="../api/cpl.html#_CPPv424VSISetPathSpecificOptionPKcPKcPKc" title="VSISetPathSpecificOption"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetPathSpecificOption()</span></code></a> でパス固有のオプションとしても指定できます.</p>
<p>ファイルは,設定オプション <a class="reference internal" href="configoptions.html#config-VSI_CACHE"><code class="docutils literal notranslate"><span class="pre">VSI_CACHE</span></code></a> を <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> に設定することでRAMにキャッシュできます.キャッシュサイズはデフォルトで25 MBですが,設定オプション <a class="reference internal" href="configoptions.html#config-VSI_CACHE_SIZE"><code class="docutils literal notranslate"><span class="pre">VSI_CACHE_SIZE</span></code></a> (バイト単位) を設定することで変更できます.ファイルハンドルが閉じられると,そのキャッシュ内のコンテンツは破棄されます.</p>
<p>GDAL 2.3以降, <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_NON_CACHED"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_NON_CACHED</span></code></a> 設定オプションを <code class="file docutils literal notranslate"><span class="pre">/vsicurl/http://example.com/foo.tif:/vsicurl/http://example.com/some_directory</span></code> のような値に設定できます.これにより,ファイルハンドルを閉じると,指定されたファイルに関連するすべてのキャッシュされたコンテンツがキャッシュされなくなります.これは,GDAL関連コードの実行中に変更される可能性のあるリソースを扱う際に役立ちます. 代替として, <a class="reference internal" href="../api/cpl.html#_CPPv417VSICurlClearCachev" title="VSICurlClearCache"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSICurlClearCache()</span></code></a> を使用できます.</p>
<p>GDAL 2.1以降, <code class="docutils literal notranslate"><span class="pre">/vsicurl/</span></code> は,有効期間中のAmazon S3署名URLに直接リダイレクトされたURLを問い合わせるように試みます.これにより,ラウンドトリップを最小限に抑えることができます.この動作は,設定オプション <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_USE_S3_REDIRECT"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_USE_S3_REDIRECT</span></code></a> を <code class="docutils literal notranslate"><span class="pre">NO</span></code> に設定することで無効にできます.</p>
<p><a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> は,サイズを st_size メンバーに,ファイルの性質-ファイルまたはディレクトリ-を st_mode メンバーに返します(後者は現時点ではFTPリソースでのみ信頼できます).</p>
<p><a class="reference internal" href="../api/cpl.html#_CPPv410VSIReadDirPKc" title="VSIReadDir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIReadDir()</span></code></a> は,ApacheやMicrosoft IISなどの最も一般的なWebサーバーが返すHTMLディレクトリリストを解析できるはずです.</p>
</section>
<section id="vsicurl-streaming-http-https-ftp-files-streaming">
<span id="vsicurl-streaming"></span><h3>/vsicurl_streaming/ (http/https/ftp ファイル: ストリーミング)<a class="headerlink" href="#vsicurl-streaming-http-https-ftp-files-streaming" title="Link to this heading"></a></h3>
<p>/vsicurl_streaming/ は,HTTP/FTPウェブプロトコルを介してストリーミングされたファイルのランダム読み取りを可能にするファイルシステムハンドラです.これには,libcurlを利用してGDALがビルドされている必要があります.</p>
<p>このファイルハンドラはファイル内のランダムオフセットにシークできますが,これは効率的ではありません.効率的なランダムアクセスが必要で,かつサーバーが範囲ダウンロードをサポートしている場合は,代わりに  <a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> ファイルシステムハンドラを使用する必要があります.</p>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsicurl_streaming/http[s]://path/to/remote/resource</span></code> または <code class="file docutils literal notranslate"><span class="pre">/vsicurl_streaming/ftp://path/to/remote/resource</span></code> の形式です.ここで, <code class="file docutils literal notranslate"><span class="pre">path/to/remote/resource</span></code> は,リモートリソースのURLです.</p>
<p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_PROXY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_PROXY</span></code></a> (HTTPおよびHTTPSプロトコルの両方), <a class="reference internal" href="configoptions.html#config-GDAL_HTTPS_PROXY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTPS_PROXY</span></code></a> (HTTPSプロトコルのみ), <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_PROXYUSERPWD"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_PROXYUSERPWD</span></code></a> および <a class="reference internal" href="configoptions.html#config-GDAL_PROXY_AUTH"><code class="docutils literal notranslate"><span class="pre">GDAL_PROXY_AUTH</span></code></a> 設定オプションを使用して,プロキシサーバを定義できます.使用する構文は, Curl <code class="docutils literal notranslate"><span class="pre">CURLOPT_PROXY</span></code>, <code class="docutils literal notranslate"><span class="pre">CURLOPT_PROXYUSERPWD</span></code> および <code class="docutils literal notranslate"><span class="pre">CURLOPT_PROXYAUTH</span></code> オプションの構文です.</p>
<p>GDAL 2.1.3以降, <a class="reference internal" href="configoptions.html#config-CURL_CA_BUNDLE"><code class="docutils literal notranslate"><span class="pre">CURL_CA_BUNDLE</span></code></a> または <a class="reference internal" href="configoptions.html#config-SSL_CERT_FILE"><code class="docutils literal notranslate"><span class="pre">SSL_CERT_FILE</span></code></a> 設定オプションを使用して,認証局(CA)バンドルファイルのパスを設定できます(指定されていない場合, curl はシステムの場所にファイルを使用します).</p>
<p>ファイルは,設定オプション <a class="reference internal" href="configoptions.html#config-VSI_CACHE"><code class="docutils literal notranslate"><span class="pre">VSI_CACHE</span></code></a> を <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> に設定することでRAMにキャッシュできます.キャッシュサイズはデフォルトで25 MBですが,設定オプション <a class="reference internal" href="configoptions.html#config-VSI_CACHE_SIZE"><code class="docutils literal notranslate"><span class="pre">VSI_CACHE_SIZE</span></code></a> (バイト単位) を設定することで変更できます.</p>
<p><a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> は,サイズを st_size メンバーに,ファイルの性質-ファイルまたはディレクトリ-を st_mode メンバーに返します(後者は現時点ではFTPリソースでのみ信頼できます).</p>
</section>
<section id="vsis3-aws-s3-files">
<span id="vsis3"></span><h3>/vsis3/ (AWS S3 ファイル)<a class="headerlink" href="#vsis3-aws-s3-files" title="Link to this heading"></a></h3>
<p>/vsis3/ は,AWS S3バケットで利用可能な(主に非公開の)ファイルのランダム読み取りを可能にするファイルシステムハンドラです.これには,libcurlを利用してGDALがビルドされている必要があります.</p>
<p>また,ファイルの順次書き込みも可能です.その場合,シークや読み取り操作は許可されません.したがって,GTiffドライバを使用してGeoTIFFファイルに直接書き込むことはサポートされません.ただし,GDAL 3.2以降, <a class="reference internal" href="configoptions.html#config-CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE</span></code></a> 設定オプションを <code class="docutils literal notranslate"><span class="pre">YES</span></code> に設定すると,ランダム書き込みアクセスが可能になります( <a class="reference internal" href="configoptions.html#config-CPL_TMPDIR"><code class="docutils literal notranslate"><span class="pre">CPL_TMPDIR</span></code></a> 設定オプションで制御される一時ローカルファイルの作成が含まれます). <a class="reference internal" href="../api/cpl.html#_CPPv49VSIUnlinkPKc" title="VSIUnlink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIUnlink()</span></code></a> によるファイルの削除もサポートされています. GDAL 2.3以降, <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> でディレクトリの作成, <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> で(空の)ディレクトリの削除も可能です.</p>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsis3/bucket/key</span></code> の形式です.ここで, <code class="docutils literal notranslate"><span class="pre">bucket</span></code> はS3バケットの名前であり,``key`` はS3オブジェクトの&quot;key&quot;であり,サブディレクトリを含む可能性のあるファイル名です.</p>
<p><a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> の一般的な情報が適用されます.</p>
<p>/vsis3/ ハンドラに固有の以下の設定オプションがあります:</p>
<ul class="simple">
<li><p id="config-AWS_NO_SIGN_REQUEST"><strong>AWS_NO_SIGN_REQUEST=[YES/NO]: </strong>Determines whether to disable request signing.</p>
</li>
<li><p id="config-AWS_ACCESS_KEY_ID"><strong>AWS_ACCESS_KEY_ID=value: </strong>Access key ID used for authentication. If using temporary credentials,
<a class="reference internal" href="#config-AWS_SESSION_TOKEN"><code class="docutils literal notranslate"><span class="pre">AWS_SESSION_TOKEN</span></code></a> must be set.</p>
</li>
<li><p id="config-AWS_SECRET_ACCESS_KEY"><strong>AWS_SECRET_ACCESS_KEY=value: </strong>Secret access key associated with <a class="reference internal" href="#config-AWS_ACCESS_KEY_ID"><code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code></a>.</p>
</li>
<li><p id="config-AWS_SESSION_TOKEN"><strong>AWS_SESSION_TOKEN=value: </strong>Session token used for validation of temporary credentials
(<a class="reference internal" href="#config-AWS_ACCESS_KEY_ID"><code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code></a> and <a class="reference internal" href="#config-AWS_SECRET_ACCESS_KEY"><code class="docutils literal notranslate"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code></a>)</p>
</li>
<li><p id="config-CPL_AWS_CREDENTIALS_FILE"><strong>CPL_AWS_CREDENTIALS_FILE=&lt;filename&gt;: </strong>Location of an AWS credentials file. If not specified, the standard
location of <code class="docutils literal notranslate"><span class="pre">~/.aws/credentials</span></code> will be checked.</p>
</li>
<li><p id="config-AWS_DEFAULT_PROFILE"><strong>AWS_DEFAULT_PROFILE=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">default</span></code>. Name of AWS profile.</p>
</li>
<li><p id="config-AWS_PROFILE"><strong>AWS_PROFILE=value: </strong> (GDAL &gt;= 3.2)  Defaults to <code class="docutils literal notranslate"><span class="pre">default</span></code>. Name of AWS profile.</p>
</li>
<li><p id="config-AWS_CONFIG_FILE"><strong>AWS_CONFIG_FILE=value: </strong>Location of a config file that may provide credentials and the AWS
region. if not specified the standard location of <code class="docutils literal notranslate"><span class="pre">~/.aws/credentials</span></code>
will be checked.</p>
</li>
<li><p id="config-AWS_ROLE_ARN"><strong>AWS_ROLE_ARN=value: </strong> (GDAL &gt;= 3.6) Amazon Resource Name (ARN) specifying the role to use for authentication
via the <a class="reference external" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html">AssumeRoleWithWebIdentity API</a>.</p>
</li>
<li><p id="config-AWS_WEB_IDENTITY_TOKEN_FILE"><strong>AWS_WEB_IDENTITY_TOKEN_FILE=&lt;filename&gt;: </strong> (GDAL &gt;= 3.6) <p>Duplicate explicit target name: &quot;assumerolewithwebidentity api&quot;.</p>
<p>認証に使用するアイデンティティトークンファイルへのパス. <a class="reference external" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html">AssumeRoleWithWebIdentity API</a> を介した認証に使用されます.</p>
</p>
</li>
<li><p id="config-AWS_REGION"><strong>AWS_REGION=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">us-east-1</span></code>. Set the AWS region to which requests should be sent. Overridden
by <a class="reference internal" href="#config-AWS_DEFAULT_REGION"><code class="docutils literal notranslate"><span class="pre">AWS_DEFAULT_REGION</span></code></a>.</p>
</li>
<li><p id="config-AWS_DEFAULT_REGION"><strong>AWS_DEFAULT_REGION=value: </strong>Set the AWS region to which requests should be sent.</p>
</li>
<li><p id="config-AWS_REQUEST_PAYER"><strong>AWS_REQUEST_PAYER=requester: </strong>Set to <code class="docutils literal notranslate"><span class="pre">requester</span></code> to access a Requester Pays bucket and acknowledge
associated charges.</p>
</li>
<li><p id="config-AWS_S3_ENDPOINT"><strong>AWS_S3_ENDPOINT=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">s3.amazonaws.com</span></code>. Allows the use of /vsis3/ with non-AWS remote object stores that use the
AWS S3 protocol.</p>
</li>
<li><p id="config-AWS_HTTPS"><strong>AWS_HTTPS=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">YES</span></code>. If <code class="docutils literal notranslate"><span class="pre">YES</span></code>, AWS resources will be accessed using HTTPS. If <code class="docutils literal notranslate"><span class="pre">NO</span></code>, HTTP
will be used.</p>
</li>
<li><p id="config-AWS_VIRTUAL_HOSTING"><strong>AWS_VIRTUAL_HOSTING=[TRUE/FALSE]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>. Select the method of accessing a bucket.
If <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, identifies the bucket via a virtual bucket host name, e.g.: mybucket.cname.domain.com.
If <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>, identifies the bucket as the top-level directory in the URI, e.g.: cname.domain.com/mybucket</p>
</li>
<li><p id="config-VSIS3_CHUNK_SIZE"><strong>VSIS3_CHUNK_SIZE=&lt;MB&gt;: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">50</span></code>. Set the chunk size for multipart uploads.</p>
</li>
<li><p id="config-CPL_VSIL_CURL_IGNORE_GLACIER_STORAGE"><strong>CPL_VSIL_CURL_IGNORE_GLACIER_STORAGE=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">YES</span></code>. When listing a directory, ignore files with <code class="docutils literal notranslate"><span class="pre">GLACIER</span></code> storage class.
Superseded by <a class="reference internal" href="#config-CPL_VSIL_CURL_IGNORE_STORAGE_CLASSES"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_IGNORE_STORAGE_CLASSES</span></code></a>.</p>
</li>
<li><p id="config-CPL_VSIL_CURL_IGNORE_STORAGE_CLASSES"><strong>CPL_VSIL_CURL_IGNORE_STORAGE_CLASSES=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">GLACIER\,DEEP_ARCHIVE</span></code>. Comma-separated list of storage class names that should be ignored when
listing a directory. If set to empty, objects of all storage classes are
retrieved).</p>
</li>
<li><p id="config-CPL_VSIS3_USE_BASE_RMDIR_RECURSIVE"><strong>CPL_VSIS3_USE_BASE_RMDIR_RECURSIVE=[YES/NO]: </strong> (GDAL &gt;= 3.2)  Defaults to <code class="docutils literal notranslate"><span class="pre">NO</span></code>. If <code class="docutils literal notranslate"><span class="pre">YES</span></code>, recursively delete objects to avoid using batch deletion.</p>
</li>
<li><p id="config-CPL_VSIS3_CREATE_DIR_OBJECT"><strong>CPL_VSIS3_CREATE_DIR_OBJECT=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">YES</span></code>. Determines whether to allow <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> to create an empty object to model an empty directory.</p>
</li>
</ul>
<p>複数の認証方法が可能であり,以下の順序で試行されます:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#config-AWS_NO_SIGN_REQUEST"><code class="docutils literal notranslate"><span class="pre">AWS_NO_SIGN_REQUEST=YES</span></code></a> 設定オプションが設定されている場合,リクエスト署名が無効になります.このオプションは,パブリックアクセス権を持つバケットに使用できます. GDAL 2.3以降で利用可能です.</p></li>
<li><p><a class="reference internal" href="#config-AWS_SECRET_ACCESS_KEY"><code class="docutils literal notranslate"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code></a> および <a class="reference internal" href="#config-AWS_ACCESS_KEY_ID"><code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code></a> 設定オプションを設定できます.一時的な資格情報が使用される場合は, <a class="reference internal" href="#config-AWS_SESSION_TOKEN"><code class="docutils literal notranslate"><span class="pre">AWS_SESSION_TOKEN</span></code></a> 設定オプションを設定する必要があります.</p></li>
<li><p>GDAL 2.3以降, &quot;aws&quot;コマンドラインユーティリティやBoto3がサポートするのと同様の資格情報を提供する代替方法を使用できます.上記の環境変数が提供されていない場合, <code class="docutils literal notranslate"><span class="pre">~/.aws/credentials</span></code> または <code class="docutils literal notranslate"><span class="pre">%UserProfile%/.aws/credentials</span></code> ファイルが読み込まれます(<a class="reference internal" href="#config-CPL_AWS_CREDENTIALS_FILE"><code class="docutils literal notranslate"><span class="pre">CPL_AWS_CREDENTIALS_FILE</span></code></a> で指定されたファイル).プロファイルは, <a class="reference internal" href="#config-AWS_DEFAULT_PROFILE"><code class="docutils literal notranslate"><span class="pre">AWS_DEFAULT_PROFILE</span></code></a> 環境変数で指定するか, GDAL 3.2以降では <a class="reference internal" href="#config-AWS_PROFILE"><code class="docutils literal notranslate"><span class="pre">AWS_PROFILE</span></code></a> 環境変数で指定することができます(デフォルトプロファイルは &quot;default&quot; です).</p></li>
<li><p>資格情報とAWSリージョンを取得するために.``~/.aws/config`` または <code class="docutils literal notranslate"><span class="pre">%UserProfile%/.aws/config</span></code> ファイルも使用できます(<a class="reference internal" href="#config-AWS_CONFIG_FILE"><code class="docutils literal notranslate"><span class="pre">AWS_CONFIG_FILE</span></code></a> で指定されたファイル)</p></li>
<li><p>GDAL 3.6以降, <a class="reference internal" href="#config-AWS_ROLE_ARN"><code class="docutils literal notranslate"><span class="pre">AWS_ROLE_ARN</span></code></a> および <a class="reference internal" href="#config-AWS_WEB_IDENTITY_TOKEN_FILE"><code class="docutils literal notranslate"><span class="pre">AWS_WEB_IDENTITY_TOKEN_FILE</span></code></a> が定義されている場合,webアイデンティティトークンベースのAWS STSアクションAssumeRoleWithWebIdentityに対する資格情報メカニズムに依存します(参照.: <a class="reference external" href="https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html">https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html</a>)</p></li>
<li><p>上記のいずれの方法も成功しない場合,EC2インスタンスでGDALが使用されるときにインスタンスプロファイル資格情報が取得されます(cf <a class="reference internal" href="#vsis3-imds"><span class="std std-ref">/vsis3/ とAWSインスタンスメタデータサービス(IMDS)</span></a>)</p></li>
</ol>
<p>書き込み時には,S3マルチパートアップロードAPIを使用してファイルがアップロードされます.チャンクのサイズはデフォルトで50 MBに設定されており,50 MBずつの10000パーツで500 GBまでのファイルを作成できます.より大きなファイルが必要な場合は, <a class="reference internal" href="#config-VSIS3_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">VSIS3_CHUNK_SIZE</span></code></a> 設定オプションの値を大きな値に増やします(MBで表されます).プロセスが終了し,ファイルが正しく閉じられない場合,マルチパートアップロードは開いたままになり,Amazonはパーツストレージの料金を請求します.他の手段で自分で中止する必要があります.たとえば,s3cmdユーティリティを使用して&quot;ghost&quot;アップロードを中止します.チャンクサイズより小さいファイルの場合,マルチパートアップロードAPIの代わりに単純なPUTリクエストが使用されます.</p>
<p>GDAL 3.1以降, <a class="reference internal" href="../api/cpl.html#_CPPv49VSIRenamePKcPKc" title="VSIRename"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRename()</span></code></a> 操作がサポートされています(最初に元のファイルをコピーしてから削除します)</p>
<p>GDAL 3.1以降, <a class="reference internal" href="../api/cpl.html#_CPPv417VSIRmdirRecursivePKc" title="VSIRmdirRecursive"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdirRecursive()</span></code></a> 操作がサポートされています(バッチ削除メソッドを使用). <a class="reference internal" href="#config-CPL_VSIS3_USE_BASE_RMDIR_RECURSIVE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIS3_USE_BASE_RMDIR_RECURSIVE</span></code></a> 設定オプションをYES に設定すると,バッチ削除をサポートしていないS3ライクなAPIを使用する場合に使用できます(GDAL &gt;= 3.2).GDAL 3.6以降,これは <a class="reference internal" href="configoptions.html#gdal-configuration-file"><span class="std std-ref">GDAL configuration file</span></a> でパス固有のオプションとして設定できます</p>
<p><a class="reference internal" href="#config-CPL_VSIS3_CREATE_DIR_OBJECT"><code class="docutils literal notranslate"><span class="pre">CPL_VSIS3_CREATE_DIR_OBJECT</span></code></a> 設定オプションを NO に設定すると, <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> 操作がスラッシュで終わるディレクトリ名の空のオブジェクトを作成するのを防ぎます.デフォルトでは,GDALはそのようなオブジェクトを作成します.空のディレクトリをモデル化できるためですが,このような空のオブジェクトを想定していないアプリケーションとの互換性問題が発生する可能性があります.</p>
<p>GDAL 3.5以降,IAMロールの仮定を使用するプロファイルが処理されます(参照: <a class="reference external" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-role.html">https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-role.html</a>).このようなプロファイルでは,``role_arn`` および <code class="docutils literal notranslate"><span class="pre">source_profile</span></code> キーワードが必要です.オプションの <code class="docutils literal notranslate"><span class="pre">external_id</span></code>,``mfa_serial`` および <code class="docutils literal notranslate"><span class="pre">role_session_name</span></code> を指定できます. <code class="docutils literal notranslate"><span class="pre">credential_source</span></code> は現在サポートされていません.</p>
</section>
<section id="vsis3-and-aws-instance-metadata-service-imds">
<span id="vsis3-imds"></span><h3>/vsis3/ とAWSインスタンスメタデータサービス(IMDS)<a class="headerlink" href="#vsis3-and-aws-instance-metadata-service-imds" title="Link to this heading"></a></h3>
<p>EC2インスタンスでは,GDALはAWS S3の認証トークンを取得するために <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/configuring-instance-metadata-service.html">IMDSv2</a> プロトコルを優先して使用し,失敗した場合はIMDSv1にフォールバックします.ただし,最近のAmazon Linuxインスタンスでは,IMDSv1にアクセスできなくなっているため,IMDSv2を正しく構成する必要があります(IMDSv1が利用可能であっても,誤って構成されたIMDSv2は認証ステップで遅延を引き起こします).</p>
<p>EC2インスタンス内のDockerインスタンスで実行する場合,インスタンスの追加構成が必要な既知の問題があります.たとえば, <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/instancedata-data-retrieval.html#imds-considerations">ホップリミットを2に増やす必要があります</a></p>
<p>これを行う方法はいくつかあります.1つの方法は,次のコマンドを実行することです:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">aws</span> <span class="n">ec2</span> <span class="n">modify</span><span class="o">-</span><span class="n">instance</span><span class="o">-</span><span class="n">metadata</span><span class="o">-</span><span class="n">options</span> \
    <span class="o">--</span><span class="n">instance</span><span class="o">-</span><span class="nb">id</span> <span class="o">&lt;</span><span class="n">instance_id</span><span class="o">&gt;</span> \
    <span class="o">--</span><span class="n">http</span><span class="o">-</span><span class="n">put</span><span class="o">-</span><span class="n">response</span><span class="o">-</span><span class="n">hop</span><span class="o">-</span><span class="n">limit</span> <span class="mi">2</span> \
    <span class="o">--</span><span class="n">http</span><span class="o">-</span><span class="n">endpoint</span> <span class="n">enabled</span>
</pre></div>
</div>
<p>別の方法は,AutoScalingGroup LaunchTemplate に HttpPutResponseHopLimit メタデータを設定することです: - <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_InstanceMetadataOptionsRequest.html">https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_InstanceMetadataOptionsRequest.html</a></p>
<p>別の可能性は,ホストネットワーキングでDockerコンテナを起動することです(<code class="docutils literal notranslate"><span class="pre">--network=host</span></code>),ただし,これによりコンテナの隔離が破られ,ホストのすべてのポートがコンテナに公開されるため,`セキュリティ上の問題 &lt;<a class="reference external" href="https://stackoverflow.com/a/57051970/40785">https://stackoverflow.com/a/57051970/40785</a>&gt;`__ が発生します.</p>
</section>
<section id="configuring-vsis3-with-minio">
<h3>/vsis3/ のMinioでの設定<a class="headerlink" href="#configuring-vsis3-with-minio" title="Link to this heading"></a></h3>
<p>次の設定オプションを設定して, <a class="reference external" href="https://min.io/docs/minio/container/index.html">Minio Dockerイメージ</a> にアクセスできます</p>
<ul class="simple">
<li><p>AWS_VIRTUAL_HOSTING=FALSE</p></li>
<li><p>AWS_HTTPS=NO</p></li>
<li><p>AWS_S3_ENDPOINT=&quot;localhost:9000&quot;</p></li>
<li><p>AWS_REGION=&quot;us-east-1&quot;</p></li>
<li><p>AWS_SECRET_ACCESS_KEY=&quot;your_secret_access_key&quot;</p></li>
<li><p>AWS_ACCESS_KEY_ID=&quot;your_access_key&quot;</p></li>
</ul>
</section>
<section id="vsis3-streaming-aws-s3-files-streaming">
<span id="vsis3-streaming"></span><h3>/vsis3_streaming/ (AWS S3 files: streaming)<a class="headerlink" href="#vsis3-streaming-aws-s3-files-streaming" title="Link to this heading"></a></h3>
<p>/vsis3_streaming/ は,AWS S3バケットで利用可能な(主に非公開の)ファイルのランダム読み取りを可能にするファイルシステムハンドラです.これには,libcurlを利用してGDALがビルドされている必要があります.</p>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsis3_streaming/bucket/key</span></code> の形式です.ここで, <code class="docutils literal notranslate"><span class="pre">bucket</span></code> はS3バケットの名前であり,``key`` はS3オブジェクトの&quot;key&quot;であり,サブディレクトリを含む可能性のあるファイル名です.</p>
<p>認証オプションおよび読み取り専用機能は, <a class="reference internal" href="#vsis3"><span class="std std-ref">/vsis3/</span></a> と同じです</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.1.</span></p>
</div>
</section>
<section id="vsigs-google-cloud-storage-files">
<span id="vsigs"></span><h3>/vsigs/ (Google Cloud Storage ファイル)<a class="headerlink" href="#vsigs-google-cloud-storage-files" title="Link to this heading"></a></h3>
<p>/vsigs/ は,Google Cloud Storageバケットで利用可能な(主に非公開の)ファイルのランダム読み取りを可能にするファイルシステムハンドラです.これには,libcurlを利用してGDALがビルドされている必要があります.</p>
<p>GDAL 2.3以降,ファイルの順次書き込みも可能です.その場合,シークや読み取り操作は許可されません.したがって,GTiffドライバを使用してGeoTIFFファイルに直接書き込むことはサポートされません.ただし,GDAL 3.2以降, <a class="reference internal" href="configoptions.html#config-CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE</span></code></a> 設定オプションを <code class="docutils literal notranslate"><span class="pre">YES</span></code> に設定すると,ランダム書き込みアクセスが可能になります( <a class="reference internal" href="configoptions.html#config-CPL_TMPDIR"><code class="docutils literal notranslate"><span class="pre">CPL_TMPDIR</span></code></a> 設定オプションで制御される一時ローカルファイルの作成が含まれます). <a class="reference internal" href="../api/cpl.html#_CPPv49VSIUnlinkPKc" title="VSIUnlink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIUnlink()</span></code></a> によるファイルの削除, <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> によるディレクトリの作成, <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> による(空の)ディレクトリの削除も可能です.</p>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsigs/bucket/key</span></code> の形式です.ここで, <code class="docutils literal notranslate"><span class="pre">bucket</span></code> はバケットの名前であり,``key`` はオブジェクトの&quot;key&quot;であり,サブディレクトリを含む可能性のあるファイル名です.</p>
<p><a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> の一般的な情報が適用されます.</p>
<p>/vsigs/ ハンドラに固有の以下の設定オプションがあります:</p>
<ul class="simple">
<li><p id="config-GS_NO_SIGN_REQUEST"><strong>GS_NO_SIGN_REQUEST=[YES/NO]: </strong> (GDAL &gt;= 3.4) If <code class="docutils literal notranslate"><span class="pre">YES</span></code>, request signing is disabled.</p>
</li>
<li><p id="config-GS_SECRET_ACCESS_KEY"><strong>GS_SECRET_ACCESS_KEY=value: </strong>Secret for AWS-style authentication (HMAC keys).</p>
</li>
<li><p id="config-GS_ACCESS_KEY_ID"><strong>GS_ACCESS_KEY_ID=value: </strong>Access ID for AWS-style authentication (HMAC keys).</p>
</li>
<li><p id="config-GS_OAUTH2_REFRESH_TOKEN"><strong>GS_OAUTH2_REFRESH_TOKEN=value: </strong>OAuth2 refresh token. This refresh token can be obtained with the
<a class="reference external" href="https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/samples/gdal_auth.py">gdal_auth.py</a>
script (<code class="docutils literal notranslate"><span class="pre">gdal_auth.py</span> <span class="pre">-s</span> <span class="pre">storage</span></code> or <code class="docutils literal notranslate"><span class="pre">gdal_auth.py</span> <span class="pre">-s</span> <span class="pre">storage-rw</span></code>).</p>
</li>
<li><p id="config-GS_OAUTH2_CLIENT_ID"><strong>GS_OAUTH2_CLIENT_ID=value: </strong>Client ID to be used when requesting <a class="reference internal" href="#config-GS_OAUTH2_REFRESH_TOKEN"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_REFRESH_TOKEN</span></code></a>.</p>
</li>
<li><p id="config-GS_OAUTH2_CLIENT_SECRET"><strong>GS_OAUTH2_CLIENT_SECRET=value: </strong>Client secret to be used when requesting <a class="reference internal" href="#config-GS_OAUTH2_REFRESH_TOKEN"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_REFRESH_TOKEN</span></code></a>.</p>
</li>
<li></li>
<li><p id="config-GS_OAUTH2_PRIVATE_KEY"><strong>GS_OAUTH2_PRIVATE_KEY=value: </strong>Private key for OAuth2 authentication. Alternatively, the key may be
saved in a file and referenced with <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY_FILE"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY_FILE</span></code></a>.</p>
</li>
<li><p id="config-GS_OAUTH2_PRIVATE_KEY_FILE"><strong>GS_OAUTH2_PRIVATE_KEY_FILE=&lt;filename&gt;: </strong>Location of private key file for OAuth2 authentication.</p>
</li>
<li><p id="config-GS_OAUTH2_CLIENT_EMAIL"><strong>GS_OAUTH2_CLIENT_EMAIL=value: </strong>Client email for OAuth2 authentication, to be used with <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY</span></code></a>
or <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY_FILE"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY_FILE</span></code></a>.</p>
</li>
<li><p id="config-GS_OAUTH2_SCOPE"><strong>GS_OAUTH2_SCOPE=value: </strong>Permission scope associated with OAuth2 authentication using <a class="reference internal" href="../drivers/raster/eedai.html#config-GOOGLE_APPLICATION_CREDENTIALS"><code class="docutils literal notranslate"><span class="pre">GOOGLE_APPLICATION_CREDENTIALS</span></code></a>.</p>
</li>
<li><p id="config-CPL_GS_CREDENTIALS_FILE"><strong>CPL_GS_CREDENTIALS_FILE=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">~/.boto</span></code>. Location of configuration file providing <code class="docutils literal notranslate"><span class="pre">gs_secret_access_key</span></code> and
<code class="docutils literal notranslate"><span class="pre">gs_access_key_id</span></code>.</p>
</li>
<li><p id="config-GS_USER_PROJECT"><strong>GS_USER_PROJECT=value: </strong> (GDAL &gt;= 3.4) Google Project id (see
<a class="reference external" href="https://cloud.google.com/storage/docs/xml-api/reference-headers#xgooguserproject">https://cloud.google.com/storage/docs/xml-api/reference-headers#xgooguserproject</a>)
to charge for requests against Requester Pays buckets.</p>
</li>
</ul>
<p>複数の認証方法が可能であり,以下の順序で試行されます:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#config-GS_NO_SIGN_REQUEST"><code class="docutils literal notranslate"><span class="pre">GS_NO_SIGN_REQUEST=YES</span></code></a> 設定オプションが設定されている場合,リクエスト署名が無効になります.このオプションは,パブリックアクセス権を持つバケットに使用できます. GDAL 3.4以降で利用可能です.</p></li>
<li><p><a class="reference internal" href="#config-GS_SECRET_ACCESS_KEY"><code class="docutils literal notranslate"><span class="pre">GS_SECRET_ACCESS_KEY</span></code></a> および <a class="reference internal" href="#config-GS_ACCESS_KEY_ID"><code class="docutils literal notranslate"><span class="pre">GS_ACCESS_KEY_ID</span></code></a> 設定オプションを設定できます.AWSスタイルの認証に使用できます</p></li>
<li><p>The <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_HEADER_FILE"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_HEADER_FILE</span></code></a> configuration option to point to a filename of a text file with &quot;key: value&quot; headers. Typically, it must contain a &quot;Authorization: Bearer XXXXXXXXX&quot; line.</p></li>
<li><p>(GDAL &gt;= 3.7) <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_HEADERS"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_HEADERS</span></code></a> 設定オプションも設定できます.少なくとも&quot;Authorization:&quot; で始まる行を含む必要があります.</p></li>
<li><p>(GDAL &gt;= 2.3) <a class="reference internal" href="#config-GS_OAUTH2_REFRESH_TOKEN"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_REFRESH_TOKEN</span></code></a> 設定オプションを設定して,OAuth2クライアント認証を使用できます.http://code.google.com/apis/accounts/docs/OAuth2.html このリフレッシュトークンは, <code class="docutils literal notranslate"><span class="pre">gdal_auth.py</span> <span class="pre">-s</span> <span class="pre">storage</span></code> または <code class="docutils literal notranslate"><span class="pre">gdal_auth.py</span> <span class="pre">-s</span> <span class="pre">storage-rw</span></code> スクリプトで取得できます.注意:デフォルトのGDALアプリケーション資格情報の代わりに, <a class="reference internal" href="#config-GS_OAUTH2_CLIENT_ID"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_CLIENT_ID</span></code></a> および <a class="reference internal" href="#config-GS_OAUTH2_CLIENT_SECRET"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_CLIENT_SECRET</span></code></a> 設定オプションを定義できます(gdal_auth.pyと後続の /vsigs の実行の両方で定義する必要があります)</p></li>
<li><p>(GDAL &gt;= 2.3) <a class="reference internal" href="../drivers/raster/eedai.html#config-GOOGLE_APPLICATION_CREDENTIALS"><code class="docutils literal notranslate"><span class="pre">GOOGLE_APPLICATION_CREDENTIALS</span></code></a> 設定オプションを設定して,OAuth2サービスアカウント資格情報を含むJSONファイルを指定できます(<code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">service_account</span></code>),特にプライベートキーとクライアントメールを指定します.https://developers.google.com/identity/protocols/OAuth2ServiceAccount でこの認証方法の詳細を確認してください.バケットは,サービスアカウントに&quot;Storage Legacy Bucket Owner&quot; または &quot;Storage Legacy Bucket Reader&quot; 権限を付与する必要があります.必要に応じて, <a class="reference internal" href="#config-GS_OAUTH2_SCOPE"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_SCOPE</span></code></a> 設定オプションを使用して,デフォルトの権限スコープを&quot;<a class="reference external" href="https://www.googleapis.com/auth/devstorage.read_write">https://www.googleapis.com/auth/devstorage.read_write</a>&quot; から&quot;<a class="reference external" href="https://www.googleapis.com/auth/devstorage.read_only">https://www.googleapis.com/auth/devstorage.read_only</a>&quot; に変更できます.</p></li>
<li><p>(GDAL &gt;= 3.4.2) <a class="reference internal" href="../drivers/raster/eedai.html#config-GOOGLE_APPLICATION_CREDENTIALS"><code class="docutils literal notranslate"><span class="pre">GOOGLE_APPLICATION_CREDENTIALS</span></code></a> 設定オプションを設定して,OAuth2ユーザー資格情報を含むJSONファイルを指定できます(<code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">authorized_user</span></code>).</p></li>
<li><p>(GDAL &gt;= 2.3) 前の方法の変種. <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY</span></code></a> (または <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY_FILE"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY_FILE</span></code></a> および <a class="reference internal" href="#config-GS_OAUTH2_CLIENT_EMAIL"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_CLIENT_EMAIL</span></code></a> ) を設定して,OAuth2サービスアカウント認証を使用できます.この認証方法の詳細については,https://developers.google.com/identity/protocols/OAuth2ServiceAccount を参照してください. <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY</span></code></a> 設定オプションには, <code class="docutils literal notranslate"><span class="pre">-----BEGIN</span> <span class="pre">PRIVATE</span> <span class="pre">KEY-----</span></code> で始まるプライベートキーをインライン文字列として含める必要があります.代替として, <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY_FILE"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY_FILE</span></code></a> 設定オプションを設定して,そのようなプライベートキーを含むファイル名を示すことができます.バケットは,サービスアカウントに&quot;Storage Legacy Bucket Owner&quot; または &quot;Storage Legacy Bucket Reader&quot; 権限を付与する必要があります.必要に応じて, <a class="reference internal" href="#config-GS_OAUTH2_SCOPE"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_SCOPE</span></code></a> 設定オプションを使用して,デフォルトの権限スコープを&quot;<a class="reference external" href="https://www.googleapis.com/auth/devstorage.read_write">https://www.googleapis.com/auth/devstorage.read_write</a>&quot; から&quot;<a class="reference external" href="https://www.googleapis.com/auth/devstorage.read_only">https://www.googleapis.com/auth/devstorage.read_only</a>&quot; に変更できます.</p></li>
<li><p>(GDAL &gt;= 2.3) &quot;gsutil&quot; コマンドラインユーティリティやBoto3サポートで使用されるのと同様の資格情報を提供する別の方法が使用できます.上記の環境変数が提供されていない場合,gs_secret_access_key および gs_access_key_id エントリをAWSスタイルの認証に使用するために,:file:<cite>~/.boto</cite> または <code class="file docutils literal notranslate"><span class="pre">UserProfile%/.boto</span></code> ファイルが読み込まれます(<a class="reference internal" href="#config-CPL_GS_CREDENTIALS_FILE"><code class="docutils literal notranslate"><span class="pre">CPL_GS_CREDENTIALS_FILE</span></code></a> で指定されたファイル).見つからない場合,OAuth2クライアント認証のための gs_oauth2_refresh_token (およびオプションで client_id および client_secret) エントリを探します.</p></li>
<li><p>(GDAL &gt;= 2.3) 最後に,上記のいずれの方法も成功しない場合,コードは現在のマシンがGoogle Compute Engineインスタンスであるかどうかを確認し,そうであればそれに関連付けられた権限を使用します(VMに関連付けられたデフォルトのサービスアカウントを使用します).マシンをGCEインスタンスとして検出するように強制するには(たとえば,ブートログにアクセスできないコンテナで実行されるコードの場合), <a class="reference internal" href="../drivers/raster/eedai.html#config-CPL_MACHINE_IS_GCE"><code class="docutils literal notranslate"><span class="pre">CPL_MACHINE_IS_GCE</span></code></a> を <code class="docutils literal notranslate"><span class="pre">YES</span></code> に設定できます.</p></li>
</ol>
<p>GDAL 3.1以降, Rename() 操作がサポートされています(最初に元のファイルをコピーしてから削除します).</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.2.</span></p>
</div>
</section>
<section id="vsigs-streaming-google-cloud-storage-files-streaming">
<span id="vsigs-streaming"></span><h3>/vsigs_streaming/ (Google Cloud Storage ファイル: ストリーミング)<a class="headerlink" href="#vsigs-streaming-google-cloud-storage-files-streaming" title="Link to this heading"></a></h3>
<p>/vsigs_streaming/ は,Google Cloud Storageバケットで利用可能な(主に非公開の)ファイルのランダム読み取りを可能にするファイルシステムハンドラです.これには,libcurlを利用してGDALがビルドされている必要があります.</p>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsigs_streaming/bucket/key</span></code> の形式です.ここで, <code class="docutils literal notranslate"><span class="pre">bucket</span></code> はバケットの名前であり,``key`` はオブジェクトの&quot;key&quot;であり,サブディレクトリを含む可能性のあるファイル名です.</p>
<p>認証オプションおよび読み取り専用機能は, <a class="reference internal" href="#vsigs"><span class="std std-ref">/vsigs/</span></a> と同じです</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.2.</span></p>
</div>
</section>
<section id="vsiaz-microsoft-azure-blob-files">
<span id="vsiaz"></span><h3>/vsiaz/ (Microsoft Azure Blob ファイル)<a class="headerlink" href="#vsiaz-microsoft-azure-blob-files" title="Link to this heading"></a></h3>
<p>/vsiaz/ は,Microsoft Azure Blobコンテナで利用可能な(主に非公開の)ファイルのランダム読み取りを可能にするファイルシステムハンドラです.これには,libcurlを利用してGDALがビルドされている必要があります.</p>
<p>Azure Data Lake Storage Gen2 用の関連ファイルシステムについては, <a class="reference internal" href="#vsiadls"><span class="std std-ref">/vsiadls/</span></a> を参照してください.</p>
<p>ファイルの順次書き込みも可能です.その場合,シークや読み取り操作は許可されません.したがって,GTiffドライバを使用してGeoTIFFファイルに直接書き込むことはサポートされません.ただし,GDAL 3.2以降, <a class="reference internal" href="configoptions.html#config-CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE</span></code></a> 設定オプションを <code class="docutils literal notranslate"><span class="pre">YES</span></code> に設定すると,ランダム書き込みアクセスが可能になります( <a class="reference internal" href="configoptions.html#config-CPL_TMPDIR"><code class="docutils literal notranslate"><span class="pre">CPL_TMPDIR</span></code></a> 設定オプションで制御される一時ローカルファイルの作成が含まれます).ファイルサイズが4 MB未満の場合,ブロック ブロブが作成されます.それを超えると,追加ブロブが作成されます(最大ファイルサイズは195 GBです).</p>
<p>Deletion of files with <a class="reference internal" href="../api/cpl.html#_CPPv49VSIUnlinkPKc" title="VSIUnlink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIUnlink()</span></code></a>, creation of directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> and deletion of (empty) directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> are also possible. Note: when using <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a>, a special hidden <code class="file docutils literal notranslate"><span class="pre">.gdal_marker_for_dir</span></code> empty file is created, since Azure Blob does not natively support empty directories. If that file is the last one remaining in a directory, <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> will automatically remove it. This file will not be seen with <a class="reference internal" href="../api/cpl.html#_CPPv410VSIReadDirPKc" title="VSIReadDir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIReadDir()</span></code></a>. If removing files from directories not created with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a>, when the last file is deleted, its directory is automatically removed by Azure, so the sequence <code class="docutils literal notranslate"><span class="pre">VSIUnlink(&quot;/vsiaz/container/subdir/lastfile&quot;)</span></code> followed by <code class="docutils literal notranslate"><span class="pre">VSIRmdir(&quot;/vsiaz/container/subdir&quot;)</span></code> will fail on the <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> invocation.</p>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsiaz/container/key</span></code> の形式です.ここで, <code class="docutils literal notranslate"><span class="pre">container</span></code> はコンテナの名前であり,``key`` はオブジェクトの&quot;key&quot;であり,サブディレクトリを含む可能性のあるファイル名です.</p>
<p><a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> の一般的な情報が適用されます.</p>
<p>/vsiaz/ ハンドラに固有の以下の設定オプションがあります:</p>
<ul class="simple">
<li><p id="config-AZURE_NO_SIGN_REQUEST"><strong>AZURE_NO_SIGN_REQUEST=[YES/NO]: </strong> (GDAL &gt;= 3.2) Controls whether requests are signed.</p>
</li>
<li><p id="config-AZURE_STORAGE_CONNECTION_STRING"><strong>AZURE_STORAGE_CONNECTION_STRING=value: </strong>Credential string provided in the Access Key section of the administrative interface,
containing both the account name and a secret key.</p>
</li>
<li><p id="config-AZURE_STORAGE_ACCESS_TOKEN"><strong>AZURE_STORAGE_ACCESS_TOKEN=value: </strong> (GDAL &gt;= 3.5) Access token typically obtained using Microsoft Authentication Library (MSAL).</p>
</li>
<li><p id="config-AZURE_STORAGE_ACCOUNT"><strong>AZURE_STORAGE_ACCOUNT=value: </strong>Specifies storage account name.</p>
</li>
<li><p id="config-AZURE_STORAGE_ACCESS_KEY"><strong>AZURE_STORAGE_ACCESS_KEY=value: </strong>Specifies secret key associated with <a class="reference internal" href="#config-AZURE_STORAGE_ACCOUNT"><code class="docutils literal notranslate"><span class="pre">AZURE_STORAGE_ACCOUNT</span></code></a>.</p>
</li>
<li><p id="config-AZURE_STORAGE_SAS_TOKEN"><strong>AZURE_STORAGE_SAS_TOKEN=value: </strong> (GDAL &gt;= 3.2) Shared Access Signature.</p>
</li>
<li><p id="config-AZURE_IMDS_OBJECT_ID"><strong>AZURE_IMDS_OBJECT_ID=value: </strong> (GDAL &gt;= 3.8) object_id of the managed identity you would like the token for, when using
Azure Instance Metadata Service (IMDS) authentication in a Azure
Virtual Matchine. Required if your VM has multiple user-assigned managed identities.
This option may be set as a path-specific option with <a class="reference internal" href="../api/cpl.html#_CPPv424VSISetPathSpecificOptionPKcPKcPKc" title="VSISetPathSpecificOption"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetPathSpecificOption()</span></code></a></p>
</li>
<li><p id="config-AZURE_IMDS_CLIENT_ID"><strong>AZURE_IMDS_CLIENT_ID=value: </strong> (GDAL &gt;= 3.8) client_id of the managed identity you would like the token for, when using
Azure Instance Metadata Service (IMDS) authentication in a Azure
Virtual Matchine. Required if your VM has multiple user-assigned managed identities.
This option may be set as a path-specific option with <a class="reference internal" href="../api/cpl.html#_CPPv424VSISetPathSpecificOptionPKcPKcPKc" title="VSISetPathSpecificOption"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetPathSpecificOption()</span></code></a></p>
</li>
<li><p id="config-AZURE_IMDS_MSI_RES_ID"><strong>AZURE_IMDS_MSI_RES_ID=value: </strong> (GDAL &gt;= 3.8) msi_res_id (Azure Resource ID) of the managed identity you would like the token for, when using
Azure Instance Metadata Service (IMDS) authentication in a Azure
Virtual Matchine. Required if your VM has multiple user-assigned managed identities.
This option may be set as a path-specific option with <a class="reference internal" href="../api/cpl.html#_CPPv424VSISetPathSpecificOptionPKcPKcPKc" title="VSISetPathSpecificOption"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetPathSpecificOption()</span></code></a></p>
</li>
</ul>
<p>複数の認証方法が可能であり,以下の順序で試行されます:</p>
<ol class="arabic">
<li><p>The <a class="reference internal" href="#config-AZURE_STORAGE_CONNECTION_STRING"><code class="docutils literal notranslate"><span class="pre">AZURE_STORAGE_CONNECTION_STRING</span></code></a> configuration option</p></li>
<li><p>The <a class="reference internal" href="#config-AZURE_STORAGE_ACCOUNT"><code class="docutils literal notranslate"><span class="pre">AZURE_STORAGE_ACCOUNT</span></code></a> configuration option is set to specify the account name AND</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>(GDAL &gt;= 3.5) <a class="reference internal" href="#config-AZURE_STORAGE_ACCESS_TOKEN"><code class="docutils literal notranslate"><span class="pre">AZURE_STORAGE_ACCESS_TOKEN</span></code></a> 設定オプションを設定して,アクセストークンを指定します.このアクセストークンは,通常,Microsoft Authentication Library (MSAL) を使用して取得されます.このアクセストークンは,&quot;Authorization: Bearer ${AZURE_STORAGE_ACCESS_TOKEN}&quot; ヘッダーに含まれます.</p></li>
<li><p>The <a class="reference internal" href="#config-AZURE_STORAGE_ACCESS_KEY"><code class="docutils literal notranslate"><span class="pre">AZURE_STORAGE_ACCESS_KEY</span></code></a> configuration option is set to specify the secret key.</p></li>
<li><p><a class="reference internal" href="#config-AZURE_NO_SIGN_REQUEST"><code class="docutils literal notranslate"><span class="pre">AZURE_NO_SIGN_REQUEST=YES</span></code></a> 設定オプションを設定して,リクエスト署名を無効にします.このオプションは,パブリックアクセス権を持つアカウントに使用できます. GDAL 3.2以降で利用可能です.</p></li>
<li><p><a class="reference internal" href="#config-AZURE_STORAGE_SAS_TOKEN"><code class="docutils literal notranslate"><span class="pre">AZURE_STORAGE_SAS_TOKEN</span></code></a> 設定オプション(<code class="docutils literal notranslate"><span class="pre">AZURE_SAS</span></code> は GDAL &lt; 3.5 の場合) を設定して,共有アクセス署名を指定します.このSASは /vsiaz/ ファイルシステムハンドラによって構築されたURLに追加されます.その値はすでにURLエンコードされている必要があり,先頭に '?' または '&amp;' 文字を含めてはいけません(たとえば,有効なものは &quot;st=2019-07-18T03%3A53%3A22Z&amp;se=2035-07-19T03%3A53%3A00Z&amp;sp=rl&amp;sv=2018-03-28&amp;sr=c&amp;sig=2RIXmLbLbiagYnUd49rgx2kOXKyILrJOgafmkODhRAQ%3D&quot; のようになります).GDAL 3.2以降で利用可能です.</p></li>
<li><p>現在のマシンは,それに割り当てられたAzure Active Directory権限を持つAzure仮想マシンです(<a class="reference external" href="https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/qs-configure-portal-windows-vm">https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/qs-configure-portal-windows-vm</a> を参照してください). GDAL 3.3以降で利用可能です.</p></li>
</ol>
<p>Azure Active Directory Workload Identity を使用した認証(AZURE_TENANT_ID, AZURE_CLIENT_ID, AZURE_FEDERATED_TOKEN_FILE および AZURE_AUTHORITY_HOST 環境変数を使用)は,通常,Azure Kubernetes 用に利用できます. GDAL 3.7.2以降で利用可能です.</p>
</div></blockquote>
</li>
<li><p>GDAL 3.5以降, &quot;az&quot; コマンドラインユーティリティの <cite>設定ファイル &lt;https://github.com/MicrosoftDocs/azure-docs-cli/blob/main/docs-ref-conceptual/azure-cli-configuration.md&gt;</cite> を使用できます. <code class="docutils literal notranslate"><span class="pre">[storage]</span></code> セクションの次のキーが次の優先順位で使用されます:<code class="docutils literal notranslate"><span class="pre">connection_string</span></code>, <code class="docutils literal notranslate"><span class="pre">account</span></code> + <code class="docutils literal notranslate"><span class="pre">key</span></code> または <code class="docutils literal notranslate"><span class="pre">account</span></code> + <code class="docutils literal notranslate"><span class="pre">sas_token</span></code></p></li>
</ol>
<p>GDAL 3.1以降, <a class="reference internal" href="../api/cpl.html#_CPPv49VSIRenamePKcPKc" title="VSIRename"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRename()</span></code></a> 操作がサポートされています(最初に元のファイルをコピーしてから削除します)</p>
<p>GDAL 3.3以降, <a class="reference internal" href="../api/cpl.html#_CPPv418VSIGetFileMetadataPKcPKc12CSLConstList" title="VSIGetFileMetadata"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIGetFileMetadata()</span></code></a> および <a class="reference internal" href="../api/cpl.html#_CPPv418VSISetFileMetadataPKc12CSLConstListPKc12CSLConstList" title="VSISetFileMetadata"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetFileMetadata()</span></code></a> 操作がサポートされています.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</section>
<section id="vsiaz-streaming-microsoft-azure-blob-files-streaming">
<span id="vsiaz-streaming"></span><h3>/vsiaz_streaming/ (Microsoft Azure Blob ファイル: ストリーミング)<a class="headerlink" href="#vsiaz-streaming-microsoft-azure-blob-files-streaming" title="Link to this heading"></a></h3>
<p>/vsiaz_streaming/ は,Microsoft Azure Blobコンテナ,バケットで利用可能な(主に非公開の)ファイルのランダム読み取りを可能にするファイルシステムハンドラです.これには,libcurlを利用してGDALがビルドされている必要があります.</p>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsiaz_streaming/container/key</span></code> の形式です.ここで, <code class="docutils literal notranslate"><span class="pre">container</span></code> はコンテナの名前であり,``key`` はオブジェクトの&quot;key&quot;であり,サブディレクトリを含む可能性のあるファイル名です.</p>
<p>認証オプションおよび読み取り専用機能は, <a class="reference internal" href="#vsiaz"><span class="std std-ref">/vsiaz/</span></a> と同じです</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</section>
<section id="vsiadls-microsoft-azure-data-lake-storage-gen2">
<span id="vsiadls"></span><h3>/vsiadls/ (Microsoft Azure Data Lake Storage Gen2)<a class="headerlink" href="#vsiadls-microsoft-azure-data-lake-storage-gen2" title="Link to this heading"></a></h3>
<p>/vsiadls/ は,Microsoft Azure Data Lake Storageファイルシステムで利用可能な(主に非公開の)ファイルのランダム読み取りを可能にするファイルシステムハンドラです.これには,libcurlを利用してGDALがビルドされている必要があります.</p>
<p><a class="reference internal" href="#vsiaz"><span class="std std-ref">/vsiaz/</span></a> と同様の機能を持ち,特に認証のために同じ設定オプションを使用します./vsiaz/ に対する利点は,ディレクトリの実際の管理とUnixスタイルのACLサポートです.一部の機能には,Azureストレージで階層サポートをオンにする必要があります.その <a class="reference external" href="https://docs.microsoft.com/en-us/azure/storage/blobs/data-lake-storage-introduction">ドキュメント</a> を参照してください.</p>
<p>/vsiaz/ に対する主な強化点は次のとおりです:</p>
<blockquote>
<div><ul class="simple">
<li><p>本当のディレクトリサポート(空のディレクトリを持つために /vsiaz/ で使用される人工的な <code class="file docutils literal notranslate"><span class="pre">.gdal_marker_for_dir</span></code> 空ファイルは不要です)</p></li>
<li><p>One-call recursive directory deletion with <a class="reference internal" href="../api/cpl.html#_CPPv417VSIRmdirRecursivePKc" title="VSIRmdirRecursive"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdirRecursive()</span></code></a></p></li>
<li><p>Atomic renaming with <a class="reference internal" href="../api/cpl.html#_CPPv49VSIRenamePKcPKc" title="VSIRename"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRename()</span></code></a></p></li>
<li><p><a class="reference internal" href="../api/cpl.html#_CPPv418VSIGetFileMetadataPKcPKc12CSLConstList" title="VSIGetFileMetadata"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIGetFileMetadata()</span></code></a> で &quot;STATUS&quot; および &quot;ACL&quot; メタデータドメインをサポート</p></li>
<li><p><a class="reference internal" href="../api/cpl.html#_CPPv418VSISetFileMetadataPKc12CSLConstListPKc12CSLConstList" title="VSISetFileMetadata"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetFileMetadata()</span></code></a> で &quot;PROPERTIES&quot; および &quot;ACL&quot; メタデータドメインをサポート</p></li>
</ul>
</div></blockquote>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.3.</span></p>
</div>
</section>
<section id="vsioss-alibaba-cloud-oss-files">
<span id="vsioss"></span><h3>/vsioss/ (Alibaba Cloud OSS ファイル)<a class="headerlink" href="#vsioss-alibaba-cloud-oss-files" title="Link to this heading"></a></h3>
<p>/vsioss/ は,Alibaba Cloud Object Storage Service (OSS) バケットで利用可能な(主に非公開の)ファイルのランダム読み取りを可能にするファイルシステムハンドラです.これには,libcurlを利用してGDALがビルドされている必要があります.</p>
<p>ファイルの順次書き込みも可能です.その場合,シークや読み取り操作は許可されません.したがって,GTiffドライバを使用してGeoTIFFファイルに直接書き込むことはサポートされません.ただし,GDAL 3.2以降, <a class="reference internal" href="configoptions.html#config-CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE</span></code></a> 設定オプションを <code class="docutils literal notranslate"><span class="pre">YES</span></code> に設定すると,ランダム書き込みアクセスが可能になります( <a class="reference internal" href="configoptions.html#config-CPL_TMPDIR"><code class="docutils literal notranslate"><span class="pre">CPL_TMPDIR</span></code></a> 設定オプションで制御される一時ローカルファイルの作成が含まれます).ファイルの削除は <a class="reference internal" href="../api/cpl.html#_CPPv49VSIUnlinkPKc" title="VSIUnlink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIUnlink()</span></code></a> でもサポートされます.ディレクトリの作成は <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> で,(空の)ディレクトリの削除は <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> でも可能です.</p>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsioss/bucket/key</span></code> の形式です.ここで, <code class="docutils literal notranslate"><span class="pre">bucket</span></code> はOSSバケットの名前であり,``key`` はOSSオブジェクトの&quot;key&quot;であり,サブディレクトリを含む可能性のあるファイル名です.</p>
<p><a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> の一般的な情報が適用されます.</p>
<p>/vsioss/ ハンドラに固有の以下の設定オプションがあります:</p>
<ul class="simple">
<li><p id="config-OSS_SECRET_ACCESS_KEY"><strong>OSS_SECRET_ACCESS_KEY=value: </strong> (required) Secret access key for authentication.</p>
</li>
<li><p id="config-OSS_ACCESS_KEY_ID"><strong>OSS_ACCESS_KEY_ID=value: </strong> (required) Access key ID for authentication.</p>
</li>
<li><p id="config-OSS_ENDPOINT"><strong>OSS_ENDPOINT=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">oss-us-east-1.aliyuncs.com</span></code>. Endpoint URL containing the region associated with the bucket.</p>
</li>
<li><p id="config-VSIOSS_CHUNK_SIZE"><strong>VSIOSS_CHUNK_SIZE=&lt;MB&gt;: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">50</span></code>. Chunk size used with multipart upload API.</p>
</li>
</ul>
<p>The <a class="reference internal" href="#config-OSS_SECRET_ACCESS_KEY"><code class="docutils literal notranslate"><span class="pre">OSS_SECRET_ACCESS_KEY</span></code></a> and <a class="reference internal" href="#config-OSS_ACCESS_KEY_ID"><code class="docutils literal notranslate"><span class="pre">OSS_ACCESS_KEY_ID</span></code></a> configuration options must be set. The <a class="reference internal" href="#config-OSS_ENDPOINT"><code class="docutils literal notranslate"><span class="pre">OSS_ENDPOINT</span></code></a> configuration option should normally be set to the appropriate value, which reflects the region attached to the bucket. If the bucket is stored in another region than oss-us-east-1, the code logic will redirect to the appropriate endpoint.</p>
<p>書き込み時には,OSSマルチパートアップロードAPIを使用してファイルがアップロードされます.チャンクのサイズはデフォルトで50 MBに設定されており,50 MBずつの10000パーツで500 GBまでのファイルを作成できます.より大きなファイルが必要な場合は, <a class="reference internal" href="#config-VSIOSS_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">VSIOSS_CHUNK_SIZE</span></code></a> 設定オプションの値を大きな値に増やします(MBで表されます).プロセスが終了し,ファイルが正しく閉じられない場合,マルチパートアップロードは開いたままになり,Alibabaがパーツストレージの料金を請求します.他の手段で自分で中止する必要があります.チャンクサイズより小さいファイルの場合,マルチパートアップロードAPIの代わりに単純なPUTリクエストが使用されます.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</section>
<section id="vsioss-streaming-alibaba-cloud-oss-files-streaming">
<span id="vsioss-streaming"></span><h3>/vsioss_streaming/ (Alibaba Cloud OSS ファイル: ストリーミング)<a class="headerlink" href="#vsioss-streaming-alibaba-cloud-oss-files-streaming" title="Link to this heading"></a></h3>
<p>/vsioss_streaming/ は,Alibaba Cloud Object Storage Service (OSS) バケットで利用可能な(主に非公開の)ファイルのランダム読み取りを可能にするファイルシステムハンドラです.これには,libcurlを利用してGDALがビルドされている必要があります.</p>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsioss_streaming/bucket/key</span></code> の形式です.ここで, <code class="docutils literal notranslate"><span class="pre">bucket</span></code> はバケットの名前であり,``key`` はオブジェクトの&quot;key&quot;であり,サブディレクトリを含む可能性のあるファイル名です.</p>
<p>認証オプションおよび読み取り専用機能は, <a class="reference internal" href="#vsioss"><span class="std std-ref">/vsioss/</span></a> と同じです</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</section>
<section id="vsiswift-openstack-swift-object-storage">
<span id="vsiswift"></span><h3>/vsiswift/ (OpenStack Swift Object Storage)<a class="headerlink" href="#vsiswift-openstack-swift-object-storage" title="Link to this heading"></a></h3>
<p>/vsiswift/ は,OpenStack Swift Object Storage (swift) バケットで利用可能な(主に非公開の)ファイルのランダム読み取りを可能にするファイルシステムハンドラです.これには,libcurlを利用してGDALがビルドされている必要があります.</p>
<p>ファイルの順次書き込みも可能です.その場合,シークや読み取り操作は許可されません.したがって,GTiffドライバを使用してGeoTIFFファイルに直接書き込むことはサポートされません.ただし,GDAL 3.2以降, <a class="reference internal" href="configoptions.html#config-CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE</span></code></a> 設定オプションを <code class="docutils literal notranslate"><span class="pre">YES</span></code> に設定すると,ランダム書き込みアクセスが可能になります( <a class="reference internal" href="configoptions.html#config-CPL_TMPDIR"><code class="docutils literal notranslate"><span class="pre">CPL_TMPDIR</span></code></a> 設定オプションで制御される一時ローカルファイルの作成が含まれます).ファイルの削除は <a class="reference internal" href="../api/cpl.html#_CPPv49VSIUnlinkPKc" title="VSIUnlink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIUnlink()</span></code></a> でもサポートされます.ディレクトリの作成は <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> で,(空の)ディレクトリの削除は <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> でも可能です.</p>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsiswift/bucket/key</span></code> の形式です.ここで, <code class="docutils literal notranslate"><span class="pre">bucket</span></code> はswiftバケットの名前であり,``key`` はswiftオブジェクトの&quot;key&quot;であり,サブディレクトリを含む可能性のあるファイル名です.</p>
<p><a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> の一般的な情報が適用されます.</p>
<p>/vsioss/ ハンドラに固有の以下の設定オプションがあります:</p>
<ul class="simple">
<li><p id="config-SWIFT_STORAGE_URL"><strong>SWIFT_STORAGE_URL=value: </strong>Storage URL.</p>
</li>
<li><p id="config-SWIFT_AUTH_TOKEN"><strong>SWIFT_AUTH_TOKEN=value: </strong>Value of the x-auth-token authorization</p>
</li>
<li><p id="config-SWIFT_AUTH_V1_URL"><strong>SWIFT_AUTH_V1_URL=value: </strong>URL for Auth V1 authentication.</p>
</li>
<li><p id="config-SWIFT_USER"><strong>SWIFT_USER=value: </strong>User name for Auth V1 authentication.</p>
</li>
<li><p id="config-SWIFT_KEY"><strong>SWIFT_KEY=value: </strong>Key for Auth V1 authentication.</p>
</li>
</ul>
<p>3つの認証方法が可能であり,以下の順序で試行されます:</p>
<ol class="arabic simple">
<li><p>The <a class="reference internal" href="#config-SWIFT_STORAGE_URL"><code class="docutils literal notranslate"><span class="pre">SWIFT_STORAGE_URL</span></code></a> and <a class="reference internal" href="#config-SWIFT_AUTH_TOKEN"><code class="docutils literal notranslate"><span class="pre">SWIFT_AUTH_TOKEN</span></code></a> configuration options are set respectively to the storage URL (e.g <a class="reference external" href="http://127.0.0.1:12345/v1/AUTH_something">http://127.0.0.1:12345/v1/AUTH_something</a>) and the value of the x-auth-token authorization token.</p></li>
<li><p><a class="reference internal" href="#config-SWIFT_AUTH_V1_URL"><code class="docutils literal notranslate"><span class="pre">SWIFT_AUTH_V1_URL</span></code></a>, <a class="reference internal" href="#config-SWIFT_USER"><code class="docutils literal notranslate"><span class="pre">SWIFT_USER</span></code></a> および <a class="reference internal" href="#config-SWIFT_KEY"><code class="docutils literal notranslate"><span class="pre">SWIFT_KEY</span></code></a> 設定オプションは,それぞれ,Auth V1認証のエンドポイント(e.g <a class="reference external" href="http://127.0.0.1:12345/auth/v1.0">http://127.0.0.1:12345/auth/v1.0</a>),ユーザー名およびキー/パスワードに設定されます.この認証エンドポイントは,最初の認証方法で言及されたストレージURLと認証トークンを取得するために使用されます.</p></li>
<li><p>Keystone v3 での認証は,python-swiftclientと同じオプションを使用します.詳細については,https://docs.openstack.org/python-swiftclient/latest/cli/index.html#authentication を参照してください.GDAL (&gt;= 3.1) は,以下のオプションをサポートしています:</p>
<ul class="simple">
<li><p><cite>OS_IDENTITY_API_VERSION=3</cite></p></li>
<li><p><cite>OS_AUTH_URL</cite></p></li>
<li><p><cite>OS_USERNAME</cite></p></li>
<li><p><cite>OS_PASSWORD</cite></p></li>
<li><p><cite>OS_USER_DOMAIN_NAME</cite></p></li>
<li><p><cite>OS_PROJECT_NAME</cite></p></li>
<li><p><cite>OS_PROJECT_DOMAIN_NAME</cite></p></li>
<li><p><cite>OS_REGION_NAME</cite></p></li>
</ul>
</li>
<li><p>Keystone v3 を介したアプリケーション資格情報認証, GDAL (&gt;= 3.3.1) は,以下のオプションを使用してアプリケーション資格情報認証をサポートしています:</p>
<ul class="simple">
<li><p><cite>OS_IDENTITY_API_VERSION=3</cite></p></li>
<li><p><cite>OS_AUTH_TYPE=v3applicationcredential</cite></p></li>
<li><p><cite>OS_AUTH_URL</cite></p></li>
<li><p><cite>OS_APPLICATION_CREDENTIAL_ID</cite></p></li>
<li><p><cite>OS_APPLICATION_CREDENTIAL_SECRET</cite></p></li>
<li><p><cite>OS_REGION_NAME</cite></p></li>
</ul>
</li>
</ol>
<p>このファイルシステムハンドラは,ファイルの順次書き込みも可能です(その場合,シークや読み取り操作は許可されません).</p>
<p>一部のOpenStack Swiftのバージョンでは,大きな(セグメント化された)ファイルへのアクセスが,明示的に静的大きなオブジェクトとしてマークされていない場合に失敗します.これは,デフォルトである動的大きなオブジェクトではなく,静的大きなオブジェクトとしてマークされている場合に発生します.python-swiftclientを使用してファイルをアップロードする際に, <code class="docutils literal notranslate"><span class="pre">--use-slo</span></code> フラグを渡すことでこれを達成できます(すべてのオプションについては,https://docs.openstack.org/python-swiftclient/latest/cli/index.html#swift-upload を参照してください).大きなオブジェクトについての詳細は,https://docs.openstack.org/swift/latest/api/large_objects.html を参照してください.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</section>
<section id="vsiswift-streaming-openstack-swift-object-storage-streaming">
<span id="vsiswift-streaming"></span><h3>/vsiswift_streaming/ (OpenStack Swift Object Storage: ストリーミング)<a class="headerlink" href="#vsiswift-streaming-openstack-swift-object-storage-streaming" title="Link to this heading"></a></h3>
<p>/vsiswift_streaming/ は,OpenStack Swift Object Storage (swift) バケットで利用可能な(主に非公開の)ファイルのランダム読み取りを可能にするファイルシステムハンドラです.これには,libcurlを利用してGDALがビルドされている必要があります.</p>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsiswift_streaming/bucket/key</span></code> の形式です.ここで, <code class="docutils literal notranslate"><span class="pre">bucket</span></code> はバケットの名前であり,``key`` はオブジェクトの&quot;key&quot;であり,サブディレクトリを含む可能性のあるファイル名です.</p>
<p>認証オプションおよび読み取り専用機能は, <a class="reference internal" href="#vsiswift"><span class="std std-ref">/vsiswift/</span></a> と同じです</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</section>
<section id="vsihdfs-hadoop-file-system">
<span id="vsihdfs"></span><h3>/vsihdfs/ (Hadoop ファイルシステム)<a class="headerlink" href="#vsihdfs-hadoop-file-system" title="Link to this heading"></a></h3>
<p>/vsihdfs/ は,HDFSへの読み取りアクセスを提供するファイルシステムハンドラです.このハンドラは,Javaサポートを持つGDALでビルドされていることを必要とします(CMake <a class="reference external" href="https://cmake.org/cmake/help/latest/module/FindJNI.html">FindJNI</a>) および <a class="reference internal" href="../development/building_from_source.html#building-from-source-hdfs"><span class="std std-ref">HDFS</span></a> サポート.このハンドラのサポートは現在,Unix系システムのみで利用可能です.</p>
<p>注: HTTP REST API (webHdfs) のサポートも <a class="reference internal" href="#vsiwebhdfs"><span class="std std-ref">/vsiwebhdfs/ (Web Hadoop ファイルシステム REST API)</span></a> で利用可能です</p>
<p>通常,LD_LIBRARY_PATH および CLASSPATH 環境変数は以下のように設定する必要があります.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>HADOOP_HOME=$HOME/hadoop-3.3.5
LD_LIBRARY_PATH=$HADOOP_HOME/lib/native:$LD_LIBRARY_PATH
CLASSPATH=$HADOOP_HOME/etc/hadoop:$HADOOP_HOME/share/hadoop/common/*:$HADOOP_HOME/share/hadoop/common/lib/*:$HADOOP_HOME/share/hadoop/hdfs/*
</pre></div>
</div>
<p>CLASSPATH を適切に定義しないと,ネイティブ libhdfs でハードクラッシュが発生します.</p>
<p>関連するHadoopドキュメントリンク:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/LibHdfs.html">C API libhdfs</a></p></li>
<li><p><a class="reference external" href="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html">HDFS Users Guide</a></p></li>
<li><p><a class="reference external" href="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-common/SingleCluster.html">Hadoop: Setting up a Single Node Cluster</a></p></li>
</ul>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsihdfs/hdfsUri</span></code> の形式です.ここで, <code class="docutils literal notranslate"><span class="pre">hdfsUri</span></code> は有効な HDFS URI です.</p>
<p>例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">vsihdfs</span><span class="o">/</span><span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">//</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span>  <span class="p">(</span><span class="n">a</span> <span class="n">local</span> <span class="n">file</span> <span class="n">accessed</span> <span class="n">through</span> <span class="n">HDFS</span><span class="p">)</span>
<span class="o">/</span><span class="n">vsihdfs</span><span class="o">/</span><span class="n">hdfs</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">9000</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span>  <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">stored</span> <span class="ow">in</span> <span class="n">HDFS</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.4.</span></p>
</div>
</section>
<section id="vsiwebhdfs-web-hadoop-file-system-rest-api">
<span id="vsiwebhdfs"></span><h3>/vsiwebhdfs/ (Web Hadoop ファイルシステム REST API)<a class="headerlink" href="#vsiwebhdfs-web-hadoop-file-system-rest-api" title="Link to this heading"></a></h3>
<p>/vsiwebhdfs/ は,HDFSへの読み取りおよび書き込みアクセスを提供するファイルシステムハンドラです.これは,HDFSのHTTP REST APIを介して行われます.</p>
<p>認識されるファイル名は, <code class="file docutils literal notranslate"><span class="pre">/vsiwebhdfs/http://hostname:port/webhdfs/v1/path/to/filename</span></code> の形式です.</p>
<p>例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">vsiwebhdfs</span><span class="o">/</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">50070</span><span class="o">/</span><span class="n">webhdfs</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">mydir</span><span class="o">/</span><span class="n">byte</span><span class="o">.</span><span class="n">tif</span>
</pre></div>
</div>
<p>ファイルの順次書き込みも可能です.その場合,シークや読み取り操作は許可されません.したがって,GTiffドライバを使用してGeoTIFFファイルに直接書き込むことはサポートされません.ただし,GDAL 3.2以降, <a class="reference internal" href="configoptions.html#config-CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE</span></code></a> 設定オプションを <code class="docutils literal notranslate"><span class="pre">YES</span></code> に設定すると,ランダム書き込みアクセスが可能になります( <a class="reference internal" href="configoptions.html#config-CPL_TMPDIR"><code class="docutils literal notranslate"><span class="pre">CPL_TMPDIR</span></code></a> 設定オプションで制御される一時ローカルファイルの作成が含まれます).ファイルの削除は <a class="reference internal" href="../api/cpl.html#_CPPv49VSIUnlinkPKc" title="VSIUnlink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIUnlink()</span></code></a> でもサポートされます.ディレクトリの作成は <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> で,(空の)ディレクトリの削除は <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> でも可能です.</p>
<p><a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> の一般的な情報が適用されます.</p>
<p>以下の設定オプションが利用可能です:</p>
<ul class="simple">
<li><p id="config-WEBHDFS_USERNAME"><strong>WEBHDFS_USERNAME=value: </strong>User name (when security is off).</p>
</li>
<li><p id="config-WEBHDFS_DELEGATION"><strong>WEBHDFS_DELEGATION=value: </strong>Hadoop delegation token (when security is on).</p>
</li>
<li><p id="config-WEBHDFS_DATANODE_HOST"><strong>WEBHDFS_DATANODE_HOST=value: </strong>For APIs using redirect, substitute the redirection hostname with the one provided by this option (normally resolvable hostname should be rewritten by a proxy)</p>
</li>
<li><p id="config-WEBHDFS_REPLICATION"><strong>WEBHDFS_REPLICATION=&lt;integer&gt;: </strong>Replication value used when creating a file</p>
</li>
<li><p id="config-WEBHDFS_PERMISSION"><strong>WEBHDFS_PERMISSION=&lt;integer&gt;: </strong>Permission mask (to provide as decimal number) when creating a file or directory</p>
</li>
</ul>
<p>このファイルシステムハンドラは,ファイルの順次書き込みも可能です(その場合,シークや読み取り操作は許可されません)</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.4.</span></p>
</div>
</section>
</section>
<section id="vsistdin-standard-input-streaming">
<span id="vsistdin"></span><h2>/vsistdin/ (標準入力ストリーミング)<a class="headerlink" href="#vsistdin-standard-input-streaming" title="Link to this heading"></a></h2>
<p>/vsistdin/ は,標準入力ストリームから読み取りを可能にするファイルハンドラです.</p>
<p>ファイル名構文は <code class="file docutils literal notranslate"><span class="pre">/vsistdin/</span></code> のみである必要があります(例えば, /vsistdin/path/to/f.csv ではなく, &quot;/vsistdin?buffer_limit=value&quot; はOKです.)</p>
<p>利用可能なファイル操作は,もちろん Read() および forward Seek() に制限されます.ファイルの最初の1MBでの完全なシークが可能であり,これはキャッシュされているため, <code class="file docutils literal notranslate"><span class="pre">/vsistdin/</span></code> を閉じて再度開き,同じプロセス内でこの最初の1MB内での読み取りが複数回可能です.</p>
<p>インメモリキャッシュのサイズは, <a class="reference internal" href="#config-CPL_VSISTDIN_BUFFER_LIMIT"><code class="docutils literal notranslate"><span class="pre">CPL_VSISTDIN_BUFFER_LIMIT</span></code></a> 設定オプションで制御できます:</p>
<ul class="simple">
<li><p id="config-CPL_VSISTDIN_BUFFER_LIMIT"><strong>CPL_VSISTDIN_BUFFER_LIMIT=value: </strong> (GDAL &gt;= 3.6)  Defaults to <code class="docutils literal notranslate"><span class="pre">1MB</span></code>. Specifies the size of the /vsistdin in bytes
(or using a MB or GB suffix, e.g. &quot;1GB&quot;), or -1 for unlimited.</p>
</li>
</ul>
<p>The &quot;/vsistdin?buffer_limit=value&quot; syntax can also be used.</p>
<p>/vsistdin ファイル名は他のファイルシステムと組み合わせることができます.例えば,潜在的に大きなZIPファイルをgdal_translateにストリーミングするためにファイルを読み取るには:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cat file.tif.zip | gdal_translate /vsizip/{/vsistdin?buffer_limit=-1}/path/to/some.tif out.tif
</pre></div>
</div>
</section>
<section id="vsistdout-standard-output-streaming">
<span id="vsistdout"></span><h2>/vsistdout/ (標準出力ストリーミング)<a class="headerlink" href="#vsistdout-standard-output-streaming" title="Link to this heading"></a></h2>
<p>/vsistdout/ は,標準出力ストリームへの書き込みを可能にするファイルハンドラです.</p>
<p>ファイル名構文は <code class="file docutils literal notranslate"><span class="pre">/vsistdout/</span></code> のみである必要があります.</p>
<p>利用可能なファイル操作は,もちろん Write() に制限されます.</p>
<p>このファイルシステムの変種として,出力関数を <a class="reference internal" href="../api/cpl.html#_CPPv423VSIStdoutSetRedirection16VSIWriteFunctionP4FILE" title="VSIStdoutSetRedirection"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStdoutSetRedirection()</span></code></a> で定義できる <code class="file docutils literal notranslate"><span class="pre">/vsistdout_redirect/</span></code> ファイルシステムハンドラが存在します.</p>
</section>
<section id="vsimem-in-memory-files">
<span id="vsimem"></span><h2>/vsimem/ (インメモリファイル)<a class="headerlink" href="#vsimem-in-memory-files" title="Link to this heading"></a></h2>
<p>/vsimem/ は,メモリブロックをファイルとして扱うことを可能にするファイルハンドラです.:file:<cite>/vsimem/</cite> ベースパスの下のファイルシステムのすべての部分は,このドライバによって処理されます.</p>
<p>通常の VSI*L 関数を自由に使用して,メモリ配列を作成および破棄し,それらを実際のファイルシステムオブジェクトであるかのように扱うことができます.元のデータのコピーを複製せずに効率的にメモリファイルシステムオブジェクトを作成するためのいくつかの追加メソッドが存在し,またはメモリファイルに関連付けられたメモリブロックを&quot;盗む&quot;ためのメソッドが存在します. <a class="reference internal" href="../api/cpl.html#_CPPv420VSIFileFromMemBufferPKcP5GByte12vsi_l_offseti" title="VSIFileFromMemBuffer"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIFileFromMemBuffer()</span></code></a> および <a class="reference internal" href="../api/cpl.html#_CPPv419VSIGetMemFileBufferPKcP12vsi_l_offseti" title="VSIGetMemFileBuffer"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIGetMemFileBuffer()</span></code></a> を参照してください.</p>
<p>ディレクトリ関連の関数がサポートされています.</p>
<p>/vsimem/ ファイルは同じプロセス内で見えます.複数のスレッドが同じ基礎ファイルにアクセスできますが,異なるハンドルを使用している場合に限り,読み取りモードで同じ基礎ファイルに対して同時書き込みおよび読み取り操作はサポートされません(ロックは呼び出しコードの責任に任されます).</p>
</section>
<section id="vsisubfile-portions-of-files">
<span id="vsisubfile"></span><h2>/vsisubfile/ (ファイルの一部)<a class="headerlink" href="#vsisubfile-portions-of-files" title="Link to this heading"></a></h2>
<p>/vsisubfile/ バーチャルファイルシステムハンドラは,ファイルのサブリージョンにアクセスし,それらを仮想ファイルシステム関数(VSIFOpenL() など)に独自のファイルとして扱うことを可能にします.</p>
<p>他のファイルのサブポーションを示すために特別なファイル名の形式が使用されます: <code class="file docutils literal notranslate"><span class="pre">/vsisubfile/&lt;offset&gt;[_&lt;size&gt;],&lt;filename&gt;</span></code>.</p>
<p>サイズパラメータはオプションです.サイズパラメータがない場合,開始オフセットからのファイルの残りはサブファイルの一部として扱われます.それ以外の場合, &lt;offset&gt; から &lt;size&gt; バイトのみがサブファイルの一部として扱われます. &lt;filename&gt; 部分は通常のルールを使用して相対パスまたは絶対パスにすることができます.&lt;offset&gt; および &lt;size&gt; の値はバイト単位です.</p>
<p>例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">vsisubfile</span><span class="o">/</span><span class="mi">1000_3000</span><span class="p">,</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">abc</span><span class="o">.</span><span class="n">ntf</span>
<span class="o">/</span><span class="n">vsisubfile</span><span class="o">/</span><span class="mi">5000</span><span class="p">,</span><span class="o">../</span><span class="n">xyz</span><span class="o">/</span><span class="n">raw</span><span class="o">.</span><span class="n">dat</span>
</pre></div>
</div>
<p>/vsimem/ や従来のファイルシステムハンドラとは異なり,新しいファイルの作成,ディレクトリのトラバース,および/vsisubfile/ エリア内のファイルの削除に対するファイルシステム操作の意味のあるサポートはありません. <a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a>, <a class="reference internal" href="../api/cpl.html#_CPPv49VSIFOpenLPKcPKc" title="VSIFOpenL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIFOpenL()</span></code></a> および <a class="reference internal" href="../api/cpl.html#_CPPv49VSIFOpenLPKcPKc" title="VSIFOpenL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIFOpenL()</span></code></a> によって返されるファイルハンドルに基づく操作のみが正常に動作します.</p>
</section>
<section id="vsisparse-sparse-files">
<span id="vsisparse"></span><h2>/vsisparse/ (スパースファイル)<a class="headerlink" href="#vsisparse-sparse-files" title="Link to this heading"></a></h2>
<p>/vsisparse/ バーチャルファイルハンドラは,他のファイルのデータチャンクから仮想ファイルを構成することを可能にします.仮想ファイルには,大きなスペースが一定の値に設定されている可能性があります.これにより,画像データが一定の値に設定された大きなファイルのように見えるファイル上でいくつかの操作をテストすることが可能になります.また,テストスイートに追加するテストファイルが大きすぎる場合や,データの大部分を無視できる場合にも便利です.理論的には,異なるファイルシステム上の複数のファイルを1つの大きな仮想ファイルとして扱うためにも使用できます.</p>
<p>/vsisparse/ で参照されるファイルは,次のような形式のXMLコントロールファイルである必要があります:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;VSISparseFile&gt;
    &lt;Length&gt;87629264&lt;/Length&gt;
    &lt;SubfileRegion&gt;  &lt;!-- Stuff at start of file. --&gt;
        &lt;Filename relative=&quot;1&quot;&gt;251_head.dat&lt;/Filename&gt;
        &lt;DestinationOffset&gt;0&lt;/DestinationOffset&gt;
        &lt;SourceOffset&gt;0&lt;/SourceOffset&gt;
        &lt;RegionLength&gt;2768&lt;/RegionLength&gt;
    &lt;/SubfileRegion&gt;

    &lt;SubfileRegion&gt;  &lt;!-- RasterDMS node. --&gt;
        &lt;Filename relative=&quot;1&quot;&gt;251_rasterdms.dat&lt;/Filename&gt;
        &lt;DestinationOffset&gt;87313104&lt;/DestinationOffset&gt;
        &lt;SourceOffset&gt;0&lt;/SourceOffset&gt;
        &lt;RegionLength&gt;160&lt;/RegionLength&gt;
    &lt;/SubfileRegion&gt;

    &lt;SubfileRegion&gt;  &lt;!-- Stuff at end of file. --&gt;
        &lt;Filename relative=&quot;1&quot;&gt;251_tail.dat&lt;/Filename&gt;
        &lt;DestinationOffset&gt;87611924&lt;/DestinationOffset&gt;
        &lt;SourceOffset&gt;0&lt;/SourceOffset&gt;
        &lt;RegionLength&gt;17340&lt;/RegionLength&gt;
    &lt;/SubfileRegion&gt;

    &lt;ConstantRegion&gt;  &lt;!-- Default for the rest of the file. --&gt;
        &lt;DestinationOffset&gt;0&lt;/DestinationOffset&gt;
        &lt;RegionLength&gt;87629264&lt;/RegionLength&gt;
        &lt;Value&gt;0&lt;/Value&gt;
    &lt;/ConstantRegion&gt;
&lt;/VSISparseFile&gt;
</pre></div>
</div>
<p>値と意味がかなり明らかであることを願っています.</p>
</section>
<section id="vsicached-file-caching">
<span id="vsicached"></span><h2>/vsicached/ (ファイルキャッシュ)<a class="headerlink" href="#vsicached-file-caching" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../api/cpl_cpp.html#_CPPv419VSICreateCachedFileP16VSIVirtualHandle6size_t6size_t" title="VSICreateCachedFile"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSICreateCachedFile()</span></code></a> 関数は,仮想ファイルハンドルを取得し,入力ファイルハンドル上の読み取り操作をキャッシュする新しいハンドルを返します.キャッシュはRAMベースであり,ファイルハンドルが閉じられるとキャッシュの内容が破棄されます.キャッシュは,32KBごとのブロックの最近使用されたリストです(デフォルトサイズ).</p>
<p>これは,遅いローカル/オペレーティングシステムマウントされたファイルシステムを介してアクセス可能なファイルに対して主に有用です.</p>
<p>これは,上記で言及されたファイルシステムのいくつか(標準ファイルシステム操作のデフォルトのものと, /vsicurl/ および他の関連するネットワークファイルシステム)で, <code class="docutils literal notranslate"><span class="pre">VSI_CACHE</span></code> 設定オプションが <code class="docutils literal notranslate"><span class="pre">YES</span></code> に設定されている場合に暗黙的に使用されます.</p>
<p>各ファイルのキャッシュのデフォルトサイズは25 MBです(キャッシュされる各ファイルに対して25 MB), および <code class="docutils literal notranslate"><span class="pre">VSI_CACHE_SIZE</span></code> 設定オプション(バイト単位の値)で制御できます.</p>
<p>The <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">VSICachedFile</span></code> class only handles read operations at that time, and will error out on write operations.</p>
<p>GDAL 3.8 から,特定のファイルをキャッシュするための <code class="docutils literal notranslate"><span class="pre">/vsicached?</span></code> バーチャルファイルシステムも存在します.</p>
<p>構文は次のようになります:  <code class="docutils literal notranslate"><span class="pre">/vsicached?[option_i=val_i&amp;]*file=&lt;filename&gt;</span></code> ここで,各オプション名と値( <code class="docutils literal notranslate"><span class="pre">file</span></code> の値を含む)がURLエンコードされています(実際には,アンパサンド文字に対してのみ必要です.スラッシュ文字をエンコード解除することが望ましいかもしれません). <code class="docutils literal notranslate"><span class="pre">file</span></code> オプションが最後に表示されるようにすることが重要です.これにより,サイドカーファイルを探そうとするコードや,ディレクトリコンテンツをリストアップしようとするコードが正常に動作します.</p>
<p>現在サポートされているオプションは次のとおりです:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">chunk_size=&lt;value&gt;</span></code> where value is the` size of the chunk size in bytes. <code class="docutils literal notranslate"><span class="pre">KB</span></code> or <code class="docutils literal notranslate"><span class="pre">MB</span></code> suffixes can be also appended (without space after the numeric value). The maximum supported value is 1 GB.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cache_size=&lt;value&gt;</span></code> where value is the size of the cache size in bytes, for each file. <code class="docutils literal notranslate"><span class="pre">KB</span></code> or <code class="docutils literal notranslate"><span class="pre">MB</span></code> suffixes can be also appended.</p></li>
</ul>
<p>例:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/vsicached?chunk_size=1MB&amp;file=/home/even/byte.tif</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/vsicached?file=./byte.tif</span></code></p></li>
</ul>
</section>
<section id="vsicrypt-encrypted-files">
<span id="vsicrypt"></span><h2>/vsicrypt/ (暗号化ファイル)<a class="headerlink" href="#vsicrypt-encrypted-files" title="Link to this heading"></a></h2>
<p>/vsicrypt/ は,ランダムアクセス機能を備えた暗号化ファイルの読み取り/作成/更新を可能にする特別なファイルハンドラがインストールされています.</p>
<p>Refer to <a class="reference internal" href="../api/cpl.html#_CPPv426VSIInstallCryptFileHandlerv" title="VSIInstallCryptFileHandler"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIInstallCryptFileHandler()</span></code></a> for more details.</p>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ogr_feature_style.html" class="btn btn-neutral float-right" title="Feature Style Specification" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sql_sqlite_dialect.html" class="btn btn-neutral float-left" title="SQL SQLite方言" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2024 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
  </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>