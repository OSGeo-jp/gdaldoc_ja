<!DOCTYPE html>
<html class="writer-html5" lang="ja" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GDAL Virtual File Systems (compressed, network hosted, etc...): /vsimem, /vsizip, /vsitar, /vsicurl, ... &mdash; GDAL  ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d10597a4" />
      <link rel="stylesheet" type="text/css" href="../_static/css/gdal.css?v=e152ac3b" />

  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="canonical" href="https://gdal.org/user/virtual_file_systems.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=c033477b"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/translations.js?v=91613774"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="Feature Style Specification" href="ogr_feature_style.html" />
    <link rel="prev" title="SQL SQLite dialect" href="sql_sqlite_dialect.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../index.html">
            
              <img src="../_static/gdalicon.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../download.html">ダウンロード</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programs/index.html">プログラム</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drivers/raster/index.html">ラスタードライバー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drivers/vector/index.html">ベクタードライバー</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ユーザー</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="raster_data_model.html">Raster Data Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="multidim_raster_data_model.html">Multidimensional Raster Data Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="vector_data_model.html">Vector Data Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="gnm_data_model.html">Geographic Networks Data Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="multithreading.html">Multi-threading</a></li>
<li class="toctree-l2"><a class="reference internal" href="ogr_sql_sqlite_dialect.html">OGR SQL dialect and SQLITE SQL dialect</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">GDAL Virtual File Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#chaining">Chaining</a></li>
<li class="toctree-l3"><a class="reference internal" href="#drivers-supporting-virtual-file-systems">Drivers supporting virtual file systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsizip-zip-archives">/vsizip/ (.zip archives)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#read-capabilities">Read capabilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#write-capabilities">Write capabilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sozip-seek-optimized-zip">SOZip (Seek-Optimized ZIP)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vsigzip-gzipped-file">/vsigzip/ (gzipped file)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsitar-tar-tgz-archives">/vsitar/ (.tar, .tgz archives)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsi7z-7z-archives">/vsi7z/ (.7z archives)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsirar-rar-archives">/vsirar/ (.rar archives)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#network-based-file-systems">Network based file systems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#how-to-set-credentials">How to set credentials ?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#network-cloud-friendliness-and-file-formats">Network/cloud-friendliness and file formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsicurl-http-https-ftp-files-random-access">/vsicurl/ (http/https/ftp files: random access)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsicurl-streaming-http-https-ftp-files-streaming">/vsicurl_streaming/ (http/https/ftp files: streaming)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsis3-aws-s3-files">/vsis3/ (AWS S3 files)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsis3-and-aws-instance-metadata-service-imds">/vsis3/ and AWS Instance Metadata Service (IMDS)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-vsis3-with-minio">Configuring /vsis3/ with Minio</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsis3-streaming-aws-s3-files-streaming">/vsis3_streaming/ (AWS S3 files: streaming)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsigs-google-cloud-storage-files">/vsigs/ (Google Cloud Storage files)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsigs-streaming-google-cloud-storage-files-streaming">/vsigs_streaming/ (Google Cloud Storage files: streaming)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsiaz-microsoft-azure-blob-files">/vsiaz/ (Microsoft Azure Blob files)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsiaz-streaming-microsoft-azure-blob-files-streaming">/vsiaz_streaming/ (Microsoft Azure Blob files: streaming)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsiadls-microsoft-azure-data-lake-storage-gen2">/vsiadls/ (Microsoft Azure Data Lake Storage Gen2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsioss-alibaba-cloud-oss-files">/vsioss/ (Alibaba Cloud OSS files)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsioss-streaming-alibaba-cloud-oss-files-streaming">/vsioss_streaming/ (Alibaba Cloud OSS files: streaming)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsiswift-openstack-swift-object-storage">/vsiswift/ (OpenStack Swift Object Storage)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsiswift-streaming-openstack-swift-object-storage-streaming">/vsiswift_streaming/ (OpenStack Swift Object Storage: streaming)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsihdfs-hadoop-file-system">/vsihdfs/ (Hadoop File System)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsiwebhdfs-web-hadoop-file-system-rest-api">/vsiwebhdfs/ (Web Hadoop File System REST API)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vsistdin-standard-input-streaming">/vsistdin/ (standard input streaming)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsistdout-standard-output-streaming">/vsistdout/ (standard output streaming)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsimem-in-memory-files">/vsimem/ (in-memory files)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsisubfile-portions-of-files">/vsisubfile/ (portions of files)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsisparse-sparse-files">/vsisparse/ (sparse files)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsicached-file-caching">/vsicached/ (File caching)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vsicrypt-encrypted-files">/vsicrypt/ (encrypted files)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ogr_feature_style.html">Feature Style Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="coordinate_epoch.html">Coordinate epoch support</a></li>
<li class="toctree-l2"><a class="reference internal" href="configoptions.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="gdal_python_utilities.html">GDAL Python Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">チュートリアル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">開発</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">コミュニティ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sponsors/index.html">スポンサー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">どのように貢献できますか?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">ライセンス</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GDAL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html"> GDAL  ドキュメント </a> &raquo;</li>
      
          <li><a href="index.html">User oriented documentation</a> &raquo;</li>
      
      <li>GDAL Virtual File Systems (compressed, network hosted, etc...): /vsimem, /vsizip, /vsitar, /vsicurl, ...</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit/master/doc/source/user/virtual_file_systems.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="ogr_feature_style.html" class="btn btn-neutral float-right" title="Feature Style Specification" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sql_sqlite_dialect.html" class="btn btn-neutral float-left" title="SQL SQLite dialect" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gdal-virtual-file-systems-compressed-network-hosted-etc-vsimem-vsizip-vsitar-vsicurl">
<span id="virtual-file-systems"></span><h1>GDAL Virtual File Systems (compressed, network hosted, etc...): /vsimem, /vsizip, /vsitar, /vsicurl, ...<a class="headerlink" href="#gdal-virtual-file-systems-compressed-network-hosted-etc-vsimem-vsizip-vsitar-vsicurl" title="Link to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>GDAL can access files located on &quot;standard&quot; file systems, i.e. in the / hierarchy on Unix-like systems or in C:, D:, etc... drives on Windows. But most GDAL raster and vector drivers use a GDAL-specific abstraction to access files. This makes it possible to access less standard types of files, such as in-memory files, compressed files (.zip, .gz, .tar, .tar.gz archives), encrypted files, standard input and output (STDIN, STDOUT), files stored on network (either publicly accessible, or in private buckets of commercial cloud storage services), etc.</p>
<p>Each special file system has a prefix, and the general syntax to name a file is /vsiPREFIX/...</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdalinfo</span> <span class="o">/</span><span class="n">vsizip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">zip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span>
</pre></div>
</div>
</section>
<section id="chaining">
<h2>Chaining<a class="headerlink" href="#chaining" title="Link to this heading"></a></h2>
<p>It is possible to chain multiple file system handlers.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ogrinfo a shapefile in a zip file on the internet:</span>

<span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="o">-</span><span class="n">al</span> <span class="o">-</span><span class="n">so</span> <span class="o">/</span><span class="n">vsizip</span><span class="o">//</span><span class="n">vsicurl</span><span class="o">/</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">OSGeo</span><span class="o">/</span><span class="n">gdal</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">autotest</span><span class="o">/</span><span class="n">ogr</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">shp</span><span class="o">/</span><span class="n">poly</span><span class="o">.</span><span class="n">zip</span>

<span class="c1"># ogrinfo a shapefile in a zip file on an ftp:</span>

<span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="o">-</span><span class="n">al</span> <span class="o">-</span><span class="n">so</span> <span class="o">/</span><span class="n">vsizip</span><span class="o">//</span><span class="n">vsicurl</span><span class="o">/</span><span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">user</span><span class="p">:</span><span class="n">password</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">foldername</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">zip</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">shp</span>
</pre></div>
</div>
<p>(Note is also OK to say /vsizip/vsicurl/... with a single slash. (But when writing documentation please still use two.))</p>
</section>
<section id="drivers-supporting-virtual-file-systems">
<h2>Drivers supporting virtual file systems<a class="headerlink" href="#drivers-supporting-virtual-file-systems" title="Link to this heading"></a></h2>
<p>Virtual file systems can only be used with GDAL or OGR drivers supporting the &quot;large file API&quot;, which is now the vast majority of file based drivers. The full list of these formats can be obtained by looking at the driver marked with 'v' when running either <code class="docutils literal notranslate"><span class="pre">gdalinfo</span> <span class="pre">--formats</span></code> or <code class="docutils literal notranslate"><span class="pre">ogrinfo</span> <span class="pre">--formats</span></code>.</p>
<p>A notable exception is the HDF4 driver.</p>
</section>
<section id="vsizip-zip-archives">
<span id="vsizip"></span><h2>/vsizip/ (.zip archives)<a class="headerlink" href="#vsizip-zip-archives" title="Link to this heading"></a></h2>
<section id="read-capabilities">
<h3>Read capabilities<a class="headerlink" href="#read-capabilities" title="Link to this heading"></a></h3>
<p>/vsizip/ is a file handler that allows reading ZIP archives on-the-fly without decompressing them beforehand.</p>
<p>To point to a file inside a zip file, the filename must be of the form <code class="file docutils literal notranslate"><span class="pre">/vsizip/path/to/the/file.zip/path/inside/the/zip/file</span></code>, where <code class="file docutils literal notranslate"><span class="pre">path/to/the/file.zip</span></code> is relative or absolute and <code class="file docutils literal notranslate"><span class="pre">path/inside/the/zip/file</span></code> is the relative path to the file inside the archive.</p>
<p>To use the .zip as a directory, you can use <code class="file docutils literal notranslate"><span class="pre">/vsizip/path/to/the/file.zip</span></code> or <code class="file docutils literal notranslate"><span class="pre">/vsizip/path/to/the/file.zip/subdir</span></code>. Directory listing is available with <a class="reference internal" href="../api/cpl.html#_CPPv410VSIReadDirPKc" title="VSIReadDir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIReadDir()</span></code></a>. A <a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> (&quot;/vsizip/...&quot;) call will return the uncompressed size of the file. Directories inside the ZIP file can be distinguished from regular files with the VSI_ISDIR(stat.st_mode) macro as for regular file systems. Getting directory listing and file statistics are fast operations.</p>
<p>Note: in the particular case where the .zip file contains a single file located at its root, just mentioning <code class="file docutils literal notranslate"><span class="pre">/vsizip/path/to/the/file.zip</span></code> will work.</p>
<p>The following configuration options are specific to the /zip/ handler:</p>
<ul class="simple">
<li><p id="config-CPL_SOZIP_ENABLED"><strong>CPL_SOZIP_ENABLED=[YES/NO/AUTO]: </strong> (GDAL &gt;= 3.7)  Defaults to <code class="docutils literal notranslate"><span class="pre">AUTO</span></code>. Determines whether the SOZip optimization should be enabled. If <code class="docutils literal notranslate"><span class="pre">AUTO</span></code>,
SOZip will be enabled for uncompressed files larger than
<a class="reference internal" href="#config-CPL_SOZIP_MIN_FILE_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_SOZIP_MIN_FILE_SIZE</span></code></a>.</p>
</li>
<li><p id="config-CPL_SOZIP_MIN_FILE_SIZE"><strong>CPL_SOZIP_MIN_FILE_SIZE=value: </strong> (GDAL &gt;= 3.7)  Defaults to <code class="docutils literal notranslate"><span class="pre">1M</span></code>. Determines the minimum file size for SOZip to be automatically enabled.</p>
</li>
</ul>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">vsizip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">zip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span>  <span class="p">(</span><span class="n">relative</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="o">.</span><span class="n">zip</span><span class="p">)</span>
<span class="o">/</span><span class="n">vsizip</span><span class="o">//</span><span class="n">home</span><span class="o">/</span><span class="n">even</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">zip</span><span class="o">/</span><span class="n">subdir</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span>  <span class="p">(</span><span class="n">absolute</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="o">.</span><span class="n">zip</span><span class="p">)</span>
<span class="o">/</span><span class="n">vsizip</span><span class="o">/</span><span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">even</span>\<span class="n">my</span><span class="o">.</span><span class="n">zip</span>\<span class="n">subdir</span>\<span class="n">my</span><span class="o">.</span><span class="n">tif</span>
<span class="o">/</span><span class="n">vsizip</span><span class="o">/</span><span class="p">{</span><span class="o">/</span><span class="n">vsizip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">zip</span><span class="o">/</span><span class="n">subdir</span><span class="o">/</span><span class="n">subzip</span><span class="o">.</span><span class="n">zip</span><span class="p">}</span><span class="o">/</span><span class="n">subdir_in_subzip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">shp</span>  <span class="p">(</span><span class="n">alternate</span> <span class="n">syntax</span> <span class="k">for</span> <span class="n">a</span> <span class="n">nested</span> <span class="o">.</span><span class="n">zip</span><span class="p">)</span>
</pre></div>
</div>
<p>.kmz, .ods and .xlsx extensions are also detected as valid extensions for zip-compatible archives.</p>
<p>Starting with GDAL 2.2, an alternate syntax is available so as to enable chaining and not being dependent on .zip extension, e.g.: <code class="docutils literal notranslate"><span class="pre">/vsizip/{/path/to/the/archive}/path/inside/the/zip/file</span></code>. Note that <code class="file docutils literal notranslate"><span class="pre">/path/to/the/archive</span></code> may also itself use this alternate syntax.</p>
</section>
<section id="write-capabilities">
<h3>Write capabilities<a class="headerlink" href="#write-capabilities" title="Link to this heading"></a></h3>
<p>Write capabilities are also available. They allow creating a new zip file and adding new files to an already existing (or just created) zip file.</p>
<p>Creation of a new zip file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fmain</span> <span class="o">=</span> <span class="n">VSIFOpenL</span><span class="p">(</span><span class="s2">&quot;/vsizip/my.zip&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">);</span>
<span class="n">subfile</span> <span class="o">=</span> <span class="n">VSIFOpenL</span><span class="p">(</span><span class="s2">&quot;/vsizip/my.zip/subfile&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">);</span>
<span class="n">VSIFWriteL</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="s2">&quot;Hello world&quot;</span><span class="p">),</span> <span class="n">subfile</span><span class="p">);</span>
<span class="n">VSIFCloseL</span><span class="p">(</span><span class="n">subfile</span><span class="p">);</span>
<span class="n">VSIFCloseL</span><span class="p">(</span><span class="n">fmain</span><span class="p">);</span>
</pre></div>
</div>
<p>Addition of a new file to an existing zip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">newfile</span> <span class="o">=</span> <span class="n">VSIFOpenL</span><span class="p">(</span><span class="s2">&quot;/vsizip/my.zip/newfile&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">);</span>
<span class="n">VSIFWriteL</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="s2">&quot;Hello world&quot;</span><span class="p">),</span> <span class="n">newfile</span><span class="p">);</span>
<span class="n">VSIFCloseL</span><span class="p">(</span><span class="n">newfile</span><span class="p">);</span>
</pre></div>
</div>
<p>Starting with GDAL 2.4, the <a class="reference internal" href="configoptions.html#config-GDAL_NUM_THREADS"><code class="docutils literal notranslate"><span class="pre">GDAL_NUM_THREADS</span></code></a> configuration option can be set to an integer or <code class="docutils literal notranslate"><span class="pre">ALL_CPUS</span></code> to enable multi-threaded compression of a single file. This is similar to the pigz utility in independent mode. By default the input stream is split into 1 MB chunks (the chunk size can be tuned with the <a class="reference internal" href="configoptions.html#config-CPL_VSIL_DEFLATE_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_DEFLATE_CHUNK_SIZE</span></code></a> configuration option, with values like &quot;x K&quot; or &quot;x M&quot;), and each chunk is independently compressed (and terminated by a nine byte marker 0x00 0x00 0xFF 0xFF 0x00 0x00 0x00 0xFF 0xFF, signaling a full flush of the stream and dictionary, enabling potential independent decoding of each chunk). This slightly reduces the compression rate, so very small chunk sizes should be avoided.
Starting with GDAL 3.7, this technique is reused to generate .zip files following <a class="reference internal" href="#sozip-intro"><span class="std std-ref">SOZip (Seek-Optimized ZIP)</span></a>.</p>
<p>Read and write operations cannot be interleaved. The new zip must be closed before being re-opened in read mode.</p>
</section>
<section id="sozip-seek-optimized-zip">
<span id="sozip-intro"></span><h3>SOZip (Seek-Optimized ZIP)<a class="headerlink" href="#sozip-seek-optimized-zip" title="Link to this heading"></a></h3>
<p>GDAL (&gt;= 3.7) has full read and write support for .zip files following the
<a class="reference external" href="https://sozip.org">SOZip (Seek-Optimized ZIP)</a> profile.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">/vsizip/</span></code> virtual file system uses the SOZip index to perform fast
random access within a compressed SOZip-enabled file.</p></li>
<li><p>The <a class="reference internal" href="../drivers/vector/shapefile.html#vector-shapefile"><span class="std std-ref">ESRI Shapefile / DBF</span></a> and <a class="reference internal" href="../drivers/vector/gpkg.html#vector-gpkg"><span class="std std-ref">GPKG -- GeoPackage vector</span></a> drivers can directly generate
SOZip-enabled .shz/.shp.zip or .gpkg.zip files.</p></li>
<li><p>The <a class="reference internal" href="../api/cpl.html#_CPPv415CPLAddFileInZipPvPKcPKcP8VSILFILE12CSLConstList16GDALProgressFuncPv" title="CPLAddFileInZip"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CPLAddFileInZip()</span></code></a> C function, which can compress a file and add
it to an new or existing ZIP file, enables the SOZip optimization when relevant
(ie when a file to be compressed is larger than 1 MB).
SOZip optimization can be forced by setting the <a class="reference internal" href="#config-CPL_SOZIP_ENABLED"><code class="docutils literal notranslate"><span class="pre">CPL_SOZIP_ENABLED</span></code></a>
configuration option to YES. Or totally disabled by setting it to NO.</p></li>
<li><p>The <a class="reference internal" href="../api/cpl.html#_CPPv418VSIGetFileMetadataPKcPKc12CSLConstList" title="VSIGetFileMetadata"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIGetFileMetadata()</span></code></a> method can be called on a filename of
the form <code class="file docutils literal notranslate"><span class="pre">/vsizip/path/to/the/file.zip/path/inside/the/zip/file</span></code> and
with domain = &quot;ZIP&quot; to get information if a SOZip index is available for that file.</p></li>
<li><p>The <a class="reference internal" href="../programs/sozip.html#sozip"><span class="std std-ref">sozip</span></a> new command line utility can be used to create a
seek-optimized ZIP file, to append files to an existing ZIP file, list the
contents of a ZIP file and display the SOZip optimization status or validate a SOZip file.</p></li>
</ul>
</section>
</section>
<section id="vsigzip-gzipped-file">
<span id="vsigzip"></span><h2>/vsigzip/ (gzipped file)<a class="headerlink" href="#vsigzip-gzipped-file" title="Link to this heading"></a></h2>
<p>/vsigzip/ is a file handler that allows on-the-fly reading of GZip (.gz) files without decompressing them in advance.</p>
<p>To view a gzipped file as uncompressed by GDAL, you must use the <code class="file docutils literal notranslate"><span class="pre">/vsigzip/path/to/the/file.gz</span></code> syntax, where <code class="file docutils literal notranslate"><span class="pre">path/to/the/file.gz</span></code> is relative or absolute.</p>
<p>The following configuration options are specific to the /vsigzip/ handler:</p>
<ul class="simple">
<li><p id="config-CPL_VSIL_GZIP_WRITE_PROPERTIES"><strong>CPL_VSIL_GZIP_WRITE_PROPERTIES=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">YES</span></code>. If <code class="docutils literal notranslate"><span class="pre">YES</span></code>, when the file is located in a writable location, a file with
extension .gz.properties is created with an indication of the
uncompressed file size.</p>
</li>
</ul>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">vsigzip</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">gz</span> <span class="c1"># (relative path to the .gz)</span>
<span class="o">/</span><span class="n">vsigzip</span><span class="o">//</span><span class="n">home</span><span class="o">/</span><span class="n">even</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">gz</span> <span class="c1"># (absolute path to the .gz)</span>
<span class="o">/</span><span class="n">vsigzip</span><span class="o">/</span><span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">even</span>\<span class="n">my</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<p><a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> will return the uncompressed file size, but this is potentially a slow operation on large files, since it requires uncompressing the whole file. Seeking to the end of the file, or at random locations, is similarly slow. To speed up that process, &quot;snapshots&quot; are internally created in memory so as to be able being able to seek to part of the files already decompressed in a faster way. This mechanism of snapshots also apply to /vsizip/ files.</p>
<p>Write capabilities are also available, but read and write operations cannot be interleaved.</p>
<p>Starting with GDAL 2.4, the <a class="reference internal" href="configoptions.html#config-GDAL_NUM_THREADS"><code class="docutils literal notranslate"><span class="pre">GDAL_NUM_THREADS</span></code></a> configuration option can be set to an integer or <code class="docutils literal notranslate"><span class="pre">ALL_CPUS</span></code> to enable multi-threaded compression of a single file. This is similar to the pigz utility in independent mode. By default the input stream is split into 1 MB chunks (the chunk size can be tuned with the <a class="reference internal" href="configoptions.html#config-CPL_VSIL_DEFLATE_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_DEFLATE_CHUNK_SIZE</span></code></a> configuration option, with values like &quot;x K&quot; or &quot;x M&quot;), and each chunk is independently compressed (and terminated by a nine byte marker 0x00 0x00 0xFF 0xFF 0x00 0x00 0x00 0xFF 0xFF, signaling a full flush of the stream and dictionary, enabling potential independent decoding of each chunk). This slightly reduces the compression rate, so very small chunk sizes should be avoided.</p>
</section>
<section id="vsitar-tar-tgz-archives">
<span id="vsitar"></span><h2>/vsitar/ (.tar, .tgz archives)<a class="headerlink" href="#vsitar-tar-tgz-archives" title="Link to this heading"></a></h2>
<p>/vsitar/ is a file handler that allows on-the-fly reading in regular uncompressed .tar or compressed .tgz or .tar.gz archives, without decompressing them in advance.</p>
<p>To point to a file inside a .tar, .tgz .tar.gz file, the filename must be of the form <code class="file docutils literal notranslate"><span class="pre">/vsitar/path/to/the/file.tar/path/inside/the/tar/file</span></code>, where <code class="file docutils literal notranslate"><span class="pre">path/to/the/file.tar</span></code> is relative or absolute and <code class="file docutils literal notranslate"><span class="pre">path/inside/the/tar/file</span></code> is the relative path to the file inside the archive.</p>
<p>To use the .tar as a directory, you can use <code class="file docutils literal notranslate"><span class="pre">/vsizip/path/to/the/file.tar</span></code> or <code class="file docutils literal notranslate"><span class="pre">/vsitar/path/to/the/file.tar/subdir</span></code>. Directory listing is available with <a class="reference internal" href="../api/cpl.html#_CPPv410VSIReadDirPKc" title="VSIReadDir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIReadDir()</span></code></a>. A <a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> (&quot;/vsitar/...&quot;) call will return the uncompressed size of the file. Directories inside the TAR file can be distinguished from regular files with the VSI_ISDIR(stat.st_mode) macro as for regular file systems. Getting directory listing and file statistics are fast operations.</p>
<p>Note: in the particular case where the .tar file contains a single file located at its root, just mentioning <code class="file docutils literal notranslate"><span class="pre">/vsitar/path/to/the/file.tar</span></code> will work.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">vsitar</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tar</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span> <span class="c1"># (relative path to the .tar)</span>
<span class="o">/</span><span class="n">vsitar</span><span class="o">//</span><span class="n">home</span><span class="o">/</span><span class="n">even</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tar</span><span class="o">/</span><span class="n">subdir</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span> <span class="c1"># (absolute path to the .tar)</span>
<span class="o">/</span><span class="n">vsitar</span><span class="o">/</span><span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">even</span>\<span class="n">my</span><span class="o">.</span><span class="n">tar</span>\<span class="n">subdir</span>\<span class="n">my</span><span class="o">.</span><span class="n">tif</span>
</pre></div>
</div>
<p>Starting with GDAL 2.2, an alternate syntax is available so as to enable chaining and not being dependent on .tar extension, e.g.: <code class="docutils literal notranslate"><span class="pre">/vsitar/{/path/to/the/archive}/path/inside/the/tar/file</span></code>. Note that <code class="file docutils literal notranslate"><span class="pre">/path/to/the/archive</span></code> may also itself use this alternate syntax.</p>
</section>
<section id="vsi7z-7z-archives">
<span id="vsi7z"></span><h2>/vsi7z/ (.7z archives)<a class="headerlink" href="#vsi7z-7z-archives" title="Link to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.7.</span></p>
</div>
<p>/vsi7z/ is a file handler that allows reading <a class="reference external" href="https://en.wikipedia.org/wiki/7z">7z</a>
archives on-the-fly without decompressing them beforehand. This file system is
read-only. Directory listing and <a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> are available, similarly
to above mentioned file systems.</p>
<p>It requires GDAL to be built against <a class="reference external" href="https://libarchive.org/">libarchive</a>
(and libarchive having LZMA support to be of practical use).</p>
<p>To point to a file inside a 7z file, the filename must be of the form
<code class="file docutils literal notranslate"><span class="pre">/vsi7z/path/to/the/file.7z/path/inside/the/7z/file</span></code>, where
<code class="file docutils literal notranslate"><span class="pre">path/to/the/file.7z</span></code> is relative or absolute and <code class="file docutils literal notranslate"><span class="pre">path/inside/the/7z/file</span></code>
is the relative path to the file inside the archive.`</p>
<p>Default extensions recognized by this virtual file system are:
<code class="docutils literal notranslate"><span class="pre">7z</span></code>, <code class="docutils literal notranslate"><span class="pre">lpk</span></code> (Esri ArcGIS Layer Package), <code class="docutils literal notranslate"><span class="pre">lpkx</span></code>, <code class="docutils literal notranslate"><span class="pre">mpk</span></code> (Esri ArcGIS Map Package),
<code class="docutils literal notranslate"><span class="pre">mpkx</span></code> and <code class="docutils literal notranslate"><span class="pre">ppkx</span></code> (Esri ArcGIS Pro Project Package).</p>
<p>An alternate syntax is available so as to enable chaining and not being
dependent on those extensions, e.g.: <code class="docutils literal notranslate"><span class="pre">/vsi7z/{/path/to/the/archive}/path/inside/the/archive</span></code>.
Note that <code class="file docutils literal notranslate"><span class="pre">/path/to/the/archive</span></code> may also itself use this alternate syntax.</p>
<p>Note that random seeking within a large compressed file will be inefficient when
backward seeking is needed (decompression will be restarted from the start of the
file). Performance will be the best in sequential reading.</p>
</section>
<section id="vsirar-rar-archives">
<span id="vsirar"></span><h2>/vsirar/ (.rar archives)<a class="headerlink" href="#vsirar-rar-archives" title="Link to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.7.</span></p>
</div>
<p>/vsirar/ is a file handler that allows reading <a class="reference external" href="https://en.wikipedia.org/wiki/RAR_(file_format)">RAR</a>
archives on-the-fly without decompressing them beforehand. This file system is
read-only. Directory listing and <a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> are available, similarly
to above mentioned file systems.</p>
<p>It requires GDAL to be built against <a class="reference external" href="https://libarchive.org/">libarchive</a>
(and libarchive having LZMA support to be of practical use).</p>
<p>To point to a file inside a RAR file, the filename must be of the form
<code class="file docutils literal notranslate"><span class="pre">/vsirar/path/to/the/file.rar/path/inside/the/rar/file</span></code>, where
<code class="file docutils literal notranslate"><span class="pre">path/to/the/file.rar</span></code> is relative or absolute and <code class="file docutils literal notranslate"><span class="pre">path/inside/the/rar/file</span></code>
is the relative path to the file inside the archive.`</p>
<p>The default extension recognized by this virtual file system is: <code class="docutils literal notranslate"><span class="pre">rar</span></code></p>
<p>An alternate syntax is available so as to enable chaining and not being
dependent on those extensions, e.g.: <code class="docutils literal notranslate"><span class="pre">/vsirar/{/path/to/the/archive}/path/inside/the/archive</span></code>.
Note that <code class="file docutils literal notranslate"><span class="pre">/path/to/the/archive</span></code> may also itself use this alternate syntax.</p>
<p>Note that random seeking within a large compressed file will be inefficient when
backward seeking is needed (decompression will be restarted from the start of the
file). Performance will be the best in sequential reading.</p>
</section>
<section id="network-based-file-systems">
<span id="id1"></span><h2>Network based file systems<a class="headerlink" href="#network-based-file-systems" title="Link to this heading"></a></h2>
<p>A generic <a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> file system handler exists for online resources that do not require particular signed authentication schemes. It is specialized into sub-filesystems for commercial cloud storage services, such as <a class="reference internal" href="#vsis3"><span class="std std-ref">/vsis3/</span></a>,  <a class="reference internal" href="#vsigs"><span class="std std-ref">/vsigs/</span></a>, <a class="reference internal" href="#vsiaz"><span class="std std-ref">/vsiaz/</span></a>, <a class="reference internal" href="#vsioss"><span class="std std-ref">/vsioss/</span></a> or  <a class="reference internal" href="#vsiswift"><span class="std std-ref">/vsiswift/</span></a>.</p>
<p>When reading of entire files in a streaming way is possible, prefer using the <a class="reference internal" href="#vsicurl-streaming"><span class="std std-ref">/vsicurl_streaming/</span></a>, and its variants for the above cloud storage services, for more efficiency.</p>
<section id="how-to-set-credentials">
<h3>How to set credentials ?<a class="headerlink" href="#how-to-set-credentials" title="Link to this heading"></a></h3>
<p>Cloud storage services require setting credentials. For some of them, they can
be provided through configuration files (~/.aws/config, ~/.boto, ..) or through
environment variables / configuration options.</p>
<p>Starting with GDAL 3.6, <a class="reference internal" href="../api/cpl.html#_CPPv424VSISetPathSpecificOptionPKcPKcPKc" title="VSISetPathSpecificOption"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetPathSpecificOption()</span></code></a> can be used to set configuration
options with a granularity at the level of a file path, which makes it easier if using
the same virtual file system but with different credentials (e.g. different
credentials for bucket &quot;/vsis3/foo&quot; and &quot;/vsis3/bar&quot;)</p>
<p>Starting with GDAL 3.5, credentials (or path specific options) can be specified in a
<a class="reference internal" href="configoptions.html#gdal-configuration-file"><span class="std std-ref">GDAL configuration file</span></a>, either in a specific one
explicitly loaded with <a class="reference internal" href="../api/cpl.html#_CPPv428CPLLoadConfigOptionsFromFilePKci" title="CPLLoadConfigOptionsFromFile"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CPLLoadConfigOptionsFromFile()</span></code></a>, or
one of the default automatically loaded by <a class="reference internal" href="../api/cpl.html#_CPPv439CPLLoadConfigOptionsFromPredefinedFilesv" title="CPLLoadConfigOptionsFromPredefinedFiles"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CPLLoadConfigOptionsFromPredefinedFiles()</span></code></a>.</p>
<p>They should be put under a <code class="docutils literal notranslate"><span class="pre">[credentials]</span></code> section, and for each path prefix,
under a relative subsection whose name starts with <code class="docutils literal notranslate"><span class="pre">[.</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">[.some_arbitrary_name]</span></code>),
and whose first key is <code class="docutils literal notranslate"><span class="pre">path</span></code>.
`
.. code-block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">credentials</span><span class="p">]</span>

<span class="p">[</span><span class="o">.</span><span class="n">private_bucket</span><span class="p">]</span>
<span class="n">path</span><span class="o">=/</span><span class="n">vsis3</span><span class="o">/</span><span class="n">my_private_bucket</span>
<span class="n">AWS_SECRET_ACCESS_KEY</span><span class="o">=...</span>
<span class="n">AWS_ACCESS_KEY_ID</span><span class="o">=...</span>

<span class="p">[</span><span class="o">.</span><span class="n">sentinel_s2_l1c</span><span class="p">]</span>
<span class="n">path</span><span class="o">=/</span><span class="n">vsis3</span><span class="o">/</span><span class="n">sentinel</span><span class="o">-</span><span class="n">s2</span><span class="o">-</span><span class="n">l1c</span>
<span class="n">AWS_REQUEST_PAYER</span><span class="o">=</span><span class="n">requester</span>
</pre></div>
</div>
</section>
<section id="network-cloud-friendliness-and-file-formats">
<h3>Network/cloud-friendliness and file formats<a class="headerlink" href="#network-cloud-friendliness-and-file-formats" title="Link to this heading"></a></h3>
<p>While most GDAL raster and vector file systems can be accessed in a remote way
with /vsicurl/ and other derived virtual file systems, performance is highly
dependent on the format, and even for a given format on the special data
arrangement. Performance also depends on the particular access pattern made
to the file.</p>
<p>For interactive visualisation of raster files, the file should ideally have
the following characteristics:</p>
<ul class="simple">
<li><p>it should be tiled in generally square-shaped tiles.</p></li>
<li><p>it should have an index of the tile location within the file</p></li>
<li><p>it should have overviews/pyramids</p></li>
</ul>
<section id="tiff-geotiff">
<h4>TIFF/GeoTIFF<a class="headerlink" href="#tiff-geotiff" title="Link to this heading"></a></h4>
<p>Cloud-optimized GeoTIFF files as generated by the <a class="reference internal" href="../drivers/raster/cog.html#raster-cog"><span class="std std-ref">COG -- Cloud Optimized GeoTIFF generator</span></a> driver are
suitable for network access. More generally tiled GeoTIFF files with overviews
are.</p>
</section>
<section id="jpeg2000">
<h4>JPEG2000<a class="headerlink" href="#jpeg2000" title="Link to this heading"></a></h4>
<p>JPEG2000 is generally not suitable for network access, unless using a layout
carefully designed for that purpose, and when using a JPEG200 library that is
heavily optimized.</p>
<p>JPEG2000 files can come in many flavors : single-tiled vs tiled, with different
progression order (this is of particular importance for single-tiled access),
and with optional markers</p>
<p>The OpenJPEG library (usable through the <a class="reference internal" href="../drivers/raster/jp2openjpeg.html#raster-jp2openjpeg"><span class="std std-ref">JP2OpenJPEG -- JPEG2000 driver based on OpenJPEG library</span></a> driver),
at the time of writing, needs to ingest each tile-part that participates
to the area of interest of the pixel query in a whole (and thus for a
single-tiled file, to ingest the whole file). It also does not make use of the
potentially present TLM (Tile-Part length) marker, which is the equivalent of a
tile index, nor PLT (Packed Length, tile-part header), which is an index of
packets within a tile. The Kakadu library  (usable through
the <a class="reference internal" href="../drivers/raster/jp2kak.html#raster-jp2kak"><span class="std std-ref">JP2KAK -- JPEG 2000 (based on Kakadu SDK)</span></a> driver), can use those markers to limit the number
of bytes to ingest (but for single-tiled raster, performance might still suffer.)</p>
<p>The <a class="reference external" href="https://raw.githubusercontent.com/OSGeo/gdal/master/swig/python/gdal-utils/osgeo_utils/samples/dump_jp2.py">dump_jp2.py</a>
Python script can be used to check the characteristics of a given JPEG200 file.
Fields of interest to examine in the output are:</p>
<ul class="simple">
<li><p>the tile size (given by the <code class="docutils literal notranslate"><span class="pre">XTsiz</span></code> and <code class="docutils literal notranslate"><span class="pre">YTsiz</span></code> fields in the <code class="docutils literal notranslate"><span class="pre">SIZ</span></code> marker)</p></li>
<li><p>the presence of <code class="docutils literal notranslate"><span class="pre">TLM</span></code> markers</p></li>
<li><p>the presence of <code class="docutils literal notranslate"><span class="pre">PLT</span></code> markers</p></li>
</ul>
</section>
</section>
<section id="vsicurl-http-https-ftp-files-random-access">
<span id="vsicurl"></span><h3>/vsicurl/ (http/https/ftp files: random access)<a class="headerlink" href="#vsicurl-http-https-ftp-files-random-access" title="Link to this heading"></a></h3>
<p>/vsicurl/ is a file system handler that allows on-the-fly random reading of files available through HTTP/FTP web protocols, without prior download of the entire file. It requires GDAL to be built against libcurl.</p>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsicurl/http[s]://path/to/remote/resource</span></code> or <code class="file docutils literal notranslate"><span class="pre">/vsicurl/ftp://path/to/remote/resource</span></code>, where <code class="file docutils literal notranslate"><span class="pre">path/to/remote/resource</span></code> is the URL of a remote resource.</p>
<p>Example using <strong class="program">ogrinfo</strong> to read a shapefile on the internet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="o">-</span><span class="n">al</span> <span class="o">-</span><span class="n">so</span> <span class="o">/</span><span class="n">vsicurl</span><span class="o">/</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">OSGeo</span><span class="o">/</span><span class="n">gdal</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">autotest</span><span class="o">/</span><span class="n">ogr</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">poly</span><span class="o">.</span><span class="n">shp</span>
</pre></div>
</div>
<p>Starting with GDAL 2.3, options can be passed in the filename with the following syntax: <code class="docutils literal notranslate"><span class="pre">/vsicurl?[option_i=val_i&amp;]*url=http://...</span></code> where each option name and value (including the value of &quot;url&quot;) is URL-encoded. Currently supported options are:</p>
<ul class="simple">
<li><p>use_head=yes/no: whether the HTTP HEAD request can be emitted. Default to YES. Setting this option overrides the behavior of the <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_USE_HEAD"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_USE_HEAD</span></code></a> configuration option.</p></li>
<li><p>max_retry=number: default to 0. Setting this option overrides the behavior of the <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_MAX_RETRY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_MAX_RETRY</span></code></a> configuration option.</p></li>
<li><p>retry_delay=number_in_seconds: default to 30. Setting this option overrides the behavior of the <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_RETRY_DELAY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_RETRY_DELAY</span></code></a> configuration option.</p></li>
<li><p>retry_codes=``ALL`` or comma-separated list of HTTP error codes. Setting this option overrides the behavior of the <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_RETRY_CODES"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_RETRY_CODES</span></code></a> configuration option. (GDAL &gt;= 3.10)</p></li>
<li><p>list_dir=yes/no: whether an attempt to read the file list of the directory where the file is located should be done. Default to YES.</p></li>
<li><p>useragent=value: HTTP UserAgent header</p></li>
<li><p>referer=value: HTTP Referer header</p></li>
<li><p>cookie=value: HTTP Cookie header</p></li>
<li><p>header_file=value: Filename that contains one or several &quot;Header: Value&quot; lines</p></li>
<li><p>unsafessl=yes/no</p></li>
<li><p>low_speed_time=value</p></li>
<li><p>low_speed_limit=value</p></li>
<li><p>proxy=value</p></li>
<li><p>proxyauth=value</p></li>
<li><p>proxyuserpwd=value</p></li>
<li><p>pc_url_signing=yes/no: whether to use the URL signing mechanism of Microsoft Planetary Computer (<a class="reference external" href="https://planetarycomputer.microsoft.com/docs/concepts/sas/">https://planetarycomputer.microsoft.com/docs/concepts/sas/</a>). (GDAL &gt;= 3.5.2). Note that starting with GDAL 3.9, this may also be set with the path-specific option ( cf <a class="reference internal" href="../api/cpl.html#_CPPv424VSISetPathSpecificOptionPKcPKcPKc" title="VSISetPathSpecificOption"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetPathSpecificOption()</span></code></a>) <code class="docutils literal notranslate"><span class="pre">VSICURL_PC_URL_SIGNING</span></code> set to <code class="docutils literal notranslate"><span class="pre">YES</span></code>.</p></li>
<li><p>pc_collection=name: name of the collection of the dataset for Planetary Computer URL signing. Only used when pc_url_signing=yes. (GDAL &gt;= 3.5.2)</p></li>
</ul>
<p>Partial downloads (requires the HTTP server to support random reading) are done with a 16 KB granularity by default. Starting with GDAL 2.3, the chunk size can be configured with the <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_CHUNK_SIZE</span></code></a> configuration option, with a value in bytes. If the driver detects sequential reading, it will progressively increase the chunk size up to 128 times <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_CHUNK_SIZE</span></code></a> (so 2 MB by default) to improve download performance.</p>
<p>In addition, a global least-recently-used cache of 16 MB shared among all downloaded content is used, and content in it may be reused after a file handle has been closed and reopen, during the life-time of the process or until <a class="reference internal" href="../api/cpl.html#_CPPv417VSICurlClearCachev" title="VSICurlClearCache"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSICurlClearCache()</span></code></a> is called. Starting with GDAL 2.3, the size of this global LRU cache can be modified by setting the configuration option <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_CACHE_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_CACHE_SIZE</span></code></a> (in bytes).</p>
<p>When increasing the value of <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_CHUNK_SIZE</span></code></a> to optimize sequential reading, it is recommended to increase <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_CACHE_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_CACHE_SIZE</span></code></a> as well to 128 times the value of <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_CHUNK_SIZE</span></code></a>.</p>
<p>Starting with GDAL 2.3, the <a class="reference internal" href="configoptions.html#config-GDAL_INGESTED_BYTES_AT_OPEN"><code class="docutils literal notranslate"><span class="pre">GDAL_INGESTED_BYTES_AT_OPEN</span></code></a> configuration option can be set to impose the number of bytes read in one GET call at file opening (can help performance to read Cloud optimized geotiff with a large header).</p>
<p>The <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_PROXY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_PROXY</span></code></a> (for both HTTP and HTTPS protocols), <a class="reference internal" href="configoptions.html#config-GDAL_HTTPS_PROXY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTPS_PROXY</span></code></a> (for HTTPS protocol only), <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_PROXYUSERPWD"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_PROXYUSERPWD</span></code></a> and <a class="reference internal" href="configoptions.html#config-GDAL_PROXY_AUTH"><code class="docutils literal notranslate"><span class="pre">GDAL_PROXY_AUTH</span></code></a> configuration options can be used to define a proxy server. The syntax to use is the one of Curl <code class="docutils literal notranslate"><span class="pre">CURLOPT_PROXY</span></code>, <code class="docutils literal notranslate"><span class="pre">CURLOPT_PROXYUSERPWD</span></code> and <code class="docutils literal notranslate"><span class="pre">CURLOPT_PROXYAUTH</span></code> options.</p>
<p>Starting with GDAL 2.1.3, the <a class="reference internal" href="configoptions.html#config-CURL_CA_BUNDLE"><code class="docutils literal notranslate"><span class="pre">CURL_CA_BUNDLE</span></code></a> or <a class="reference internal" href="configoptions.html#config-SSL_CERT_FILE"><code class="docutils literal notranslate"><span class="pre">SSL_CERT_FILE</span></code></a> configuration options can be used to set the path to the Certification Authority (CA) bundle file (if not specified, curl will use a file in a system location).</p>
<p>Starting with GDAL 2.3, additional HTTP headers can be sent by setting the <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_HEADER_FILE"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_HEADER_FILE</span></code></a> configuration option to point to a filename of a text file with &quot;key: value&quot; HTTP headers.</p>
<p>As an alternative, starting with GDAL 3.6, the
<a class="reference internal" href="configoptions.html#config-GDAL_HTTP_HEADERS"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_HEADERS</span></code></a> configuration option can also be
used to specify headers. <a class="reference internal" href="configoptions.html#config-CPL_CURL_VERBOSE"><code class="docutils literal notranslate"><span class="pre">CPL_CURL_VERBOSE=YES</span></code></a> allows one to see them and more, when combined with <code class="docutils literal notranslate"><span class="pre">--debug</span></code>.</p>
<p>Starting with GDAL 2.3, the <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_MAX_RETRY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_MAX_RETRY</span></code></a> (number of attempts) and <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_RETRY_DELAY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_RETRY_DELAY</span></code></a> (in seconds) configuration option can be set, so that request retries are done in case of HTTP errors 429, 502, 503 or 504.</p>
<p>Starting with GDAL 3.6, the following configuration options control the TCP keep-alive functionality (cf <a class="reference external" href="https://daniel.haxx.se/blog/2020/02/10/curl-ootw-keepalive-time/">https://daniel.haxx.se/blog/2020/02/10/curl-ootw-keepalive-time/</a> for a detailed explanation):</p>
<ul class="simple">
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_TCP_KEEPALIVE"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_TCP_KEEPALIVE</span></code></a> = YES/NO. whether to enable TCP keep-alive. Defaults to NO</p></li>
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_TCP_KEEPIDLE"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_TCP_KEEPIDLE</span></code></a> = integer, in seconds. Keep-alive idle time. Defaults to 60. Only taken into account if GDAL_HTTP_TCP_KEEPALIVE=YES.</p></li>
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_TCP_KEEPINTVL"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_TCP_KEEPINTVL</span></code></a> = integer, in seconds. Interval time between keep-alive probes. Defaults to 60. Only taken into account if GDAL_HTTP_TCP_KEEPALIVE=YES.</p></li>
</ul>
<p>Starting with GDAL 3.7, the following configuration options control support for SSL client certificates:</p>
<ul class="simple">
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_SSLCERT"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_SSLCERT</span></code></a> = filename. Filename of the the SSL client certificate. Cf <a class="reference external" href="https://curl.se/libcurl/c/CURLOPT_SSLCERT.html">https://curl.se/libcurl/c/CURLOPT_SSLCERT.html</a></p></li>
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_SSLCERTTYPE"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_SSLCERTTYPE</span></code></a> = string. Format of the SSL certificate: &quot;PEM&quot; or &quot;DER&quot;. Cf <a class="reference external" href="https://curl.se/libcurl/c/CURLOPT_SSLCERTTYPE.html">https://curl.se/libcurl/c/CURLOPT_SSLCERTTYPE.html</a></p></li>
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_SSLKEY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_SSLKEY</span></code></a> = filename. Private key file for TLS and SSL client certificate. Cf <a class="reference external" href="https://curl.se/libcurl/c/CURLOPT_SSLKEY.html">https://curl.se/libcurl/c/CURLOPT_SSLKEY.html</a></p></li>
<li><p><a class="reference internal" href="configoptions.html#config-GDAL_HTTP_KEYPASSWD"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_KEYPASSWD</span></code></a> = string. Passphrase to private key. Cf <a class="reference external" href="https://curl.se/libcurl/c/CURLOPT_KEYPASSWD.html">https://curl.se/libcurl/c/CURLOPT_KEYPASSWD.html</a></p></li>
</ul>
<p>More generally options of <a class="reference internal" href="../api/cpl.html#_CPPv412CPLHTTPFetchPKc12CSLConstList" title="CPLHTTPFetch"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CPLHTTPFetch()</span></code></a> available through configuration options are available.
Starting with GDAL 3.7, the above configuration options can also be specified
as path-specific options with <a class="reference internal" href="../api/cpl.html#_CPPv424VSISetPathSpecificOptionPKcPKcPKc" title="VSISetPathSpecificOption"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetPathSpecificOption()</span></code></a>.</p>
<p>The file can be cached in RAM by setting the configuration option <a class="reference internal" href="configoptions.html#config-VSI_CACHE"><code class="docutils literal notranslate"><span class="pre">VSI_CACHE</span></code></a> to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>. The cache size defaults to 25 MB, but can be modified by setting the configuration option <a class="reference internal" href="configoptions.html#config-VSI_CACHE_SIZE"><code class="docutils literal notranslate"><span class="pre">VSI_CACHE_SIZE</span></code></a> (in bytes). Content in that cache is discarded when the file handle is closed.</p>
<p>Starting with GDAL 2.3, the <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_NON_CACHED"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_NON_CACHED</span></code></a> configuration option can be set to values like <code class="file docutils literal notranslate"><span class="pre">/vsicurl/http://example.com/foo.tif:/vsicurl/http://example.com/some_directory</span></code>, so that at file handle closing, all cached content related to the mentioned file(s) is no longer cached. This can help when dealing with resources that can be modified during execution of GDAL related code. Alternatively, <a class="reference internal" href="../api/cpl.html#_CPPv417VSICurlClearCachev" title="VSICurlClearCache"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSICurlClearCache()</span></code></a> can be used.</p>
<p>Starting with GDAL 2.1, <code class="docutils literal notranslate"><span class="pre">/vsicurl/</span></code> will try to query directly redirected URLs to Amazon S3 signed URLs during their validity period, so as to minimize round-trips. This behavior can be disabled by setting the configuration option <a class="reference internal" href="configoptions.html#config-CPL_VSIL_CURL_USE_S3_REDIRECT"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_USE_S3_REDIRECT</span></code></a> to <code class="docutils literal notranslate"><span class="pre">NO</span></code>.</p>
<p><a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> will return the size in st_size member and file nature- file or directory - in st_mode member (the later only reliable with FTP resources for now).</p>
<p><a class="reference internal" href="../api/cpl.html#_CPPv410VSIReadDirPKc" title="VSIReadDir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIReadDir()</span></code></a> should be able to parse the HTML directory listing returned by the most popular web servers, such as Apache and Microsoft IIS.</p>
</section>
<section id="vsicurl-streaming-http-https-ftp-files-streaming">
<span id="vsicurl-streaming"></span><h3>/vsicurl_streaming/ (http/https/ftp files: streaming)<a class="headerlink" href="#vsicurl-streaming-http-https-ftp-files-streaming" title="Link to this heading"></a></h3>
<p>/vsicurl_streaming/ is a file system handler that allows on-the-fly sequential reading of files streamed through HTTP/FTP web protocols, without prior download of the entire file. It requires GDAL to be built against libcurl.</p>
<p>Although this file handler is able seek to random offsets in the file, this will not be efficient. If you need efficient random access and that the server supports range downloading, you should use the <a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> file system handler instead.</p>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsicurl_streaming/http[s]://path/to/remote/resource</span></code> or <code class="file docutils literal notranslate"><span class="pre">/vsicurl_streaming/ftp://path/to/remote/resource</span></code>, where <code class="file docutils literal notranslate"><span class="pre">path/to/remote/resource</span></code> is the URL of a remote resource.</p>
<p>The <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_PROXY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_PROXY</span></code></a> (for both HTTP and HTTPS protocols), <a class="reference internal" href="configoptions.html#config-GDAL_HTTPS_PROXY"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTPS_PROXY</span></code></a> (for HTTPS protocol only), <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_PROXYUSERPWD"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_PROXYUSERPWD</span></code></a> and <a class="reference internal" href="configoptions.html#config-GDAL_PROXY_AUTH"><code class="docutils literal notranslate"><span class="pre">GDAL_PROXY_AUTH</span></code></a> configuration options can be used to define a proxy server. The syntax to use is the one of Curl <code class="docutils literal notranslate"><span class="pre">CURLOPT_PROXY</span></code>, <code class="docutils literal notranslate"><span class="pre">CURLOPT_PROXYUSERPWD</span></code> and <code class="docutils literal notranslate"><span class="pre">CURLOPT_PROXYAUTH</span></code> options.</p>
<p>Starting with GDAL 2.1.3, the <a class="reference internal" href="configoptions.html#config-CURL_CA_BUNDLE"><code class="docutils literal notranslate"><span class="pre">CURL_CA_BUNDLE</span></code></a> or <a class="reference internal" href="configoptions.html#config-SSL_CERT_FILE"><code class="docutils literal notranslate"><span class="pre">SSL_CERT_FILE</span></code></a> configuration options can be used to set the path to the Certification Authority (CA) bundle file (if not specified, curl will use a file in a system location).</p>
<p>The file can be cached in RAM by setting the configuration option <a class="reference internal" href="configoptions.html#config-VSI_CACHE"><code class="docutils literal notranslate"><span class="pre">VSI_CACHE</span></code></a> to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>. The cache size defaults to 25 MB, but can be modified by setting the configuration option <a class="reference internal" href="configoptions.html#config-VSI_CACHE_SIZE"><code class="docutils literal notranslate"><span class="pre">VSI_CACHE_SIZE</span></code></a> (in bytes).</p>
<p><a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a> will return the size in st_size member and file nature- file or directory - in st_mode member (the later only reliable with FTP resources for now).</p>
</section>
<section id="vsis3-aws-s3-files">
<span id="vsis3"></span><h3>/vsis3/ (AWS S3 files)<a class="headerlink" href="#vsis3-aws-s3-files" title="Link to this heading"></a></h3>
<p>/vsis3/ is a file system handler that allows on-the-fly random reading of (primarily non-public) files available in AWS S3 buckets, without prior download of the entire file. It requires GDAL to be built against libcurl.</p>
<p>It also allows sequential writing of files. No seeks or read operations are then allowed, so in particular direct writing of GeoTIFF files with the GTiff driver is not supported, unless, if,
starting with GDAL 3.2, the <a class="reference internal" href="configoptions.html#config-CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE</span></code></a> configuration option is set to <code class="docutils literal notranslate"><span class="pre">YES</span></code>, in which case random-write access is possible (involves the creation of a temporary local file, whose location is controlled by the <a class="reference internal" href="configoptions.html#config-CPL_TMPDIR"><code class="docutils literal notranslate"><span class="pre">CPL_TMPDIR</span></code></a> configuration option).
Deletion of files with <a class="reference internal" href="../api/cpl.html#_CPPv49VSIUnlinkPKc" title="VSIUnlink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIUnlink()</span></code></a> is also supported. Starting with GDAL 2.3, creation of directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> and deletion of (empty) directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> are also possible.</p>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsis3/bucket/key</span></code>, where <code class="docutils literal notranslate"><span class="pre">bucket</span></code> is the name of the S3 bucket and <code class="docutils literal notranslate"><span class="pre">key</span></code> is the S3 object &quot;key&quot;, i.e. a filename potentially containing subdirectories.</p>
<p>The generalities of <a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> apply.</p>
<p>The following configuration options are specific to the /vsis3/ handler:</p>
<ul class="simple">
<li><p id="config-AWS_NO_SIGN_REQUEST"><strong>AWS_NO_SIGN_REQUEST=[YES/NO]: </strong>Determines whether to disable request signing.</p>
</li>
<li><p id="config-AWS_ACCESS_KEY_ID"><strong>AWS_ACCESS_KEY_ID=value: </strong>Access key ID used for authentication. If using temporary credentials,
<a class="reference internal" href="#config-AWS_SESSION_TOKEN"><code class="docutils literal notranslate"><span class="pre">AWS_SESSION_TOKEN</span></code></a> must be set.</p>
</li>
<li><p id="config-AWS_SECRET_ACCESS_KEY"><strong>AWS_SECRET_ACCESS_KEY=value: </strong>Secret access key associated with <a class="reference internal" href="#config-AWS_ACCESS_KEY_ID"><code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code></a>.</p>
</li>
<li><p id="config-AWS_SESSION_TOKEN"><strong>AWS_SESSION_TOKEN=value: </strong>Session token used for validation of temporary credentials
(<a class="reference internal" href="#config-AWS_ACCESS_KEY_ID"><code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code></a> and <a class="reference internal" href="#config-AWS_SECRET_ACCESS_KEY"><code class="docutils literal notranslate"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code></a>)</p>
</li>
<li><p id="config-CPL_AWS_CREDENTIALS_FILE"><strong>CPL_AWS_CREDENTIALS_FILE=&lt;filename&gt;: </strong>Location of an AWS credentials file. If not specified, the standard
location of <code class="docutils literal notranslate"><span class="pre">~/.aws/credentials</span></code> will be checked.</p>
</li>
<li><p id="config-AWS_DEFAULT_PROFILE"><strong>AWS_DEFAULT_PROFILE=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">default</span></code>. Name of AWS profile.</p>
</li>
<li><p id="config-AWS_PROFILE"><strong>AWS_PROFILE=value: </strong> (GDAL &gt;= 3.2)  Defaults to <code class="docutils literal notranslate"><span class="pre">default</span></code>. Name of AWS profile.</p>
</li>
<li><p id="config-AWS_CONFIG_FILE"><strong>AWS_CONFIG_FILE=value: </strong>Location of a config file that may provide credentials and the AWS
region. if not specified the standard location of <code class="docutils literal notranslate"><span class="pre">~/.aws/credentials</span></code>
will be checked.</p>
</li>
<li><p id="config-AWS_ROLE_ARN"><strong>AWS_ROLE_ARN=value: </strong> (GDAL &gt;= 3.6) Amazon Resource Name (ARN) specifying the role to use for authentication
via the <a class="reference external" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html">AssumeRoleWithWebIdentity API</a>.</p>
</li>
<li><p id="config-AWS_WEB_IDENTITY_TOKEN_FILE"><strong>AWS_WEB_IDENTITY_TOKEN_FILE=&lt;filename&gt;: </strong> (GDAL &gt;= 3.6) <p>Duplicate explicit target name: &quot;assumerolewithwebidentity api&quot;.</p>
<p>Path to file with identity token for use for authentication
via the <a class="reference external" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html">AssumeRoleWithWebIdentity API</a>.</p>
</p>
</li>
<li><p id="config-AWS_REGION"><strong>AWS_REGION=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">us-east-1</span></code>. Set the AWS region to which requests should be sent. Overridden
by <a class="reference internal" href="#config-AWS_DEFAULT_REGION"><code class="docutils literal notranslate"><span class="pre">AWS_DEFAULT_REGION</span></code></a>.</p>
</li>
<li><p id="config-AWS_DEFAULT_REGION"><strong>AWS_DEFAULT_REGION=value: </strong>Set the AWS region to which requests should be sent.</p>
</li>
<li><p id="config-AWS_REQUEST_PAYER"><strong>AWS_REQUEST_PAYER=requester: </strong>Set to <code class="docutils literal notranslate"><span class="pre">requester</span></code> to access a Requester Pays bucket and acknowledge
associated charges.</p>
</li>
<li><p id="config-AWS_S3_ENDPOINT"><strong>AWS_S3_ENDPOINT=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">s3.amazonaws.com</span></code>. Allows the use of /vsis3/ with non-AWS remote object stores that use the
AWS S3 protocol.</p>
</li>
<li><p id="config-AWS_HTTPS"><strong>AWS_HTTPS=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">YES</span></code>. If <code class="docutils literal notranslate"><span class="pre">YES</span></code>, AWS resources will be accessed using HTTPS. If <code class="docutils literal notranslate"><span class="pre">NO</span></code>, HTTP
will be used.</p>
</li>
<li><p id="config-AWS_VIRTUAL_HOSTING"><strong>AWS_VIRTUAL_HOSTING=[TRUE/FALSE]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>. Select the method of accessing a bucket.
If <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, identifies the bucket via a virtual bucket host name, e.g.: mybucket.cname.domain.com.
If <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>, identifies the bucket as the top-level directory in the URI, e.g.: cname.domain.com/mybucket</p>
</li>
<li><p id="config-VSIS3_CHUNK_SIZE"><strong>VSIS3_CHUNK_SIZE=&lt;MB&gt;: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">50</span></code>. Set the chunk size for multipart uploads.</p>
</li>
<li><p id="config-CPL_VSIL_CURL_IGNORE_GLACIER_STORAGE"><strong>CPL_VSIL_CURL_IGNORE_GLACIER_STORAGE=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">YES</span></code>. When listing a directory, ignore files with <code class="docutils literal notranslate"><span class="pre">GLACIER</span></code> storage class.
Superseded by <a class="reference internal" href="#config-CPL_VSIL_CURL_IGNORE_STORAGE_CLASSES"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_CURL_IGNORE_STORAGE_CLASSES</span></code></a>.</p>
</li>
<li><p id="config-CPL_VSIL_CURL_IGNORE_STORAGE_CLASSES"><strong>CPL_VSIL_CURL_IGNORE_STORAGE_CLASSES=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">GLACIER\,DEEP_ARCHIVE</span></code>. Comma-separated list of storage class names that should be ignored when
listing a directory. If set to empty, objects of all storage classes are
retrieved).</p>
</li>
<li><p id="config-CPL_VSIS3_USE_BASE_RMDIR_RECURSIVE"><strong>CPL_VSIS3_USE_BASE_RMDIR_RECURSIVE=[YES/NO]: </strong> (GDAL &gt;= 3.2)  Defaults to <code class="docutils literal notranslate"><span class="pre">NO</span></code>. If <code class="docutils literal notranslate"><span class="pre">YES</span></code>, recursively delete objects to avoid using batch deletion.</p>
</li>
<li><p id="config-CPL_VSIS3_CREATE_DIR_OBJECT"><strong>CPL_VSIS3_CREATE_DIR_OBJECT=[YES/NO]: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">YES</span></code>. Determines whether to allow <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> to create an empty object to model an empty directory.</p>
</li>
</ul>
<p>Several authentication methods are possible, and are attempted in the following order:</p>
<ol class="arabic simple">
<li><p>If <a class="reference internal" href="#config-AWS_NO_SIGN_REQUEST"><code class="docutils literal notranslate"><span class="pre">AWS_NO_SIGN_REQUEST=YES</span></code></a> configuration option is set, request signing is disabled. This option might be used for buckets with public access rights. Available since GDAL 2.3</p></li>
<li><p>The <a class="reference internal" href="#config-AWS_SECRET_ACCESS_KEY"><code class="docutils literal notranslate"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code></a> and <a class="reference internal" href="#config-AWS_ACCESS_KEY_ID"><code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code></a> configuration options can be set. The <a class="reference internal" href="#config-AWS_SESSION_TOKEN"><code class="docutils literal notranslate"><span class="pre">AWS_SESSION_TOKEN</span></code></a> configuration option must be set when temporary credentials are used.</p></li>
<li><p>Starting with GDAL 2.3, alternate ways of providing credentials similar to what the &quot;aws&quot; command line utility or Boto3 support can be used. If the above mentioned environment variables are not provided, the <code class="docutils literal notranslate"><span class="pre">~/.aws/credentials</span></code> or <code class="docutils literal notranslate"><span class="pre">%UserProfile%/.aws/credentials</span></code> file will be read (or the file pointed by <a class="reference internal" href="#config-CPL_AWS_CREDENTIALS_FILE"><code class="docutils literal notranslate"><span class="pre">CPL_AWS_CREDENTIALS_FILE</span></code></a>). The profile may be specified with the <a class="reference internal" href="#config-AWS_DEFAULT_PROFILE"><code class="docutils literal notranslate"><span class="pre">AWS_DEFAULT_PROFILE</span></code></a> environment variable, or starting with GDAL 3.2 with the <a class="reference internal" href="#config-AWS_PROFILE"><code class="docutils literal notranslate"><span class="pre">AWS_PROFILE</span></code></a> environment variable (the default profile is &quot;default&quot;).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">~/.aws/config</span></code> or <code class="docutils literal notranslate"><span class="pre">%UserProfile%/.aws/config</span></code> file may also be used (or the file pointer by <a class="reference internal" href="#config-AWS_CONFIG_FILE"><code class="docutils literal notranslate"><span class="pre">AWS_CONFIG_FILE</span></code></a>) to retrieve credentials and the AWS region.</p></li>
<li><p>Starting with GDAL 3.6, if <a class="reference internal" href="#config-AWS_ROLE_ARN"><code class="docutils literal notranslate"><span class="pre">AWS_ROLE_ARN</span></code></a> and <a class="reference internal" href="#config-AWS_WEB_IDENTITY_TOKEN_FILE"><code class="docutils literal notranslate"><span class="pre">AWS_WEB_IDENTITY_TOKEN_FILE</span></code></a> are defined we will rely on credentials mechanism for web identity token based AWS STS action AssumeRoleWithWebIdentity (See.: <a class="reference external" href="https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html">https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html</a>)</p></li>
<li><p>If none of the above method succeeds, instance profile credentials will be retrieved when GDAL is used on EC2 instances (cf <a class="reference internal" href="#vsis3-imds"><span class="std std-ref">/vsis3/ and AWS Instance Metadata Service (IMDS)</span></a>)</p></li>
</ol>
<p>On writing, the file is uploaded using the S3 multipart upload API. The size of chunks is set to 50 MB by default, allowing creating files up to 500 GB (10000 parts of 50 MB each). If larger files are needed, then increase the value of the <a class="reference internal" href="#config-VSIS3_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">VSIS3_CHUNK_SIZE</span></code></a> config option to a larger value (expressed in MB). In case the process is killed and the file not properly closed, the multipart upload will remain open, causing Amazon to charge you for the parts storage. You'll have to abort yourself with other means such &quot;ghost&quot; uploads (e.g. with the s3cmd utility) For files smaller than the chunk size, a simple PUT request is used instead of the multipart upload API.</p>
<p>Since GDAL 3.1, the <a class="reference internal" href="../api/cpl.html#_CPPv49VSIRenamePKcPKc" title="VSIRename"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRename()</span></code></a> operation is supported (first doing a copy of the original file and then deleting it)</p>
<p>Since GDAL 3.1, the <a class="reference internal" href="../api/cpl.html#_CPPv417VSIRmdirRecursivePKc" title="VSIRmdirRecursive"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdirRecursive()</span></code></a> operation is supported (using batch deletion method). The <a class="reference internal" href="#config-CPL_VSIS3_USE_BASE_RMDIR_RECURSIVE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIS3_USE_BASE_RMDIR_RECURSIVE</span></code></a> configuration option can be set to YES if using a S3-like API that doesn't support batch deletion (GDAL &gt;= 3.2). Starting with GDAL 3.6, this can be set as a path-specific option in the <a class="reference internal" href="configoptions.html#gdal-configuration-file"><span class="std std-ref">GDAL configuration file</span></a></p>
<p>The <a class="reference internal" href="#config-CPL_VSIS3_CREATE_DIR_OBJECT"><code class="docutils literal notranslate"><span class="pre">CPL_VSIS3_CREATE_DIR_OBJECT</span></code></a> configuration option can be set to NO to prevent the <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> operation from creating an empty object with the name of the directory terminated with a slash directory. By default GDAL creates such object, so that empty directories can be modeled, but this may cause compatibility problems with applications that do not expect such empty objects.</p>
<p>Starting with GDAL 3.5, profiles that use IAM role assumption (see <a class="reference external" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-role.html">https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-role.html</a>) are handled. The <code class="docutils literal notranslate"><span class="pre">role_arn</span></code> and <code class="docutils literal notranslate"><span class="pre">source_profile</span></code> keywords are required in such profiles. The optional <code class="docutils literal notranslate"><span class="pre">external_id</span></code>, <code class="docutils literal notranslate"><span class="pre">mfa_serial</span></code> and <code class="docutils literal notranslate"><span class="pre">role_session_name</span></code> can be specified. <code class="docutils literal notranslate"><span class="pre">credential_source</span></code> is not supported currently.</p>
</section>
<section id="vsis3-and-aws-instance-metadata-service-imds">
<span id="vsis3-imds"></span><h3>/vsis3/ and AWS Instance Metadata Service (IMDS)<a class="headerlink" href="#vsis3-and-aws-instance-metadata-service-imds" title="Link to this heading"></a></h3>
<p>On EC2 instances, GDAL will try to use the <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/configuring-instance-metadata-service.html">IMDSv2</a> protocol in priority to get the authentication tokens for AWS S3, and fallback to IMDSv1 in case of failure. Note however that on recent Amazon Linux instances, IMDSv1 is no longer accessible, and thus IMDSv2 must be correctly configured (and even if IMDSv1 is available, mis-configured IMDSv2 will cause delays in the authentication step).</p>
<p>There are known issues when running inside a Docker instance in a EC2 instance that require extra configuration of the instance. For example, you need to <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/instancedata-data-retrieval.html#imds-considerations">increase the hop limit to 2</a></p>
<p>There are several ways to do this. One way is to run this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">aws</span> <span class="n">ec2</span> <span class="n">modify</span><span class="o">-</span><span class="n">instance</span><span class="o">-</span><span class="n">metadata</span><span class="o">-</span><span class="n">options</span> \
    <span class="o">--</span><span class="n">instance</span><span class="o">-</span><span class="nb">id</span> <span class="o">&lt;</span><span class="n">instance_id</span><span class="o">&gt;</span> \
    <span class="o">--</span><span class="n">http</span><span class="o">-</span><span class="n">put</span><span class="o">-</span><span class="n">response</span><span class="o">-</span><span class="n">hop</span><span class="o">-</span><span class="n">limit</span> <span class="mi">2</span> \
    <span class="o">--</span><span class="n">http</span><span class="o">-</span><span class="n">endpoint</span> <span class="n">enabled</span>
</pre></div>
</div>
<p>Another is to set the HttpPutResponseHopLimit metadata on an AutoScalingGroup LaunchTemplate:
- <a class="reference external" href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_InstanceMetadataOptionsRequest.html">https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_InstanceMetadataOptionsRequest.html</a>
- <a class="reference external" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-launchtemplate-metadataoptions.html">https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-launchtemplate-metadataoptions.html</a></p>
<p>Another possibility is to start the Docker container with host networking (<code class="docutils literal notranslate"><span class="pre">--network=host</span></code>), although this breaks isolation of containers by exposing all ports of the host to the container and has thus <a class="reference external" href="https://stackoverflow.com/a/57051970/40785">security implications</a>.</p>
</section>
<section id="configuring-vsis3-with-minio">
<h3>Configuring /vsis3/ with Minio<a class="headerlink" href="#configuring-vsis3-with-minio" title="Link to this heading"></a></h3>
<p>The following configuration options can be set to access a
<a class="reference external" href="https://min.io/docs/minio/container/index.html">Minio Docker image</a></p>
<ul class="simple">
<li><p>AWS_VIRTUAL_HOSTING=FALSE</p></li>
<li><p>AWS_HTTPS=NO</p></li>
<li><p>AWS_S3_ENDPOINT=&quot;localhost:9000&quot;</p></li>
<li><p>AWS_REGION=&quot;us-east-1&quot;</p></li>
<li><p>AWS_SECRET_ACCESS_KEY=&quot;your_secret_access_key&quot;</p></li>
<li><p>AWS_ACCESS_KEY_ID=&quot;your_access_key&quot;</p></li>
</ul>
</section>
<section id="vsis3-streaming-aws-s3-files-streaming">
<span id="vsis3-streaming"></span><h3>/vsis3_streaming/ (AWS S3 files: streaming)<a class="headerlink" href="#vsis3-streaming-aws-s3-files-streaming" title="Link to this heading"></a></h3>
<p>/vsis3_streaming/ is a file system handler that allows on-the-fly sequential reading of (primarily non-public) files available in AWS S3 buckets, without prior download of the entire file. It requires GDAL to be built against libcurl.</p>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsis3_streaming/bucket/key</span></code> where <code class="docutils literal notranslate"><span class="pre">bucket</span></code> is the name of the S3 bucket and <code class="docutils literal notranslate"><span class="pre">key</span></code> is the S3 object &quot;key&quot;, i.e. a filename potentially containing subdirectories.</p>
<p>Authentication options, and read-only features, are identical to <a class="reference internal" href="#vsis3"><span class="std std-ref">/vsis3/</span></a></p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.1.</span></p>
</div>
</section>
<section id="vsigs-google-cloud-storage-files">
<span id="vsigs"></span><h3>/vsigs/ (Google Cloud Storage files)<a class="headerlink" href="#vsigs-google-cloud-storage-files" title="Link to this heading"></a></h3>
<p>/vsigs/ is a file system handler that allows on-the-fly random reading of (primarily non-public) files available in Google Cloud Storage buckets, without prior download of the entire file. It requires GDAL to be built against libcurl.</p>
<p>Starting with GDAL 2.3, it also allows sequential writing of files. No seeks or read operations are then allowed, so in particular direct writing of GeoTIFF files with the GTiff driver is not supported, unless, if, starting with GDAL 3.2, the <a class="reference internal" href="configoptions.html#config-CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE</span></code></a> configuration option is set to <code class="docutils literal notranslate"><span class="pre">YES</span></code>, in which case random-write access is possible (involves the creation of a temporary local file, whose location is controlled by the <a class="reference internal" href="configoptions.html#config-CPL_TMPDIR"><code class="docutils literal notranslate"><span class="pre">CPL_TMPDIR</span></code></a> configuration option).
Deletion of files with <a class="reference internal" href="../api/cpl.html#_CPPv49VSIUnlinkPKc" title="VSIUnlink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIUnlink()</span></code></a>, creation of directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> and deletion of (empty) directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> are also possible.</p>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsigs/bucket/key</span></code> where <code class="docutils literal notranslate"><span class="pre">bucket</span></code> is the name of the bucket and <code class="docutils literal notranslate"><span class="pre">key</span></code> is the object &quot;key&quot;, i.e. a filename potentially containing subdirectories.</p>
<p>The generalities of <a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> apply.</p>
<p>The following configuration options are specific to the /vsigs/ handler:</p>
<ul class="simple">
<li><p id="config-GS_NO_SIGN_REQUEST"><strong>GS_NO_SIGN_REQUEST=[YES/NO]: </strong> (GDAL &gt;= 3.4) If <code class="docutils literal notranslate"><span class="pre">YES</span></code>, request signing is disabled.</p>
</li>
<li><p id="config-GS_SECRET_ACCESS_KEY"><strong>GS_SECRET_ACCESS_KEY=value: </strong>Secret for AWS-style authentication (HMAC keys).</p>
</li>
<li><p id="config-GS_ACCESS_KEY_ID"><strong>GS_ACCESS_KEY_ID=value: </strong>Access ID for AWS-style authentication (HMAC keys).</p>
</li>
<li><p id="config-GS_OAUTH2_REFRESH_TOKEN"><strong>GS_OAUTH2_REFRESH_TOKEN=value: </strong>OAuth2 refresh token. This refresh token can be obtained with the
<a class="reference external" href="https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/samples/gdal_auth.py">gdal_auth.py</a>
script (<code class="docutils literal notranslate"><span class="pre">gdal_auth.py</span> <span class="pre">-s</span> <span class="pre">storage</span></code> or <code class="docutils literal notranslate"><span class="pre">gdal_auth.py</span> <span class="pre">-s</span> <span class="pre">storage-rw</span></code>).</p>
</li>
<li><p id="config-GS_OAUTH2_CLIENT_ID"><strong>GS_OAUTH2_CLIENT_ID=value: </strong>Client ID to be used when requesting <a class="reference internal" href="#config-GS_OAUTH2_REFRESH_TOKEN"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_REFRESH_TOKEN</span></code></a>.</p>
</li>
<li><p id="config-GS_OAUTH2_CLIENT_SECRET"><strong>GS_OAUTH2_CLIENT_SECRET=value: </strong>Client secret to be used when requesting <a class="reference internal" href="#config-GS_OAUTH2_REFRESH_TOKEN"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_REFRESH_TOKEN</span></code></a>.</p>
</li>
<li></li>
<li><p id="config-GS_OAUTH2_PRIVATE_KEY"><strong>GS_OAUTH2_PRIVATE_KEY=value: </strong>Private key for OAuth2 authentication. Alternatively, the key may be
saved in a file and referenced with <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY_FILE"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY_FILE</span></code></a>.</p>
</li>
<li><p id="config-GS_OAUTH2_PRIVATE_KEY_FILE"><strong>GS_OAUTH2_PRIVATE_KEY_FILE=&lt;filename&gt;: </strong>Location of private key file for OAuth2 authentication.</p>
</li>
<li><p id="config-GS_OAUTH2_CLIENT_EMAIL"><strong>GS_OAUTH2_CLIENT_EMAIL=value: </strong>Client email for OAuth2 authentication, to be used with <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY</span></code></a>
or <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY_FILE"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY_FILE</span></code></a>.</p>
</li>
<li><p id="config-GS_OAUTH2_SCOPE"><strong>GS_OAUTH2_SCOPE=value: </strong>Permission scope associated with OAuth2 authentication using <a class="reference internal" href="../drivers/raster/eedai.html#config-GOOGLE_APPLICATION_CREDENTIALS"><code class="docutils literal notranslate"><span class="pre">GOOGLE_APPLICATION_CREDENTIALS</span></code></a>.</p>
</li>
<li><p id="config-CPL_GS_CREDENTIALS_FILE"><strong>CPL_GS_CREDENTIALS_FILE=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">~/.boto</span></code>. Location of configuration file providing <code class="docutils literal notranslate"><span class="pre">gs_secret_access_key</span></code> and
<code class="docutils literal notranslate"><span class="pre">gs_access_key_id</span></code>.</p>
</li>
<li><p id="config-GS_USER_PROJECT"><strong>GS_USER_PROJECT=value: </strong> (GDAL &gt;= 3.4) Google Project id (see
<a class="reference external" href="https://cloud.google.com/storage/docs/xml-api/reference-headers#xgooguserproject">https://cloud.google.com/storage/docs/xml-api/reference-headers#xgooguserproject</a>)
to charge for requests against Requester Pays buckets.</p>
</li>
</ul>
<p>Several authentication methods are possible, and are attempted in the following order:</p>
<ol class="arabic simple">
<li><p>If <a class="reference internal" href="#config-GS_NO_SIGN_REQUEST"><code class="docutils literal notranslate"><span class="pre">GS_NO_SIGN_REQUEST=YES</span></code></a> configuration option is set, request signing is disabled. This option might be used for buckets with public access rights. Available since GDAL 3.4</p></li>
<li><p>The <a class="reference internal" href="#config-GS_SECRET_ACCESS_KEY"><code class="docutils literal notranslate"><span class="pre">GS_SECRET_ACCESS_KEY</span></code></a> and <a class="reference internal" href="#config-GS_ACCESS_KEY_ID"><code class="docutils literal notranslate"><span class="pre">GS_ACCESS_KEY_ID</span></code></a> configuration options can be set for AWS-style authentication</p></li>
<li><p>The <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_HEADER_FILE"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_HEADER_FILE</span></code></a> configuration option to point to a filename of a text file with &quot;key: value&quot; headers. Typically, it must contain a &quot;Authorization: Bearer XXXXXXXXX&quot; line.</p></li>
<li><p>(GDAL &gt;= 3.7) The <a class="reference internal" href="configoptions.html#config-GDAL_HTTP_HEADERS"><code class="docutils literal notranslate"><span class="pre">GDAL_HTTP_HEADERS</span></code></a> configuration option can also be set. It must contain at least a line starting with &quot;Authorization:&quot; to be used as an authentication method.</p></li>
<li><p>(GDAL &gt;= 2.3) The <a class="reference internal" href="#config-GS_OAUTH2_REFRESH_TOKEN"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_REFRESH_TOKEN</span></code></a> configuration option can be set to use OAuth2 client authentication. See <a class="reference external" href="http://code.google.com/apis/accounts/docs/OAuth2.html">http://code.google.com/apis/accounts/docs/OAuth2.html</a> This refresh token can be obtained with the <code class="docutils literal notranslate"><span class="pre">gdal_auth.py</span> <span class="pre">-s</span> <span class="pre">storage</span></code> or <code class="docutils literal notranslate"><span class="pre">gdal_auth.py</span> <span class="pre">-s</span> <span class="pre">storage-rw</span></code> script Note: instead of using the default GDAL application credentials, you may define the <a class="reference internal" href="#config-GS_OAUTH2_CLIENT_ID"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_CLIENT_ID</span></code></a> and <a class="reference internal" href="#config-GS_OAUTH2_CLIENT_SECRET"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_CLIENT_SECRET</span></code></a> configuration options (need to be defined both for gdal_auth.py and later execution of /vsigs)</p></li>
<li><p>(GDAL &gt;= 2.3) The <a class="reference internal" href="../drivers/raster/eedai.html#config-GOOGLE_APPLICATION_CREDENTIALS"><code class="docutils literal notranslate"><span class="pre">GOOGLE_APPLICATION_CREDENTIALS</span></code></a> configuration option can be set to point to a JSON file containing OAuth2 service account credentials (<code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">service_account</span></code>), in particular a private key and a client email. See <a class="reference external" href="https://developers.google.com/identity/protocols/OAuth2ServiceAccount">https://developers.google.com/identity/protocols/OAuth2ServiceAccount</a> for more details on this authentication method. The bucket must grant the &quot;Storage Legacy Bucket Owner&quot; or &quot;Storage Legacy Bucket Reader&quot; permissions to the service account. The <a class="reference internal" href="#config-GS_OAUTH2_SCOPE"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_SCOPE</span></code></a> configuration option can be set to change the default permission scope from &quot;<a class="reference external" href="https://www.googleapis.com/auth/devstorage.read_write">https://www.googleapis.com/auth/devstorage.read_write</a>&quot; to &quot;<a class="reference external" href="https://www.googleapis.com/auth/devstorage.read_only">https://www.googleapis.com/auth/devstorage.read_only</a>&quot; if needed.</p></li>
<li><p>(GDAL &gt;= 3.4.2) The <a class="reference internal" href="../drivers/raster/eedai.html#config-GOOGLE_APPLICATION_CREDENTIALS"><code class="docutils literal notranslate"><span class="pre">GOOGLE_APPLICATION_CREDENTIALS</span></code></a> configuration option can be set to point to a JSON file containing OAuth2 user credentials (<code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">authorized_user</span></code>).</p></li>
<li><p>(GDAL &gt;= 2.3) Variant of the previous method. The <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY</span></code></a> (or <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY_FILE"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY_FILE</span></code></a> and <a class="reference internal" href="#config-GS_OAUTH2_CLIENT_EMAIL"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_CLIENT_EMAIL</span></code></a> can be set to use OAuth2 service account authentication. See <a class="reference external" href="https://developers.google.com/identity/protocols/OAuth2ServiceAccount">https://developers.google.com/identity/protocols/OAuth2ServiceAccount</a> for more details on this authentication method. The <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY</span></code></a> configuration option must contain the private key as a inline string, starting with <code class="docutils literal notranslate"><span class="pre">-----BEGIN</span> <span class="pre">PRIVATE</span> <span class="pre">KEY-----</span></code>. Alternatively the <a class="reference internal" href="#config-GS_OAUTH2_PRIVATE_KEY_FILE"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_PRIVATE_KEY_FILE</span></code></a> configuration option can be set to indicate a filename that contains such a private key. The bucket must grant the &quot;Storage Legacy Bucket Owner&quot; or &quot;Storage Legacy Bucket Reader&quot; permissions to the service account. The <a class="reference internal" href="#config-GS_OAUTH2_SCOPE"><code class="docutils literal notranslate"><span class="pre">GS_OAUTH2_SCOPE</span></code></a> configuration option can be set to change the default permission scope from &quot;<a class="reference external" href="https://www.googleapis.com/auth/devstorage.read_write">https://www.googleapis.com/auth/devstorage.read_write</a>&quot; to &quot;<a class="reference external" href="https://www.googleapis.com/auth/devstorage.read_only">https://www.googleapis.com/auth/devstorage.read_only</a>&quot; if needed.</p></li>
<li><p>(GDAL &gt;= 2.3) An alternate way of providing credentials similar to what the &quot;gsutil&quot; command line utility or Boto3 support can be used. If the above mentioned environment variables are not provided, the <code class="file docutils literal notranslate"><span class="pre">~/.boto</span></code> or <code class="file docutils literal notranslate"><span class="pre">UserProfile%/.boto</span></code> file will be read (or the file pointed by <a class="reference internal" href="#config-CPL_GS_CREDENTIALS_FILE"><code class="docutils literal notranslate"><span class="pre">CPL_GS_CREDENTIALS_FILE</span></code></a>) for the gs_secret_access_key and gs_access_key_id entries for AWS style authentication. If not found, it will look for the gs_oauth2_refresh_token (and optionally client_id and client_secret) entry for OAuth2 client authentication.</p></li>
<li><p>(GDAL &gt;= 2.3) Finally if none of the above method succeeds, the code will check if the current machine is a Google Compute Engine instance, and if so will use the permissions associated to it (using the default service account associated with the VM). To force a machine to be detected as a GCE instance (for example for code running in a container with no access to the boot logs), you can set <a class="reference internal" href="../drivers/raster/eedai.html#config-CPL_MACHINE_IS_GCE"><code class="docutils literal notranslate"><span class="pre">CPL_MACHINE_IS_GCE</span></code></a> to <code class="docutils literal notranslate"><span class="pre">YES</span></code>.</p></li>
</ol>
<p>Since GDAL 3.1, the Rename() operation is supported (first doing a copy of the original file and then deleting it).</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.2.</span></p>
</div>
</section>
<section id="vsigs-streaming-google-cloud-storage-files-streaming">
<span id="vsigs-streaming"></span><h3>/vsigs_streaming/ (Google Cloud Storage files: streaming)<a class="headerlink" href="#vsigs-streaming-google-cloud-storage-files-streaming" title="Link to this heading"></a></h3>
<p>/vsigs_streaming/ is a file system handler that allows on-the-fly sequential reading of files (primarily non-public) files available in Google Cloud Storage buckets, without prior download of the entire file. It requires GDAL to be built against libcurl.</p>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsigs_streaming/bucket/key</span></code> where <code class="docutils literal notranslate"><span class="pre">bucket</span></code> is the name of the bucket and <code class="docutils literal notranslate"><span class="pre">key</span></code> is the object &quot;key&quot;, i.e. a filename potentially containing subdirectories.</p>
<p>Authentication options, and read-only features, are identical to <a class="reference internal" href="#vsigs"><span class="std std-ref">/vsigs/</span></a></p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.2.</span></p>
</div>
</section>
<section id="vsiaz-microsoft-azure-blob-files">
<span id="vsiaz"></span><h3>/vsiaz/ (Microsoft Azure Blob files)<a class="headerlink" href="#vsiaz-microsoft-azure-blob-files" title="Link to this heading"></a></h3>
<p>/vsiaz/ is a file system handler that allows on-the-fly random reading of (primarily non-public) files available in Microsoft Azure Blob containers, without prior download of the entire file. It requires GDAL to be built against libcurl.</p>
<p>See <a class="reference internal" href="#vsiadls"><span class="std std-ref">/vsiadls/</span></a> for a related filesystem for Azure Data Lake Storage Gen2.</p>
<p>It also allows sequential writing of files. No seeks or read operations are then allowed, so in particular direct writing of GeoTIFF files with the GTiff driver is not supported, unless, if, starting with GDAL 3.2, the <a class="reference internal" href="configoptions.html#config-CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE</span></code></a> configuration option is set to <code class="docutils literal notranslate"><span class="pre">YES</span></code>, in which case random-write access is possible (involves the creation of a temporary local file, whose location is controlled by the <a class="reference internal" href="configoptions.html#config-CPL_TMPDIR"><code class="docutils literal notranslate"><span class="pre">CPL_TMPDIR</span></code></a> configuration option).
A block blob will be created if the file size is below 4 MB. Beyond, an append blob will be created (with a maximum file size of 195 GB).</p>
<p>Deletion of files with <a class="reference internal" href="../api/cpl.html#_CPPv49VSIUnlinkPKc" title="VSIUnlink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIUnlink()</span></code></a>, creation of directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> and deletion of (empty) directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> are also possible. Note: when using <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a>, a special hidden <code class="file docutils literal notranslate"><span class="pre">.gdal_marker_for_dir</span></code> empty file is created, since Azure Blob does not natively support empty directories. If that file is the last one remaining in a directory, <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> will automatically remove it. This file will not be seen with <a class="reference internal" href="../api/cpl.html#_CPPv410VSIReadDirPKc" title="VSIReadDir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIReadDir()</span></code></a>. If removing files from directories not created with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a>, when the last file is deleted, its directory is automatically removed by Azure, so the sequence <code class="docutils literal notranslate"><span class="pre">VSIUnlink(&quot;/vsiaz/container/subdir/lastfile&quot;)</span></code> followed by <code class="docutils literal notranslate"><span class="pre">VSIRmdir(&quot;/vsiaz/container/subdir&quot;)</span></code> will fail on the <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> invocation.</p>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsiaz/container/key</span></code>, where <code class="docutils literal notranslate"><span class="pre">container</span></code> is the name of the container and <code class="docutils literal notranslate"><span class="pre">key</span></code> is the object &quot;key&quot;, i.e. a filename potentially containing subdirectories.</p>
<p>The generalities of <a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> apply.</p>
<p>The following configuration options are specific to the /vsiaz/ handler:</p>
<ul class="simple">
<li><p id="config-AZURE_NO_SIGN_REQUEST"><strong>AZURE_NO_SIGN_REQUEST=[YES/NO]: </strong> (GDAL &gt;= 3.2) Controls whether requests are signed.</p>
</li>
<li><p id="config-AZURE_STORAGE_CONNECTION_STRING"><strong>AZURE_STORAGE_CONNECTION_STRING=value: </strong>Credential string provided in the Access Key section of the administrative interface,
containing both the account name and a secret key.</p>
</li>
<li><p id="config-AZURE_STORAGE_ACCESS_TOKEN"><strong>AZURE_STORAGE_ACCESS_TOKEN=value: </strong> (GDAL &gt;= 3.5) Access token typically obtained using Microsoft Authentication Library (MSAL).</p>
</li>
<li><p id="config-AZURE_STORAGE_ACCOUNT"><strong>AZURE_STORAGE_ACCOUNT=value: </strong>Specifies storage account name.</p>
</li>
<li><p id="config-AZURE_STORAGE_ACCESS_KEY"><strong>AZURE_STORAGE_ACCESS_KEY=value: </strong>Specifies secret key associated with <a class="reference internal" href="#config-AZURE_STORAGE_ACCOUNT"><code class="docutils literal notranslate"><span class="pre">AZURE_STORAGE_ACCOUNT</span></code></a>.</p>
</li>
<li><p id="config-AZURE_STORAGE_SAS_TOKEN"><strong>AZURE_STORAGE_SAS_TOKEN=value: </strong> (GDAL &gt;= 3.2) Shared Access Signature.</p>
</li>
<li><p id="config-AZURE_IMDS_OBJECT_ID"><strong>AZURE_IMDS_OBJECT_ID=value: </strong> (GDAL &gt;= 3.8) object_id of the managed identity you would like the token for, when using
Azure Instance Metadata Service (IMDS) authentication in a Azure
Virtual Matchine. Required if your VM has multiple user-assigned managed identities.
This option may be set as a path-specific option with <a class="reference internal" href="../api/cpl.html#_CPPv424VSISetPathSpecificOptionPKcPKcPKc" title="VSISetPathSpecificOption"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetPathSpecificOption()</span></code></a></p>
</li>
<li><p id="config-AZURE_IMDS_CLIENT_ID"><strong>AZURE_IMDS_CLIENT_ID=value: </strong> (GDAL &gt;= 3.8) client_id of the managed identity you would like the token for, when using
Azure Instance Metadata Service (IMDS) authentication in a Azure
Virtual Matchine. Required if your VM has multiple user-assigned managed identities.
This option may be set as a path-specific option with <a class="reference internal" href="../api/cpl.html#_CPPv424VSISetPathSpecificOptionPKcPKcPKc" title="VSISetPathSpecificOption"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetPathSpecificOption()</span></code></a></p>
</li>
<li><p id="config-AZURE_IMDS_MSI_RES_ID"><strong>AZURE_IMDS_MSI_RES_ID=value: </strong> (GDAL &gt;= 3.8) msi_res_id (Azure Resource ID) of the managed identity you would like the token for, when using
Azure Instance Metadata Service (IMDS) authentication in a Azure
Virtual Matchine. Required if your VM has multiple user-assigned managed identities.
This option may be set as a path-specific option with <a class="reference internal" href="../api/cpl.html#_CPPv424VSISetPathSpecificOptionPKcPKcPKc" title="VSISetPathSpecificOption"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetPathSpecificOption()</span></code></a></p>
</li>
</ul>
<p>Several authentication methods are possible, and are attempted in the following order:</p>
<ol class="arabic">
<li><p>The <a class="reference internal" href="#config-AZURE_STORAGE_CONNECTION_STRING"><code class="docutils literal notranslate"><span class="pre">AZURE_STORAGE_CONNECTION_STRING</span></code></a> configuration option</p></li>
<li><p>The <a class="reference internal" href="#config-AZURE_STORAGE_ACCOUNT"><code class="docutils literal notranslate"><span class="pre">AZURE_STORAGE_ACCOUNT</span></code></a> configuration option is set to specify the account name AND</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>(GDAL &gt;= 3.5) The <a class="reference internal" href="#config-AZURE_STORAGE_ACCESS_TOKEN"><code class="docutils literal notranslate"><span class="pre">AZURE_STORAGE_ACCESS_TOKEN</span></code></a> configuration option is set to specify the access token, that will be included in a &quot;Authorization: Bearer ${AZURE_STORAGE_ACCESS_TOKEN}&quot; header. This access token is typically obtained using Microsoft Authentication Library (MSAL).</p></li>
<li><p>The <a class="reference internal" href="#config-AZURE_STORAGE_ACCESS_KEY"><code class="docutils literal notranslate"><span class="pre">AZURE_STORAGE_ACCESS_KEY</span></code></a> configuration option is set to specify the secret key.</p></li>
<li><p>The <a class="reference internal" href="#config-AZURE_NO_SIGN_REQUEST"><code class="docutils literal notranslate"><span class="pre">AZURE_NO_SIGN_REQUEST=YES</span></code></a> configuration option is set, so as to disable any request signing. This option might be used for accounts with public access rights. Available since GDAL 3.2</p></li>
<li><p>The <a class="reference internal" href="#config-AZURE_STORAGE_SAS_TOKEN"><code class="docutils literal notranslate"><span class="pre">AZURE_STORAGE_SAS_TOKEN</span></code></a> configuration option (<code class="docutils literal notranslate"><span class="pre">AZURE_SAS</span></code> if GDAL &lt; 3.5) is set to specify a Shared Access Signature. This SAS is appended to URLs built by the /vsiaz/ file system handler. Its value should already be URL-encoded and should not contain any leading '?' or '&amp;' character (e.g. a valid one may look like &quot;st=2019-07-18T03%3A53%3A22Z&amp;se=2035-07-19T03%3A53%3A00Z&amp;sp=rl&amp;sv=2018-03-28&amp;sr=c&amp;sig=2RIXmLbLbiagYnUd49rgx2kOXKyILrJOgafmkODhRAQ%3D&quot;). Available since GDAL 3.2</p></li>
<li><p>The current machine is a Azure Virtual Machine with Azure Active Directory permissions assigned to it (see <a class="reference external" href="https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/qs-configure-portal-windows-vm">https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/qs-configure-portal-windows-vm</a>). Available since GDAL 3.3.</p></li>
</ol>
<p>Authentication using Azure Active Directory Workload Identity (using AZURE_TENANT_ID, AZURE_CLIENT_ID, AZURE_FEDERATED_TOKEN_FILE and AZURE_AUTHORITY_HOST environment variables), typically for Azure Kubernetes, is available since GDAL 3.7.2</p>
</div></blockquote>
</li>
<li><p>Starting with GDAL 3.5, the <cite>configuration file &lt;https://github.com/MicrosoftDocs/azure-docs-cli/blob/main/docs-ref-conceptual/azure-cli-configuration.md&gt;</cite> of the &quot;az&quot; command line utility can be used. The following keys of the <code class="docutils literal notranslate"><span class="pre">[storage]</span></code> section will be used in the following priority: <code class="docutils literal notranslate"><span class="pre">connection_string</span></code>, <code class="docutils literal notranslate"><span class="pre">account</span></code> + <code class="docutils literal notranslate"><span class="pre">key</span></code> or <code class="docutils literal notranslate"><span class="pre">account</span></code> + <code class="docutils literal notranslate"><span class="pre">sas_token</span></code></p></li>
</ol>
<p>Since GDAL 3.1, the <a class="reference internal" href="../api/cpl.html#_CPPv49VSIRenamePKcPKc" title="VSIRename"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRename()</span></code></a> operation is supported (first doing a copy of the original file and then deleting it)</p>
<p>Since GDAL 3.3, the <a class="reference internal" href="../api/cpl.html#_CPPv418VSIGetFileMetadataPKcPKc12CSLConstList" title="VSIGetFileMetadata"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIGetFileMetadata()</span></code></a> and <a class="reference internal" href="../api/cpl.html#_CPPv418VSISetFileMetadataPKc12CSLConstListPKc12CSLConstList" title="VSISetFileMetadata"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetFileMetadata()</span></code></a> operations are supported.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</section>
<section id="vsiaz-streaming-microsoft-azure-blob-files-streaming">
<span id="vsiaz-streaming"></span><h3>/vsiaz_streaming/ (Microsoft Azure Blob files: streaming)<a class="headerlink" href="#vsiaz-streaming-microsoft-azure-blob-files-streaming" title="Link to this heading"></a></h3>
<p>/vsiaz_streaming/ is a file system handler that allows on-the-fly sequential reading of files (primarily non-public) files available in Microsoft Azure Blob containers, buckets, without prior download of the entire file. It requires GDAL to be built against libcurl.</p>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsiaz_streaming/container/key</span></code> where <code class="docutils literal notranslate"><span class="pre">container</span></code> is the name of the container and <code class="docutils literal notranslate"><span class="pre">key</span></code> is the object &quot;key&quot;, i.e. a filename potentially containing subdirectories.</p>
<p>Authentication options, and read-only features, are identical to <a class="reference internal" href="#vsiaz"><span class="std std-ref">/vsiaz/</span></a></p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</section>
<section id="vsiadls-microsoft-azure-data-lake-storage-gen2">
<span id="vsiadls"></span><h3>/vsiadls/ (Microsoft Azure Data Lake Storage Gen2)<a class="headerlink" href="#vsiadls-microsoft-azure-data-lake-storage-gen2" title="Link to this heading"></a></h3>
<p>/vsiadls/ is a file system handler that allows on-the-fly random reading of
(primarily non-public) files available in Microsoft Azure Data Lake Storage file
systems, without prior download of the entire file.
It requires GDAL to be built against libcurl.</p>
<p>It has similar capabilities as <a class="reference internal" href="#vsiaz"><span class="std std-ref">/vsiaz/</span></a>, and in particular uses the same
configuration options for authentication. Its advantages over /vsiaz/ are a real
management of directory and Unix-style ACL support. Some features require the Azure
storage to have hierarchical support turned on. Consult its
<a class="reference external" href="https://docs.microsoft.com/en-us/azure/storage/blobs/data-lake-storage-introduction">documentation</a></p>
<p>The main enhancements over /vsiaz/ are:</p>
<blockquote>
<div><ul class="simple">
<li><p>True directory support (no need for the artificial <code class="file docutils literal notranslate"><span class="pre">.gdal_marker_for_dir</span></code>
empty file that is used for /vsiaz/ to have empty directories)</p></li>
<li><p>One-call recursive directory deletion with <a class="reference internal" href="../api/cpl.html#_CPPv417VSIRmdirRecursivePKc" title="VSIRmdirRecursive"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdirRecursive()</span></code></a></p></li>
<li><p>Atomic renaming with <a class="reference internal" href="../api/cpl.html#_CPPv49VSIRenamePKcPKc" title="VSIRename"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRename()</span></code></a></p></li>
<li><p><a class="reference internal" href="../api/cpl.html#_CPPv418VSIGetFileMetadataPKcPKc12CSLConstList" title="VSIGetFileMetadata"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIGetFileMetadata()</span></code></a> support for the &quot;STATUS&quot; and &quot;ACL&quot; metadata domains</p></li>
<li><p><a class="reference internal" href="../api/cpl.html#_CPPv418VSISetFileMetadataPKc12CSLConstListPKc12CSLConstList" title="VSISetFileMetadata"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSISetFileMetadata()</span></code></a> support for the &quot;PROPERTIES&quot; and &quot;ACL&quot; metadata domains</p></li>
</ul>
</div></blockquote>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.3.</span></p>
</div>
</section>
<section id="vsioss-alibaba-cloud-oss-files">
<span id="vsioss"></span><h3>/vsioss/ (Alibaba Cloud OSS files)<a class="headerlink" href="#vsioss-alibaba-cloud-oss-files" title="Link to this heading"></a></h3>
<p>/vsioss/ is a file system handler that allows on-the-fly random reading of (primarily non-public) files available in Alibaba Cloud Object Storage Service (OSS) buckets, without prior download of the entire file. It requires GDAL to be built against libcurl.</p>
<p>It also allows sequential writing of files. No seeks or read operations are then allowed, so in particular direct writing of GeoTIFF files with the GTiff driver is not supported, unless, if, starting with GDAL 3.2, the <a class="reference internal" href="configoptions.html#config-CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE</span></code></a> configuration option is set to <code class="docutils literal notranslate"><span class="pre">YES</span></code>, in which case random-write access is possible (involves the creation of a temporary local file, whose location is controlled by the <a class="reference internal" href="configoptions.html#config-CPL_TMPDIR"><code class="docutils literal notranslate"><span class="pre">CPL_TMPDIR</span></code></a> configuration option).
Deletion of files with <a class="reference internal" href="../api/cpl.html#_CPPv49VSIUnlinkPKc" title="VSIUnlink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIUnlink()</span></code></a> is also supported. Creation of directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> and deletion of (empty) directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> are also possible.</p>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsioss/bucket/key</span></code> where <code class="docutils literal notranslate"><span class="pre">bucket</span></code> is the name of the OSS bucket and <code class="docutils literal notranslate"><span class="pre">key</span></code> is the OSS object &quot;key&quot;, i.e. a filename potentially containing subdirectories.</p>
<p>The generalities of <a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> apply.</p>
<p>The following configuration options are specific to the /vsioss/ handler:</p>
<ul class="simple">
<li><p id="config-OSS_SECRET_ACCESS_KEY"><strong>OSS_SECRET_ACCESS_KEY=value: </strong> (required) Secret access key for authentication.</p>
</li>
<li><p id="config-OSS_ACCESS_KEY_ID"><strong>OSS_ACCESS_KEY_ID=value: </strong> (required) Access key ID for authentication.</p>
</li>
<li><p id="config-OSS_ENDPOINT"><strong>OSS_ENDPOINT=value: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">oss-us-east-1.aliyuncs.com</span></code>. Endpoint URL containing the region associated with the bucket.</p>
</li>
<li><p id="config-VSIOSS_CHUNK_SIZE"><strong>VSIOSS_CHUNK_SIZE=&lt;MB&gt;: </strong> Defaults to <code class="docutils literal notranslate"><span class="pre">50</span></code>. Chunk size used with multipart upload API.</p>
</li>
</ul>
<p>The <a class="reference internal" href="#config-OSS_SECRET_ACCESS_KEY"><code class="docutils literal notranslate"><span class="pre">OSS_SECRET_ACCESS_KEY</span></code></a> and <a class="reference internal" href="#config-OSS_ACCESS_KEY_ID"><code class="docutils literal notranslate"><span class="pre">OSS_ACCESS_KEY_ID</span></code></a> configuration options must be set. The <a class="reference internal" href="#config-OSS_ENDPOINT"><code class="docutils literal notranslate"><span class="pre">OSS_ENDPOINT</span></code></a> configuration option should normally be set to the appropriate value, which reflects the region attached to the bucket. If the bucket is stored in another region than oss-us-east-1, the code logic will redirect to the appropriate endpoint.</p>
<p>On writing, the file is uploaded using the OSS multipart upload API. The size of chunks is set to 50 MB by default, allowing creating files up to 500 GB (10000 parts of 50 MB each). If larger files are needed, then increase the value of the <a class="reference internal" href="#config-VSIOSS_CHUNK_SIZE"><code class="docutils literal notranslate"><span class="pre">VSIOSS_CHUNK_SIZE</span></code></a> config option to a larger value (expressed in MB). In case the process is killed and the file not properly closed, the multipart upload will remain open, causing Alibaba to charge you for the parts storage. You'll have to abort yourself with other means. For files smaller than the chunk size, a simple PUT request is used instead of the multipart upload API.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</section>
<section id="vsioss-streaming-alibaba-cloud-oss-files-streaming">
<span id="vsioss-streaming"></span><h3>/vsioss_streaming/ (Alibaba Cloud OSS files: streaming)<a class="headerlink" href="#vsioss-streaming-alibaba-cloud-oss-files-streaming" title="Link to this heading"></a></h3>
<p>/vsioss_streaming/ is a file system handler that allows on-the-fly sequential reading of files (primarily non-public) files available in Alibaba Cloud Object Storage Service (OSS) buckets, without prior download of the entire file. It requires GDAL to be built against libcurl.</p>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsioss_streaming/bucket/key</span></code> where <code class="docutils literal notranslate"><span class="pre">bucket</span></code> is the name of the bucket and <code class="docutils literal notranslate"><span class="pre">key</span></code> is the object &quot;key&quot;, i.e. a filename potentially containing subdirectories.</p>
<p>Authentication options, and read-only features, are identical to <a class="reference internal" href="#vsioss"><span class="std std-ref">/vsioss/</span></a></p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</section>
<section id="vsiswift-openstack-swift-object-storage">
<span id="vsiswift"></span><h3>/vsiswift/ (OpenStack Swift Object Storage)<a class="headerlink" href="#vsiswift-openstack-swift-object-storage" title="Link to this heading"></a></h3>
<p>/vsiswift/ is a file system handler that allows on-the-fly random reading of (primarily non-public) files available in OpenStack Swift Object Storage (swift) buckets, without prior download of the entire file. It requires GDAL to be built against libcurl.</p>
<p>It also allows sequential writing of files. No seeks or read operations are then allowed, so in particular direct writing of GeoTIFF files with the GTiff driver is not supported, unless, if, starting with GDAL 3.2, the <a class="reference internal" href="configoptions.html#config-CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE</span></code></a> configuration option is set to <code class="docutils literal notranslate"><span class="pre">YES</span></code>, in which case random-write access is possible (involves the creation of a temporary local file, whose location is controlled by the <a class="reference internal" href="configoptions.html#config-CPL_TMPDIR"><code class="docutils literal notranslate"><span class="pre">CPL_TMPDIR</span></code></a> configuration option).
Deletion of files with <a class="reference internal" href="../api/cpl.html#_CPPv49VSIUnlinkPKc" title="VSIUnlink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIUnlink()</span></code></a> is also supported. Creation of directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> and deletion of (empty) directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> are also possible.</p>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsiswift/bucket/key</span></code> where <code class="docutils literal notranslate"><span class="pre">bucket</span></code> is the name of the swift bucket and <code class="docutils literal notranslate"><span class="pre">key</span></code> is the swift object &quot;key&quot;, i.e. a filename potentially containing subdirectories.</p>
<p>The generalities of <a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> apply.</p>
<p>The following configuration options are specific to the /vsioss/ handler:</p>
<ul class="simple">
<li><p id="config-SWIFT_STORAGE_URL"><strong>SWIFT_STORAGE_URL=value: </strong>Storage URL.</p>
</li>
<li><p id="config-SWIFT_AUTH_TOKEN"><strong>SWIFT_AUTH_TOKEN=value: </strong>Value of the x-auth-token authorization</p>
</li>
<li><p id="config-SWIFT_AUTH_V1_URL"><strong>SWIFT_AUTH_V1_URL=value: </strong>URL for Auth V1 authentication.</p>
</li>
<li><p id="config-SWIFT_USER"><strong>SWIFT_USER=value: </strong>User name for Auth V1 authentication.</p>
</li>
<li><p id="config-SWIFT_KEY"><strong>SWIFT_KEY=value: </strong>Key for Auth V1 authentication.</p>
</li>
</ul>
<p>Three authentication methods are possible, and are attempted in the following order:</p>
<ol class="arabic simple">
<li><p>The <a class="reference internal" href="#config-SWIFT_STORAGE_URL"><code class="docutils literal notranslate"><span class="pre">SWIFT_STORAGE_URL</span></code></a> and <a class="reference internal" href="#config-SWIFT_AUTH_TOKEN"><code class="docutils literal notranslate"><span class="pre">SWIFT_AUTH_TOKEN</span></code></a> configuration options are set respectively to the storage URL (e.g <a class="reference external" href="http://127.0.0.1:12345/v1/AUTH_something">http://127.0.0.1:12345/v1/AUTH_something</a>) and the value of the x-auth-token authorization token.</p></li>
<li><p>The <a class="reference internal" href="#config-SWIFT_AUTH_V1_URL"><code class="docutils literal notranslate"><span class="pre">SWIFT_AUTH_V1_URL</span></code></a>, <a class="reference internal" href="#config-SWIFT_USER"><code class="docutils literal notranslate"><span class="pre">SWIFT_USER</span></code></a> and <a class="reference internal" href="#config-SWIFT_KEY"><code class="docutils literal notranslate"><span class="pre">SWIFT_KEY</span></code></a> configuration options are set respectively to the endpoint of the Auth V1 authentication (e.g <a class="reference external" href="http://127.0.0.1:12345/auth/v1.0">http://127.0.0.1:12345/auth/v1.0</a>), the user name and the key/password. This authentication endpoint will be used to retrieve the storage URL and authorization token mentioned in the first authentication method.</p></li>
<li><p>Authentication with Keystone v3 is using the same options as python-swiftclient, see <a class="reference external" href="https://docs.openstack.org/python-swiftclient/latest/cli/index.html#authentication">https://docs.openstack.org/python-swiftclient/latest/cli/index.html#authentication</a> for more details. GDAL (&gt;= 3.1) supports the following options:</p>
<ul class="simple">
<li><p><cite>OS_IDENTITY_API_VERSION=3</cite></p></li>
<li><p><cite>OS_AUTH_URL</cite></p></li>
<li><p><cite>OS_USERNAME</cite></p></li>
<li><p><cite>OS_PASSWORD</cite></p></li>
<li><p><cite>OS_USER_DOMAIN_NAME</cite></p></li>
<li><p><cite>OS_PROJECT_NAME</cite></p></li>
<li><p><cite>OS_PROJECT_DOMAIN_NAME</cite></p></li>
<li><p><cite>OS_REGION_NAME</cite></p></li>
</ul>
</li>
<li><p>Application Credential Authentication via Keystone v3, GDAL (&gt;= 3.3.1) supports application-credential authentication with the following options:</p>
<ul class="simple">
<li><p><cite>OS_IDENTITY_API_VERSION=3</cite></p></li>
<li><p><cite>OS_AUTH_TYPE=v3applicationcredential</cite></p></li>
<li><p><cite>OS_AUTH_URL</cite></p></li>
<li><p><cite>OS_APPLICATION_CREDENTIAL_ID</cite></p></li>
<li><p><cite>OS_APPLICATION_CREDENTIAL_SECRET</cite></p></li>
<li><p><cite>OS_REGION_NAME</cite></p></li>
</ul>
</li>
</ol>
<p>This file system handler also allows sequential writing of files (no seeks or read operations are then allowed).</p>
<p>In some versions of OpenStack Swift, the access to large (segmented) files fails unless they are explicitly marked as static large objects, instead of being dynamic large objects which is the default. Using the python-swiftclient this can be achieved when uploading the file by passing the <code class="docutils literal notranslate"><span class="pre">--use-slo</span></code> flag (see <a class="reference external" href="https://docs.openstack.org/python-swiftclient/latest/cli/index.html#swift-upload">https://docs.openstack.org/python-swiftclient/latest/cli/index.html#swift-upload</a> for all options). For more information about large objects see <a class="reference external" href="https://docs.openstack.org/swift/latest/api/large_objects.html">https://docs.openstack.org/swift/latest/api/large_objects.html</a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</section>
<section id="vsiswift-streaming-openstack-swift-object-storage-streaming">
<span id="vsiswift-streaming"></span><h3>/vsiswift_streaming/ (OpenStack Swift Object Storage: streaming)<a class="headerlink" href="#vsiswift-streaming-openstack-swift-object-storage-streaming" title="Link to this heading"></a></h3>
<p>/vsiswift_streaming/ is a file system handler that allows on-the-fly sequential reading of files (primarily non-public) files available in OpenStack Swift Object Storage (swift) buckets, without prior download of the entire file. It requires GDAL to be built against libcurl.</p>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsiswift_streaming/bucket/key</span></code> where <code class="docutils literal notranslate"><span class="pre">bucket</span></code> is the name of the bucket and <code class="docutils literal notranslate"><span class="pre">key</span></code> is the object &quot;key&quot;, i.e. a filename potentially containing subdirectories.</p>
<p>Authentication options, and read-only features, are identical to <a class="reference internal" href="#vsiswift"><span class="std std-ref">/vsiswift/</span></a></p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
</section>
<section id="vsihdfs-hadoop-file-system">
<span id="vsihdfs"></span><h3>/vsihdfs/ (Hadoop File System)<a class="headerlink" href="#vsihdfs-hadoop-file-system" title="Link to this heading"></a></h3>
<p>/vsihdfs/ is a file system handler that provides read access to HDFS.
This handler requires GDAL to have been built with Java support
(CMake <a class="reference external" href="https://cmake.org/cmake/help/latest/module/FindJNI.html">FindJNI</a>)
and <a class="reference internal" href="../development/building_from_source.html#building-from-source-hdfs"><span class="std std-ref">HDFS</span></a> support.
Support for this handler is currently only available on Unix-like systems.</p>
<p>Note: support for the HTTP REST API (webHdfs) is also available with <a class="reference internal" href="#vsiwebhdfs"><span class="std std-ref">/vsiwebhdfs/ (Web Hadoop File System REST API)</span></a></p>
<p>The LD_LIBRARY_PATH and CLASSPATH environment variables must be typically
set up as following.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>HADOOP_HOME=$HOME/hadoop-3.3.5
LD_LIBRARY_PATH=$HADOOP_HOME/lib/native:$LD_LIBRARY_PATH
CLASSPATH=$HADOOP_HOME/etc/hadoop:$HADOOP_HOME/share/hadoop/common/*:$HADOOP_HOME/share/hadoop/common/lib/*:$HADOOP_HOME/share/hadoop/hdfs/*
</pre></div>
</div>
<p>Failure to properly define the CLASSPATH will result in hard crashes in the
native libhdfs.</p>
<p>Relevant Hadoop documentation links:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/LibHdfs.html">C API libhdfs</a></p></li>
<li><p><a class="reference external" href="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html">HDFS Users Guide</a></p></li>
<li><p><a class="reference external" href="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-common/SingleCluster.html">Hadoop: Setting up a Single Node Cluster</a></p></li>
</ul>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsihdfs/hdfsUri</span></code> where <code class="docutils literal notranslate"><span class="pre">hdfsUri</span></code> is a valid HDFS URI.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">vsihdfs</span><span class="o">/</span><span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">//</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span>  <span class="p">(</span><span class="n">a</span> <span class="n">local</span> <span class="n">file</span> <span class="n">accessed</span> <span class="n">through</span> <span class="n">HDFS</span><span class="p">)</span>
<span class="o">/</span><span class="n">vsihdfs</span><span class="o">/</span><span class="n">hdfs</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">9000</span><span class="o">/</span><span class="n">my</span><span class="o">.</span><span class="n">tif</span>  <span class="p">(</span><span class="n">a</span> <span class="n">file</span> <span class="n">stored</span> <span class="ow">in</span> <span class="n">HDFS</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.4.</span></p>
</div>
</section>
<section id="vsiwebhdfs-web-hadoop-file-system-rest-api">
<span id="vsiwebhdfs"></span><h3>/vsiwebhdfs/ (Web Hadoop File System REST API)<a class="headerlink" href="#vsiwebhdfs-web-hadoop-file-system-rest-api" title="Link to this heading"></a></h3>
<p>/vsiwebhdfs/ is a file system handler that provides read and write access to HDFS through its HTTP REST API.</p>
<p>Recognized filenames are of the form <code class="file docutils literal notranslate"><span class="pre">/vsiwebhdfs/http://hostname:port/webhdfs/v1/path/to/filename</span></code>.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">vsiwebhdfs</span><span class="o">/</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">50070</span><span class="o">/</span><span class="n">webhdfs</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">mydir</span><span class="o">/</span><span class="n">byte</span><span class="o">.</span><span class="n">tif</span>
</pre></div>
</div>
<p>It also allows sequential writing of files. No seeks or read operations are then allowed, so in particular direct writing of GeoTIFF files with the GTiff driver is not supported, unless, if, starting with GDAL 3.2, the <a class="reference internal" href="configoptions.html#config-CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE"><code class="docutils literal notranslate"><span class="pre">CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE</span></code></a> configuration option is set to <code class="docutils literal notranslate"><span class="pre">YES</span></code>, in which case random-write access is possible (involves the creation of a temporary local file, whose location is controlled by the <a class="reference internal" href="configoptions.html#config-CPL_TMPDIR"><code class="docutils literal notranslate"><span class="pre">CPL_TMPDIR</span></code></a> configuration option).
Deletion of files with <a class="reference internal" href="../api/cpl.html#_CPPv49VSIUnlinkPKc" title="VSIUnlink"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIUnlink()</span></code></a> is also supported. Creation of directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIMkdirPKcl" title="VSIMkdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIMkdir()</span></code></a> and deletion of (empty) directories with <a class="reference internal" href="../api/cpl.html#_CPPv48VSIRmdirPKc" title="VSIRmdir"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIRmdir()</span></code></a> are also possible.</p>
<p>The generalities of <a class="reference internal" href="#vsicurl"><span class="std std-ref">/vsicurl/</span></a> apply.</p>
<p>The following configuration options are available:</p>
<ul class="simple">
<li><p id="config-WEBHDFS_USERNAME"><strong>WEBHDFS_USERNAME=value: </strong>User name (when security is off).</p>
</li>
<li><p id="config-WEBHDFS_DELEGATION"><strong>WEBHDFS_DELEGATION=value: </strong>Hadoop delegation token (when security is on).</p>
</li>
<li><p id="config-WEBHDFS_DATANODE_HOST"><strong>WEBHDFS_DATANODE_HOST=value: </strong>For APIs using redirect, substitute the redirection hostname with the one provided by this option (normally resolvable hostname should be rewritten by a proxy)</p>
</li>
<li><p id="config-WEBHDFS_REPLICATION"><strong>WEBHDFS_REPLICATION=&lt;integer&gt;: </strong>Replication value used when creating a file</p>
</li>
<li><p id="config-WEBHDFS_PERMISSION"><strong>WEBHDFS_PERMISSION=&lt;integer&gt;: </strong>Permission mask (to provide as decimal number) when creating a file or directory</p>
</li>
</ul>
<p>This file system handler also allows sequential writing of files (no seeks or read operations are then allowed)</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.4.</span></p>
</div>
</section>
</section>
<section id="vsistdin-standard-input-streaming">
<span id="vsistdin"></span><h2>/vsistdin/ (standard input streaming)<a class="headerlink" href="#vsistdin-standard-input-streaming" title="Link to this heading"></a></h2>
<p>/vsistdin/ is a file handler that allows reading from the standard input stream.</p>
<p>The filename syntax must be only <code class="file docutils literal notranslate"><span class="pre">/vsistdin/</span></code>, (not e.g.,
/vsistdin/path/to/f.csv , but &quot;/vsistdin?buffer_limit=value&quot; is OK.)</p>
<p>The file operations available are of course limited to Read() and forward Seek().
Full seek in the first MB of a file is possible, and it is cached so that closing,
re-opening <code class="file docutils literal notranslate"><span class="pre">/vsistdin/</span></code> and reading within this first megabyte is possible
multiple times in the same process.</p>
<p>The size of the in-memory cache can be controlled with
the <a class="reference internal" href="#config-CPL_VSISTDIN_BUFFER_LIMIT"><code class="docutils literal notranslate"><span class="pre">CPL_VSISTDIN_BUFFER_LIMIT</span></code></a> configuration option:</p>
<ul class="simple">
<li><p id="config-CPL_VSISTDIN_BUFFER_LIMIT"><strong>CPL_VSISTDIN_BUFFER_LIMIT=value: </strong> (GDAL &gt;= 3.6)  Defaults to <code class="docutils literal notranslate"><span class="pre">1MB</span></code>. Specifies the size of the /vsistdin in bytes
(or using a MB or GB suffix, e.g. &quot;1GB&quot;), or -1 for unlimited.</p>
</li>
</ul>
<p>The &quot;/vsistdin?buffer_limit=value&quot; syntax can also be used.</p>
<p>/vsistdin filenames can be combined with other file system. For example, to
read a file within a potentially big ZIP file streamed to gdal_translate:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cat file.tif.zip | gdal_translate /vsizip/{/vsistdin?buffer_limit=-1}/path/to/some.tif out.tif
</pre></div>
</div>
</section>
<section id="vsistdout-standard-output-streaming">
<span id="vsistdout"></span><h2>/vsistdout/ (standard output streaming)<a class="headerlink" href="#vsistdout-standard-output-streaming" title="Link to this heading"></a></h2>
<p>/vsistdout/ is a file handler that allows writing into the standard output stream.</p>
<p>The filename syntax must be only <code class="file docutils literal notranslate"><span class="pre">/vsistdout/</span></code>.</p>
<p>The file operations available are of course limited to Write().</p>
<p>A variation of this file system exists as the <code class="file docutils literal notranslate"><span class="pre">/vsistdout_redirect/</span></code> file system handler, where the output function can be defined with <a class="reference internal" href="../api/cpl.html#_CPPv423VSIStdoutSetRedirection16VSIWriteFunctionP4FILE" title="VSIStdoutSetRedirection"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStdoutSetRedirection()</span></code></a>.</p>
</section>
<section id="vsimem-in-memory-files">
<span id="vsimem"></span><h2>/vsimem/ (in-memory files)<a class="headerlink" href="#vsimem-in-memory-files" title="Link to this heading"></a></h2>
<p>/vsimem/ is a file handler that allows block of memory to be treated as files. All portions of the file system underneath the base path <code class="file docutils literal notranslate"><span class="pre">/vsimem/</span></code> will be handled by this driver.</p>
<p>Normal VSI*L functions can be used freely to create and destroy memory arrays, treating them as if they were real file system objects. Some additional methods exist to efficiently create memory file system objects without duplicating original copies of the data or to &quot;steal&quot; the block of memory associated with a memory file. See <a class="reference internal" href="../api/cpl.html#_CPPv420VSIFileFromMemBufferPKcP5GByte12vsi_l_offseti" title="VSIFileFromMemBuffer"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIFileFromMemBuffer()</span></code></a> and <a class="reference internal" href="../api/cpl.html#_CPPv419VSIGetMemFileBufferPKcP12vsi_l_offseti" title="VSIGetMemFileBuffer"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIGetMemFileBuffer()</span></code></a>.</p>
<p>Directory related functions are supported.</p>
<p>/vsimem/ files are visible within the same process. Multiple threads can access the same underlying file in read mode, provided they used different handles, but concurrent write and read operations on the same underlying file are not supported (locking is left to the responsibility of calling code).</p>
</section>
<section id="vsisubfile-portions-of-files">
<span id="vsisubfile"></span><h2>/vsisubfile/ (portions of files)<a class="headerlink" href="#vsisubfile-portions-of-files" title="Link to this heading"></a></h2>
<p>The /vsisubfile/ virtual file system handler allows access to subregions of files, treating them as a file on their own to the virtual file system functions (VSIFOpenL(), etc).</p>
<p>A special form of the filename is used to indicate a subportion of another file: <code class="file docutils literal notranslate"><span class="pre">/vsisubfile/&lt;offset&gt;[_&lt;size&gt;],&lt;filename&gt;</span></code>.</p>
<p>The size parameter is optional. Without it the remainder of the file from the start offset as treated as part of the subfile. Otherwise only &lt;size&gt; bytes from &lt;offset&gt; are treated as part of the subfile. The &lt;filename&gt; portion may be a relative or absolute path using normal rules. The &lt;offset&gt; and &lt;size&gt; values are in bytes.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">vsisubfile</span><span class="o">/</span><span class="mi">1000_3000</span><span class="p">,</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">abc</span><span class="o">.</span><span class="n">ntf</span>
<span class="o">/</span><span class="n">vsisubfile</span><span class="o">/</span><span class="mi">5000</span><span class="p">,</span><span class="o">../</span><span class="n">xyz</span><span class="o">/</span><span class="n">raw</span><span class="o">.</span><span class="n">dat</span>
</pre></div>
</div>
<p>Unlike the /vsimem/ or conventional file system handlers, there is no meaningful support for filesystem operations for creating new files, traversing directories, and deleting files within the /vsisubfile/ area. Only the <a class="reference internal" href="../api/cpl.html#_CPPv48VSIStatLPKcP11VSIStatBufL" title="VSIStatL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIStatL()</span></code></a>, <a class="reference internal" href="../api/cpl.html#_CPPv49VSIFOpenLPKcPKc" title="VSIFOpenL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIFOpenL()</span></code></a> and operations based on the file handle returned by <a class="reference internal" href="../api/cpl.html#_CPPv49VSIFOpenLPKcPKc" title="VSIFOpenL"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIFOpenL()</span></code></a> operate properly.</p>
</section>
<section id="vsisparse-sparse-files">
<span id="vsisparse"></span><h2>/vsisparse/ (sparse files)<a class="headerlink" href="#vsisparse-sparse-files" title="Link to this heading"></a></h2>
<p>The /vsisparse/ virtual file handler allows a virtual file to be composed from chunks of data in other files, potentially with large spaces in the virtual file set to a constant value. This can make it possible to test some sorts of operations on what seems to be a large file with image data set to a constant value. It is also helpful when wanting to add test files to the test suite that are too large, but for which most of the data can be ignored. It could, in theory, also be used to treat several files on different file systems as one large virtual file.</p>
<p>The file referenced by /vsisparse/ should be an XML control file formatted something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;VSISparseFile&gt;
    &lt;Length&gt;87629264&lt;/Length&gt;
    &lt;SubfileRegion&gt;  &lt;!-- Stuff at start of file. --&gt;
        &lt;Filename relative=&quot;1&quot;&gt;251_head.dat&lt;/Filename&gt;
        &lt;DestinationOffset&gt;0&lt;/DestinationOffset&gt;
        &lt;SourceOffset&gt;0&lt;/SourceOffset&gt;
        &lt;RegionLength&gt;2768&lt;/RegionLength&gt;
    &lt;/SubfileRegion&gt;

    &lt;SubfileRegion&gt;  &lt;!-- RasterDMS node. --&gt;
        &lt;Filename relative=&quot;1&quot;&gt;251_rasterdms.dat&lt;/Filename&gt;
        &lt;DestinationOffset&gt;87313104&lt;/DestinationOffset&gt;
        &lt;SourceOffset&gt;0&lt;/SourceOffset&gt;
        &lt;RegionLength&gt;160&lt;/RegionLength&gt;
    &lt;/SubfileRegion&gt;

    &lt;SubfileRegion&gt;  &lt;!-- Stuff at end of file. --&gt;
        &lt;Filename relative=&quot;1&quot;&gt;251_tail.dat&lt;/Filename&gt;
        &lt;DestinationOffset&gt;87611924&lt;/DestinationOffset&gt;
        &lt;SourceOffset&gt;0&lt;/SourceOffset&gt;
        &lt;RegionLength&gt;17340&lt;/RegionLength&gt;
    &lt;/SubfileRegion&gt;

    &lt;ConstantRegion&gt;  &lt;!-- Default for the rest of the file. --&gt;
        &lt;DestinationOffset&gt;0&lt;/DestinationOffset&gt;
        &lt;RegionLength&gt;87629264&lt;/RegionLength&gt;
        &lt;Value&gt;0&lt;/Value&gt;
    &lt;/ConstantRegion&gt;
&lt;/VSISparseFile&gt;
</pre></div>
</div>
<p>Hopefully the values and semantics are fairly obvious.</p>
</section>
<section id="vsicached-file-caching">
<span id="vsicached"></span><h2>/vsicached/ (File caching)<a class="headerlink" href="#vsicached-file-caching" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../api/cpl_cpp.html#_CPPv419VSICreateCachedFileP16VSIVirtualHandle6size_t6size_t" title="VSICreateCachedFile"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSICreateCachedFile()</span></code></a> function takes a virtual file handle and returns a new handle that caches read-operations on the input file handle. The cache is RAM based and the content of the cache is discarded when the file handle is closed. The cache is a least-recently used lists of blocks of 32KB each (default size).</p>
<p>This is mostly useful for files accessible through slow local/operating-system-mounted filesystems.</p>
<p>That is implicitly used by a number of the above mentioned file systems (namely the default one for standard file system operations, and the /vsicurl/ and other related network file systems) if the <code class="docutils literal notranslate"><span class="pre">VSI_CACHE</span></code> configuration option is set to <code class="docutils literal notranslate"><span class="pre">YES</span></code>.</p>
<p>The default size of caching for each file is 25 MB (25 MB for each file that is cached), and can be controlled with the <code class="docutils literal notranslate"><span class="pre">VSI_CACHE_SIZE</span></code> configuration option (value in bytes).</p>
<p>The <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">VSICachedFile</span></code> class only handles read operations at that time, and will error out on write operations.</p>
<p>Starting with GDAL 3.8, a <code class="docutils literal notranslate"><span class="pre">/vsicached?</span></code> virtual file system also exists to cache a particular file.</p>
<p>The syntax is the following one: <code class="docutils literal notranslate"><span class="pre">/vsicached?[option_i=val_i&amp;]*file=&lt;filename&gt;</span></code>
where each option name and value (including the value of <code class="docutils literal notranslate"><span class="pre">file</span></code>) is URL-encoded
(actually, only required for the ampersand character. It might be desirable to
have forward slash character uncoded).
It is important that the <code class="docutils literal notranslate"><span class="pre">file</span></code> option appears at the end, so that code that
tries to look for side-car files, list directory content, can work properly.</p>
<p>Currently supported options are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">chunk_size=&lt;value&gt;</span></code> where value is the` size of the chunk size in bytes. <code class="docutils literal notranslate"><span class="pre">KB</span></code> or <code class="docutils literal notranslate"><span class="pre">MB</span></code> suffixes can be also appended (without space after the numeric value). The maximum supported value is 1 GB.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cache_size=&lt;value&gt;</span></code> where value is the size of the cache size in bytes, for each file. <code class="docutils literal notranslate"><span class="pre">KB</span></code> or <code class="docutils literal notranslate"><span class="pre">MB</span></code> suffixes can be also appended.</p></li>
</ul>
<p>Examples:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/vsicached?chunk_size=1MB&amp;file=/home/even/byte.tif</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/vsicached?file=./byte.tif</span></code></p></li>
</ul>
</section>
<section id="vsicrypt-encrypted-files">
<span id="vsicrypt"></span><h2>/vsicrypt/ (encrypted files)<a class="headerlink" href="#vsicrypt-encrypted-files" title="Link to this heading"></a></h2>
<p>/vsicrypt/ is a special file handler is installed that allows reading/creating/update encrypted files on the fly, with random access capabilities.</p>
<p>Refer to <a class="reference internal" href="../api/cpl.html#_CPPv426VSIInstallCryptFileHandlerv" title="VSIInstallCryptFileHandler"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">VSIInstallCryptFileHandler()</span></code></a> for more details.</p>
</section>
</section>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ogr_feature_style.html" class="btn btn-neutral float-right" title="Feature Style Specification" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sql_sqlite_dialect.html" class="btn btn-neutral float-left" title="SQL SQLite dialect" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2024 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
  </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>